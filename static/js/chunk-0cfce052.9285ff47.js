(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cfce052"],{"0210":function(e,t,i){"use strict";function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function c(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,i){return t=w(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function v(e){var t=f();return function(){var i,n=h(e);if(t){var o=h(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return g(this,i)}}function y(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=h(e),null===e)break;return e}function m(){return m="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=y(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},m.apply(this,arguments)}function b(e){return k(e)||C(e)||_(e)||T()}function k(e){if(Array.isArray(e))return O(e)}function C(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _(e,t){if(e){if("string"===typeof e)return O(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function T(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){if("object"!==typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function w(e){var t=E(e,"string");return"symbol"===typeof t?t:String(t)}i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return v})),i.d(t,"e",(function(){return l})),i.d(t,"f",(function(){return m})),i.d(t,"g",(function(){return h})),i.d(t,"h",(function(){return u})),i.d(t,"i",(function(){return o})),i.d(t,"j",(function(){return g})),i.d(t,"k",(function(){return b})),i.d(t,"l",(function(){return r}))},2535:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return h})),i.d(t,"c",(function(){return r})),i.d(t,"d",(function(){return s})),i.d(t,"e",(function(){return l})),i.d(t,"f",(function(){return d})),i.d(t,"g",(function(){return a})),i.d(t,"h",(function(){return c}));var n=i("0210");function o(e,t,i){for(var n=arguments.length,o=new Array(n>3?n-3:0),r=3;r<n;r++)o[r-3]=arguments[r];var a=t.call.apply(t,[e].concat(o));i&&"function"===typeof i&&(a&&a.then?a.then((function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];i.call.apply(i,[e].concat(n))})):i.call.apply(i,[e].concat(o)))}function r(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[e]&&(this.__hooks[e]=null),function(){var r=arguments,a=this;if(i.pre)try{var s;(s=i.pre).call.apply(s,[this].concat(Array.prototype.slice.call(arguments)))}catch(u){throw u.message="[pluginName: ".concat(this.pluginName,":").concat(e,":pre error] >> ").concat(u.message),u}if(this.__hooks&&this.__hooks[e])try{var c,l=(c=this.__hooks[e]).call.apply(c,[this,this].concat(Array.prototype.slice.call(arguments)));l?l.then?l.then((function(e){!1!==e&&o.apply(void 0,[a,t,i.next].concat(Object(n["k"])(r)))})).catch((function(e){throw e})):o.apply(void 0,[this,t,i.next].concat(Array.prototype.slice.call(arguments))):void 0===l&&o.apply(void 0,[this,t,i.next].concat(Array.prototype.slice.call(arguments)))}catch(u){throw u.message="[pluginName: ".concat(this.pluginName,":").concat(e,"] >> ").concat(u.message),u}else o.apply(void 0,[this,t,i.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function a(e,t){var i=this.__hooks;if(i)return!!i.hasOwnProperty(e)&&(i&&(i[e]=t),!0)}function s(e,t){var i=this.__hooks;i&&delete i[e]}function c(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var t=this.plugins[e.toLowerCase()],i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return t.useHooks&&t.useHooks.apply(t,n)}}function l(e){if(this.plugins&&this.plugins[e.toLowerCase()]){var t=this.plugins[e.toLowerCase()];if(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return t.removeHooks&&t.removeHooks.apply(t,n)}}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.__hooks={},t&&t.map((function(t){e.__hooks[t]=null})),Object.defineProperty(e,"hooks",{get:function(){return e.__hooks&&Object.keys(e.__hooks).map((function(t){if(e.__hooks[t])return t}))}})}function h(e){e.__hooks=null}function d(e,t,i){for(var n=arguments.length,o=new Array(n>3?n-3:0),r=3;r<n;r++)o[r-3]=arguments[r];if(!e.__hooks||!e.__hooks[t])return i.call.apply(i,[e,e].concat(o));var a,s=(a=e.__hooks[t]).call.apply(a,[e,e].concat(o));if(s&&s.then)s.then((function(t){return!1===t?null:i.call.apply(i,[e,e].concat(o))})).catch((function(e){}));else if(!1!==s)return i.call.apply(i,[e,e].concat(o))}},"2a75":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("0210"),o=i("9a98"),r=i("d2c7"),a=i("2535");function s(e,t){r["b"].logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var c=function(){function e(t){Object(n["b"])(this,e),o["b"].checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),Object(a["a"])(this),this.__args=t,this.__events={},this.__onceEvents={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}return Object(n["c"])(e,[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=e.pluginName?e.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){e||(e=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=o["b"].checkTouchSupport()?"touch":"mouse";return!this.playerConfig||"touch"!==this.playerConfig.domEventType&&"mouse"!==this.playerConfig.domEventType||(e=this.playerConfig.domEventType),e}},{key:"on",value:function(e,t){var i=this;e&&t&&this.player?"string"===typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach((function(e){i.__events[e]=t,i.player.on(e,t)})):s(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(e,t){var i=this;e&&t&&this.player?"string"===typeof e?(this.__onceEvents[e]=t,this.player.once(e,t)):Array.isArray(e)&&e.forEach((function(n){i.__onceEvents[n]=t,i.player.once(e,t)})):s(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(e,t){var i=this;e&&t&&this.player?"string"===typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach((function(n){delete i.__events[e],i.player.off(n,t)})):s(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var e=this;["__events","__onceEvents"].forEach((function(t){Object.keys(e[t]).forEach((function(i){e[t][i]&&e.off(i,e[t][i]),i&&delete e[t][i]}))})),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(e){var t;if(this.player){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];(t=this.player).emit.apply(t,[e].concat(n))}}},{key:"emitUserAction",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.player){var o=Object(n["i"])(Object(n["i"])({},i),{},{pluginName:this.pluginName});this.player.emitUserAction(e,t,o)}}},{key:"hook",value:function(e,t){return a["c"].call.apply(a["c"],[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return a["g"].call.apply(a["g"],[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return a["d"].call.apply(a["d"],[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return i&&(t.pluginName=i),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var e=this,t=this.player,i=this.pluginName;this.offAll(),o["b"].clearAllTimers(this),o["b"].checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map((function(t){e[t]=null})),t.unRegisterPlugin(i),Object(a["b"])(this)}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&Object.defineProperty(e,i,t[i])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),e}()},"2bdd":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return c}));var n=i("0210"),o=i("301b"),r=i("9a98"),a={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},s={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},c=Object(n["c"])((function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};Object(n["b"])(this,e);var a=t&&t.i18n?t.i18n.ERROR_TYPES:null;if(t.media){var c=i.mediaError?i.mediaError:t.media.error||{},l=t.duration,u=t.currentTime,h=t.ended,d=t.src,f=t.currentSrc,p=t.media,g=p.readyState,v=p.networkState,y=i.errorCode||c.code;s[y]&&(y=s[y]);var m={playerVersion:o["a"],currentTime:u,duration:l,ended:h,readyState:g,networkState:v,src:d||f,errorType:i.errorType,errorCode:y,message:i.errorMessage||c.message,mediaError:c,originError:i.originError?i.originError.stack:"",host:r["b"].getHostFromUrl(d||f)};return i.ext&&Object.keys(i.ext).map((function(e){m[e]=i.ext[e]})),m}if(arguments.length>1){for(var b={playerVersion:o["a"],domain:document.domain},k=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],C=0;C<arguments.length;C++)b[k[C]]=arguments[C];return b.ex=a?(a[arguments[0]]||{}).msg:"",b}}))},"301b":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n="3.0.5"},"476e":function(e,t,i){"use strict";i.d(t,"a",(function(){return M}));var n=i("0210"),o=i("ba10"),r=i.n(o),a=i("9a98"),s=i("b857"),c=i("2bdd"),l=i("b28d");function u(e,t){this&&this.emit&&("error"===e?this.errorHandler(e,t.error):this.emit(e,t))}function h(e,t){return function(i,n){var o={player:t,eventName:e,originalEvent:i,detail:i.detail||{},timeStamp:i.timeStamp,currentTime:t.currentTime,duration:t.duration,paused:t.paused,ended:t.ended,isInternalOp:!!t._internalOp[i.type],muted:t.muted,volume:t.volume,host:a["b"].getHostFromUrl(t.currentSrc),vtype:t.vtype};if(t.removeInnerOP(i.type),"timeupdate"===e&&(t._currentTime=t.media&&t.media.currentTime),"ratechange"===e){var r=t.media?t.media.playbackRate:0;if(r&&t._rate===r)return;t._rate=t.media&&t.media.playbackRate}if("durationchange"===e&&(t._duration=t.media.duration),"volumechange"===e&&(o.isMutedChange=t._lastMuted!==t.muted,t._lastMuted=t.muted),"error"===e&&(o.error=n||t.video.error),t.mediaEventMiddleware[e]){var s=u.bind(t,e,o);try{t.mediaEventMiddleware[e].call(t,o,s)}catch(c){throw u.call(t,e,o),c}}else u.call(t,e,o)}}var d=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;Object(n["b"])(this,i),o=t.call(this,e),o._hasStart=!1,o._currentTime=0,o._duration=0,o._internalOp={},o._lastMuted=!1,o.vtype="MP4",o._rate=-1,o.mediaConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:0|e.tabindex,mediaType:e.mediaType||"video"},e.videoConfig,e.videoAttributes);var r=e["x5-video-player-type"]||e.x5VideoPlayerType;return s["a"].isWeixin&&s["a"].os.isAndroid&&r&&(o.mediaConfig["x5-video-player-type"]=r,delete o.mediaConfig.playsinline,delete o.mediaConfig["webkit-playsinline"],delete o.mediaConfig["x5-playsinline"]),e.loop&&(o.mediaConfig.loop="loop"),o.media=a["b"].createDom(o.mediaConfig.mediaType,"",o.mediaConfig,""),e.defaultPlaybackRate&&(o.media.defaultPlaybackRate=o.media.playbackRate=e.defaultPlaybackRate),"Number"===a["b"].typeOf(e.volume)&&(o.volume=e.volume),e.autoplayMuted&&(o.media.muted=!0,o._lastMuted=!0),e.autoplay&&(o.media.autoplay=!0),o._interval={},o.mediaEventMiddleware={},o.attachVideoEvents(),o}return Object(n["c"])(i,[{key:"setEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(i){t.mediaEventMiddleware[i]=e[i]}))}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(e){delete t.mediaEventMiddleware[e]}))}},{key:"attachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers||(this._evHandlers=l["VIDEO_EVENTS"].map((function(t){var i="on".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));return"function"===typeof e[i]&&e.on(t,e[i]),Object(n["e"])({},t,h(t,e))}))),this._evHandlers.forEach((function(e){var i=Object.keys(e)[0];t.addEventListener(i,e[i],!1)}))}},{key:"detachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers.forEach((function(e){var i=Object.keys(e)[0];t.removeEventListener(i,e[i],!1)})),this._evHandlers.forEach((function(t){var i=Object.keys(t)[0],n="on".concat(i.charAt(0).toUpperCase()).concat(i.slice(1));"function"===typeof e[n]&&e.off(i,e[n])})),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,t){var i=this;e.removeAttribute("src"),e.load(),t.forEach((function(e){i.media.appendChild(a["b"].createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||"")}))}));var n=e.children;if(n){this._videoSourceCount=n.length;for(var o=null,r=0;r<this._evHandlers.length;r++)if("error"===Object.keys(this._evHandlers[r])[0]){o=this._evHandlers[r];break}!this._sourceError&&(this._sourceError=function(e){if(i._videoSourceCount--,0===i._videoSourceCount){var t={code:4,message:"sources load error"};o?o.error(e,t):i.errorHandler("error",t)}});for(var s=0;s<n.length;s++)n[s].addEventListener("error",this._sourceError)}}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(t&&0!==t.length&&this._sourceError){for(var i=0;i<t.length;i++)t[i].removeEventListener("error",this._sourceError);while(t.length>0)e.removeChild(t[0])}}},{key:"errorHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.media&&(this.media.error||t)){var i=this.media.error||t,n=i.code?c["a"][i.code]:"other",o=i.message;this.media.currentSrc||(o="empty_src",i={code:6,message:o}),this.emit(e,new c["b"](this,{errorType:n,errorCode:i.code,errorMessage:i.message||"",mediaError:i}))}}},{key:"destroy",value:function(){for(var e in this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null,this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){var e=this.media?this.media.play():null;return e}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return!!this.media&&this.media.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.media)return t;e||(e=this.media.buffered);var i=this.media.currentTime;if(e)for(var n=0,o=e.length;n<o;n++)if(t[0]=e.start(n),t[1]=e.end(n),t[0]<=i&&i<=t[1])break;return t[0]-i<=0&&i-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return!!this.media&&this.media.autoplay},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?a["b"].getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var t=this.media.buffered;if(!t||0===t.length)return e;for(var i=0;i<t.length;i++)if((t.start(i)<=this.currentTime||t.start(i)<.1)&&t.end(i)>=this.currentTime)return{start:t.start(i),end:t.end(i)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?void 0!==this.media.currentTime?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return!!this.media&&this.media.defaultMuted},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.media&&this.media.ended}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){var e=this.media.error;if(!e)return"";var t=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return t[this.media.error.code-1]}},{key:"loop",get:function(){return!!this.media&&this.media.loop},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return!!this.media&&this.media.muted},set:function(e){this.media&&this.media.muted!==e&&(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return!this.media||this.media.paused}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){this.media&&e!==1/0&&(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return!!this.media&&this.media.preload},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return!!this.media&&this.media.seekable}},{key:"seeking",get:function(){return!!this.media&&this.media.seeking}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){this.media&&(this.emit(l["URL_CHANGE"],e),this.emit(l["WAITING"]),this._currentTime=0,this._duration=0,/^blob/.test(this.media.currentSrc)||/^blob/.test(this.media.src)?this.onWaiting():(this._detachSourceEvents(this.media),"Array"===a["b"].typeOf(e)?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()))}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e!==1/0&&this.media&&(this.media.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,t){for(var o,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];(o=Object(n["f"])(Object(n["g"])(i.prototype),"emit",this)).call.apply(o,[this,e,t].concat(a))}},{key:"on",value:function(e,t){for(var o,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];(o=Object(n["f"])(Object(n["g"])(i.prototype),"on",this)).call.apply(o,[this,e,t].concat(a))}},{key:"once",value:function(e,t){for(var o,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];(o=Object(n["f"])(Object(n["g"])(i.prototype),"once",this)).call.apply(o,[this,e,t].concat(a))}},{key:"off",value:function(e,t){for(var o,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];(o=Object(n["f"])(Object(n["g"])(i.prototype),"off",this)).call.apply(o,[this,e,t].concat(a))}},{key:"offAll",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"removeAllListeners",this).call(this)}}]),i}(r.a),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};Object(n["b"])(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}return Object(n["c"])(e,[{key:"openDB",value:function(e){var t=this,i=this,n=this.myDB.version||1,o=i.indexedDB.open(i.myDB.name,n);o.onerror=function(e){},o.onsuccess=function(n){t.myDB.db=n.target.result,e.call(i)},o.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(i.myDB.ojstore.name)||t.createObjectStore(i.myDB.ojstore.name,{keyPath:i.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var e=this;e.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var i,n=this.myDB.db.transaction(e,"readwrite").objectStore(e),o=0;o<t.length;o++)i=n.add(t[o]),i.onerror=function(){},i.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var i,n=this.myDB.db.transaction(e,"readwrite").objectStore(e),o=0;o<t.length;o++)i=n.put(t[o]),i.onerror=function(){},i.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,i){var n=this,o=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=o.get(t);r.onerror=function(){i.call(n,null)},r.onsuccess=function(e){var t=e.target.result;i.call(n,t)}}},{key:"deleteData",value:function(e,t){var i=this.myDB.db.transaction(e,"readwrite").objectStore(e);i.delete(t)}},{key:"clearData",value:function(e){var t=this.myDB.db.transaction(e,"readwrite").objectStore(e);t.clear()}}]),e}(),p=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],g=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],v=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],y="data-xgplayerid",m=i("dc4a"),b=i("2a75"),k=function(){function e(){var t=this;if(Object(n["b"])(this,e),Object(n["e"])(this,"__trigger",(function(e){var i=(new Date).getTime();t.timeStamp=i;for(var n=0;n<e.length;n++)t.__runHandler(e[n].target)})),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver(Object(a["d"])(this.__trigger,100,{trailing:!0})),this.timeStamp=(new Date).getTime()}catch(i){}}return Object(n["c"])(e,[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var i=e.getAttribute(y),n=this.__handlers,o=-1,r=0;r<n.length;r++)n[r]&&e===n[r].target&&(o=r);o>-1?this.__handlers[o].handler=t:this.__handlers.push({target:e,handler:t,playerId:i})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map((function(i,n){e===i.target&&(t=n)}));try{this.observer&&this.observer.unobserve(e)}catch(i){}this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,i=0;i<t.length;i++)if(t[i]&&e===t[i].target){try{t[i].handler(e)}catch(n){}return!0}return!1}}]),e}(),C=null;function _(e,t){return C||(C=new k),C.addObserver(e,t),C}function O(e,t){C.unObserver(e,t)}var T={pluginGroup:{},init:function(e){var t=e._pluginInfoId;t||(t=(new Date).getTime(),e._pluginInfoId=t),!e.config.closeResizeObserver&&_(e.root,(function(){e.resize()})),0===Object.keys(this.pluginGroup).length&&(e.isUserActive=!0),this.pluginGroup[t]={_player:e,_originalOptions:e.config||{},_plugins:{}}},checkPlayerRoot:function(e){if(this.pluginGroup){for(var t=Object.keys(this.pluginGroup),i=0;i<t.length;i++){var n=this.pluginGroup[t[i]]._player;if(n.root===e)return n}return null}return null},formatPluginInfo:function(e,t){var i=null,n=null;return e.plugin&&"function"===typeof e.plugin?(i=e.plugin,n=e.options):(i=e,n={}),t&&(n.config=t||{}),{PLUFGIN:i,options:n}},checkPluginIfExits:function(e,t){for(var i=0;i<t.length;i++)if(e.toLowerCase()===t[i].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(e,t){for(var i=Object.keys(t),n=null,o=0;o<i.length;o++)if(e.toLowerCase()===i[o].toLowerCase()){n=t[i[o]];break}return"Object"===a["b"].typeOf(n)?{root:n.root,position:n.position}:{}},lazyRegister:function(e,t){var i=this,n=t.timeout||1500;return Promise.race([t.loader().then((function(t){var n;n=t&&t.__esModule?t.default:t,i.register(e,n,t.options)})),new Promise((function(e,t){setTimeout((function(){t(new Error("timeout"))}),n)}))])},register:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"===typeof t&&void 0!==t.prototype){var n=e._pluginInfoId;if(n&&this.pluginGroup[n]){this.pluginGroup[n]._plugins||(this.pluginGroup[n]._plugins={});var o=this.pluginGroup[n]._plugins,r=this.pluginGroup[n]._originalOptions;i.player=this.pluginGroup[n]._player;var s=i.pluginName||t.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(!t.isSupported||t.isSupported(e.config.mediaType,e.config.codecType)){i.config||(i.config={});for(var c=Object.keys(r),l=0;l<c.length;l++)if(s.toLowerCase()===c[l].toLowerCase()){var u=r[c[l]];"Object"===a["b"].typeOf(u)?i.config=Object.assign({},i.config,r[c[l]]):"Boolean"===a["b"].typeOf(u)&&(i.config.disable=!u);break}t.defaultConfig&&Object.keys(t.defaultConfig).forEach((function(e){"undefined"===typeof i.config[e]&&(i.config[e]=t.defaultConfig[e])})),i.root?"string"===typeof i.root&&(i.root=e[i.root]):i.root=e.root,i.index=i.config.index||0;try{o[s.toLowerCase()]&&this.unRegister(n,s.toLowerCase());var h=new t(i);return o[s.toLowerCase()]=h,o[s.toLowerCase()].func=t,h&&"function"===typeof h.afterCreate&&h.afterCreate(),h}catch(d){throw d}}}}},unRegister:function(e,t){e._pluginInfoId&&(e=e._pluginInfoId),t=t.toLowerCase();try{var i=this.pluginGroup[e]._plugins[t];i&&(i.pluginName&&i.__destroy(),delete this.pluginGroup[e]._plugins[t])}catch(n){}},deletePlugin:function(e,t){var i=e._pluginInfoId;i&&this.pluginGroup[i]&&this.pluginGroup[i]._plugins&&delete this.pluginGroup[i]._plugins[t]},getPlugins:function(e){var t=e._pluginInfoId;return t&&this.pluginGroup[t]?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){var i=e._pluginInfoId;if(!i||!this.pluginGroup[i])return null;var n=t.toLowerCase();return this.pluginGroup[i]._plugins[n]},beforeInit:function(e){var t=this;function i(e){return e&&e.then?e:new Promise((function(e){e()}))}return new Promise((function(n){var o;if(t.pluginGroup)return o=e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve(),o.then((function(){var o=e._pluginInfoId;if(t.pluginGroup[o]){var r=t.pluginGroup[o]._plugins,a=[];Object.keys(r).forEach((function(e){if(r[e]&&r[e].beforePlayerInit)try{var t=r[e].beforePlayerInit();a.push(i(t))}catch(n){throw a.push(i(null)),n}})),Promise.all([].concat(a)).then((function(){n()})).catch((function(e){n()}))}else n()}))}))},afterInit:function(e){var t=e._pluginInfoId;if(t&&this.pluginGroup[t]){var i=this.pluginGroup[t]._plugins;Object.keys(i).forEach((function(e){i[e]&&i[e].afterPlayerInit&&i[e].afterPlayerInit()}))}},setLang:function(e,t){var i=t._pluginInfoId;if(i&&this.pluginGroup[i]){var n=this.pluginGroup[i]._plugins;Object.keys(n).forEach((function(t){if(n[t].updateLang)n[t].updateLang(e);else try{n[t].lang=e}catch(i){}}))}},reRender:function(e){var t=this,i=e._pluginInfoId;if(i&&this.pluginGroup[i]){var n=[],o=this.pluginGroup[i]._plugins;Object.keys(o).forEach((function(e){"controls"!==e&&o[e]&&(n.push({plugin:o[e].func,options:o[e].__args}),t.unRegister(i,e))})),n.forEach((function(i){t.register(e,i.plugin,i.options)}))}},onPluginsReady:function(e){var t=e._pluginInfoId;if(t&&this.pluginGroup[t]){var i=this.pluginGroup[t]._plugins||{};Object.keys(i).forEach((function(e){i[e].onPluginsReady&&"function"===typeof i[e].onPluginsReady&&i[e].onPluginsReady()}))}},setCurrentUserActive:function(e,t){if(this.pluginGroup[e]){if(!t)return this.pluginGroup[e]._player.isUserActive=t,e;for(var i=Object.keys(this.pluginGroup),n=0;n<i.length;n++){var o=this.pluginGroup[i[n]];o&&o._player&&(this.pluginGroup[i[n]]._player.isUserActive=!1)}return this.pluginGroup[e]._player.isUserActive=t,e}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var e=Object.keys(this.pluginGroup),t=0;t<e.length;t++){var i=this.pluginGroup[e[t]];if(i&&i._player&&i._player.isUserActive)return e[t]}return null}},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){O(e.root);for(var i=this.pluginGroup[t]._plugins,n=0,o=Object.keys(i);n<o.length;n++){var r=o[n];this.unRegister(t,r)}var a=e.isUseActive;if(delete this.pluginGroup[t],delete e._pluginInfoId,a){var s=Object.keys(this.pluginGroup);s.length>0&&this.setCurrentUserActive(s[s.length-1],!0)}}}},E=i("b39b");function w(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:Object(a["c"])(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var S=function(e,t){var i,o,r;r=t.preset&&t.options?new t.preset(t.options,e.config):new t({},e.config);var a=r,s=a.plugins,c=void 0===s?[]:s,l=a.ignores,u=void 0===l?[]:l,h=a.icons,d=void 0===h?{}:h,f=a.i18n,p=void 0===f?[]:f;e.config.plugins||(e.config.plugins=[]),e.config.ignores||(e.config.ignores=[]),(i=e.config.plugins).push.apply(i,Object(n["k"])(c)),(o=e.config.ignores).push.apply(o,Object(n["k"])(u)),Object.keys(d).map((function(t){e.config.icons[t]||(e.config.icons[t]=d[t])}));var g=e.config.i18n||[];p.push.apply(p,Object(n["k"])(g)),e.config.i18n=p},x=i("2535"),A=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e;Object(n["b"])(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),Object(n["e"])(Object(n["a"])(e),"onMouseEnter",(function(t){var i=Object(n["a"])(e),o=i.player,r=i.playerConfig;r.closeControlsBlur&&o.focus({autoHide:!1})})),Object(n["e"])(Object(n["a"])(e),"onMouseLeave",(function(){var t=Object(n["a"])(e),i=t.player;i.focus()})),e}return Object(n["c"])(i,[{key:"beforeCreate",value:function(e){e.config.mode||"mobile"!==s["a"].device||(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,t=this.config,i=t.disable,n=t.height,o=t.mode;if(!i){"flex"===o&&this.player.addClass(E["a"].FLEX_CONTROLS);var r={height:"".concat(n,"px")};Object.keys(r).map((function(t){e.root.style[t]=r[t]})),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(l["MINI_STATE_CHANGE"],(function(t){t?a["b"].addClass(e.root,"mini-controls"):a["b"].removeClass(e.root,"mini-controls")}));var c=this.playerConfig.isMobileSimulateMode;"mobile"!==s["a"].device&&"mobile"!==c&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&a["b"].addClass(this.root,E["a"].CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){a["b"].removeClass(this.root,E["a"].CONTROLS_AUTOHIDE)}},{key:"show",value:function(){a["b"].addClass(this.root,"show")}},{key:"hide",value:function(){a["b"].removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(this.root){var r=e.defaultConfig||{};if(!t.root){var a=t.position?t.position:t.config&&t.config.position?t.config.position:r.position;switch(a){case m["a"].CONTROLS_LEFT:t.root=this.left;break;case m["a"].CONTROLS_RIGHT:t.root=this.right;break;case m["a"].CONTROLS_CENTER:t.root=this.center;break;case m["a"].CONTROLS:t.root=this.root;break;default:t.root=this.left}return Object(n["f"])(Object(n["g"])(i.prototype),"registerPlugin",this).call(this,e,t,o)}}}},{key:"destroy",value:function(){"mobile"!==s["a"].device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,t=e.mode,i=e.autoHide,o=e.initShow,r=e.disable;if(!r){var s=a["b"].classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===t},{"bottom-controls":"bottom"===t},Object(n["e"])({},E["a"].CONTROLS_AUTOHIDE,i),{"xgplayer-controls-initshow":o||!i});return'<xg-controls class="'.concat(s,'" unselectable="on">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),i}(m["b"]),P=i("d2c7"),I=i("5e99"),L=i("301b"),j=i("a45c"),R=["play","pause","replay","retry"],D=0,N=0,M=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;Object(n["b"])(this,i);var r=a["b"].deepMerge(w(),e);o=t.call(this,r),Object(n["e"])(Object(n["a"])(o),"canPlayFunc",(function(){if(o.config){var e=o.config,t=e.autoplay,i=e.startTime,n=e.defaultPlaybackRate;P["b"].logInfo("player","canPlayFunc, startTime",i),i&&(o.currentTime=i>o.duration?o.duration:i,o.config.startTime=0),o.playbackRate=n,(t||o._useAutoplay)&&o.mediaPlay(),o.off(l["CANPLAY"],o.canPlayFunc),o.removeClass(E["a"].ENTER)}})),Object(n["e"])(Object(n["a"])(o),"onFullscreenChange",(function(e,t){var i=function(){a["b"].setTimeout(Object(n["a"])(o),(function(){o.resize()}),100)},r=a["b"].getFullScreenEl();o._fullActionFrom?o._fullActionFrom="":o.emit(l["USER_ACTION"],{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:o.currentTime,duration:o.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var s=Object(a["a"])(r,o.playerId,y);if(t||r&&(r===o._fullscreenEl||s))i(),!o.config.closeFocusVideoFocus&&o.media.focus(),o.fullscreen=!0,o.changeFullStyle(o.root,r,E["a"].FULLSCREEN),o.emit(l["FULLSCREEN_CHANGE"],!0,o._fullScreenOffset),o.cssfullscreen&&o.exitCssFullscreen();else if(o.fullscreen){i();var c=Object(n["a"])(o),u=c._fullScreenOffset,h=c.config;h.needFullscreenScroll?(window.scrollTo(u.left,u.top),a["b"].setTimeout(Object(n["a"])(o),(function(){o.fullscreen=!1,o._fullScreenOffset=null}),100)):(!o.config.closeFocusVideoFocus&&o.media.focus(),o.fullscreen=!1,o._fullScreenOffset=null),o.cssfullscreen?o.removeClass(E["a"].FULLSCREEN):o.recoverFullStyle(o.root,o._fullscreenEl,E["a"].FULLSCREEN),o._fullscreenEl=null,o.emit(l["FULLSCREEN_CHANGE"],!1)}})),Object(n["e"])(Object(n["a"])(o),"_onWebkitbeginfullscreen",(function(e){o._fullscreenEl=o.media,o.onFullscreenChange(e,!0)})),Object(n["e"])(Object(n["a"])(o),"_onWebkitendfullscreen",(function(e){o.onFullscreenChange(e,!1)})),Object(x["a"])(Object(n["a"])(o),R),o.config=r,o._pluginInfoId=a["b"].generateSessionId(),Object(P["a"])(Object(n["a"])(o));var c=o.constructor.defaultPreset;if(o.config.presets.length){var u=o.config.presets.indexOf("default");u>=0&&c&&(o.config.presets[u]=c)}else c&&o.config.presets.push(c);o.userTimer=null,o.waitTimer=null,o._state=j["a"].INITIAL,o.isError=!1,o._hasStart=!1,o.isSeeking=!1,o.isCanplay=!1,o._useAutoplay=!1,o.rotateDeg=0,o.isActive=!1,o.fullscreen=!1,o.cssfullscreen=!1,o.isRotateFullscreen=!1,o._fullscreenEl=null,o._cssfullscreenEl=null,o.curDefinition=null,o._orgCss="",o._fullScreenOffset=null,o._videoHeight=0,o._videoWidth=0,o._accPlayed={t:0,acc:0,loopAcc:0},o.innerContainer=null,o.controls=null,o.topBar=null,o.root=null,o.__i18n=I["a"].init(o._pluginInfoId),s["a"].os.isAndroid&&s["a"].osVersion>0&&s["a"].osVersion<6&&(o.config.autoplay=!1),o.database=new f,o.isUserActive=!1,o._onceSeekCanplay=null,o._isPauseBeforeSeek=0;var h=o._initDOM();if(!h)return Object(n["j"])(o);var d=o.config,p=d.definition,g=void 0===p?{}:p,v=d.url;if(!v&&g.list&&g.list.length>0){var m=g.list.find((function(e){return e.definition&&e.definition===g.defaultDefinition}));m||(g.defaultDefinition=g.list[0].definition,m=g.list[0]),o.config.url=m.url,o.curDefinition=m}return o._bindEvents(),o._registerPresets(),o._registerPlugins(),T.onPluginsReady(Object(n["a"])(o)),o.getInitDefinition(),o.setState(j["a"].READY),a["b"].setTimeout(Object(n["a"])(o),(function(){o.emit(l["READY"])}),0),o.onReady&&o.onReady(),(o.config.videoInit||o.config.autoplay)&&(!o.hasStart||o.state<j["a"].ATTACHED)&&o.start(),o}return Object(n["c"])(i,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var t=this.config.el;if(!t||1!==t.nodeType)return this.emit(l["ERROR"],new c["b"]("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),!1;this.root=t}var i=T.checkPlayerRoot(this.root);i&&(P["b"].logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),i.destroy()),this.root.setAttribute(y,this.playerId),T.init(this),this._initBaseDoms();var n=this.constructor.XgVideoProxy;if(n&&this.mediaConfig.mediaType===n.mediaType){var o=this.innerContainer||this.root;this.detachVideoEvents(this.media);var r=new n(o,this.config,this.mediaConfig);this.attachVideoEvents(r),this.media=r}if(this.media.setAttribute(y,this.playerId),this.config.controls){var a=this.config.controls.root||null,u=T.register(this,A,{root:a});this.controls=u}var h="mobile"===this.config.isMobileSimulateMode?"mobile":s["a"].device;if(this.addClass("".concat(E["a"].DEFAULT," ").concat(E["a"].INACTIVE," xgplayer-").concat(h," ").concat(this.config.controls?"":E["a"].NO_CONTROLS)),this.config.autoplay?this.addClass(E["a"].ENTER):this.addClass(E["a"].NO_START),this.config.fluid){var d=this.config,f=d.width,p=d.height;"number"===typeof f&&"number"===typeof p||(f=600,p=337.5);var g={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(100*p/f,"%")};Object.keys(g).forEach((function(t){e.root.style[t]=g[t]}))}else["width","height"].forEach((function(t){e.config[t]&&("number"!==typeof e.config[t]?e.root.style[t]=e.config[t]:e.root.style[t]="".concat(e.config[t],"px"))}));return!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=a["b"].createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach((function(t){e.on(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])})),p.forEach((function(t){document&&document.addEventListener(t,e.onFullscreenChange)})),s["a"].os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(l["LOADED_DATA"],this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(l["PLAY"],this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),p.forEach((function(t){document.removeEventListener(t,e.onFullscreenChange)})),this.playFunc&&this.off(l["PLAY"],this.playFunc),this.off(l["CANPLAY"],this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_startInit",value:function(e){var t=this;if(this.media&&(e&&""!==e&&("Array"!==a["b"].typeOf(e)||0!==e.length)||(e="",this.emit(l["URL_NULL"]),P["b"].logWarn("config.url is null, please get url and run player._startInit(url)"),!this.config.nullUrlStart))){this._detachSourceEvents(this.media),"Array"===a["b"].typeOf(e)&&e.length>0?this._attachSourceEvents(this.media,e):this.media.src&&this.media.src===e?e||this.media.removeAttribute("src"):this.media.src=e,"Number"===a["b"].typeOf(this.config.volume)&&(this.volume=this.config.volume);var i=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!i.contains(this.media)&&i.insertBefore(this.media,i.firstChild);var n=this.media.readyState;P["b"].logInfo("_startInit readyState",n),this.config.autoplay&&(!/^blob/.test(this.media.currentSrc)&&!/^blob/.test(this.media.src)&&this.load(),(s["a"].os.isIpad||s["a"].os.isPhone)&&this.mediaPlay()),n>=2?this.canPlayFunc():this.once(l["CANPLAY"],this.canPlayFunc),(!this.hasStart||this.state<j["a"].ATTACHED)&&T.afterInit(this),this.hasStart=!0,this.setState(j["a"].ATTACHED),a["b"].setTimeout(this,(function(){t.emit(l["COMPLETE"])}),0)}}},{key:"_registerPlugins",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._loadingPlugins=[];var i=this.config.ignores||[],n=this.config.plugins||[],o=this.config.i18n||[];t&&I["a"].extend(o,this.__i18n);var r=i.join("||").toLowerCase().split("||"),a=this.plugins;n.forEach((function(i){try{var n=i.plugin?i.plugin.pluginName:i.pluginName;if(n&&r.indexOf(n.toLowerCase())>-1)return null;if(!t&&a[n.toLowerCase()])return;if(i.lazy&&i.loader){var o=T.lazyRegister(e,i);return void(i.forceBeforeInit&&(o.then((function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(o),1)})).catch((function(t){P["b"].logError("_registerPlugins:loadingPlugin",t),e._loadingPlugins.splice(e._loadingPlugins.indexOf(o),1)})),e._loadingPlugins.push(o)))}return e.registerPlugin(i)}catch(s){P["b"].logError("_registerPlugins:",s)}}))}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach((function(t){S(e,t)}))}},{key:"_getRootByPosition",value:function(e){var t=null;switch(e){case m["a"].ROOT_RIGHT:this.rightBar||(this.rightBar=a["b"].createPositionBar("xg-right-bar",this.root)),t=this.rightBar;break;case m["a"].ROOT_LEFT:this.leftBar||(this.leftBar=a["b"].createPositionBar("xg-left-bar",this.root)),t=this.leftBar;break;case m["a"].ROOT_TOP:this.topBar||(this.topBar=a["b"].createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&a["b"].addClass(this.topBar,E["a"].TOP_BAR_AUTOHIDE)),t=this.topBar;break;default:t=this.innerContainer||this.root;break}return t}},{key:"registerPlugin",value:function(e,t){var i=T.formatPluginInfo(e,t),n=i.PLUFGIN,o=i.options,r=this.config.plugins,a=T.checkPluginIfExits(n.pluginName,r);!a&&r.push(n);var s=T.getRootByConfig(n.pluginName,this.config);s.root&&(o.root=s.root),s.position&&(o.position=s.position);var c=o.position?o.position:o.config&&o.config.position||n.defaultConfig&&n.defaultConfig.position;return!o.root&&"string"===typeof c&&c.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(n,o,n.pluginName):(o.root||(o.root=this._getRootByPosition(c)),T.register(this,n,o))}},{key:"deregister",value:function(e){"string"===typeof e?T.unRegister(this,e):e instanceof b["a"]&&T.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.deregister(e),t&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var t;if("string"===typeof e?t=e:e instanceof b["a"]&&(t=e.pluginName),t)for(var i=this.config.plugins.length-1;i>-1;i--){var n=this.config.plugins[i];if(n.pluginName.toLowerCase()===t.toLowerCase()){this.config.plugins.splice(i,1);break}}}},{key:"plugins",get:function(){return T.getPlugins(this)}},{key:"getPlugin",value:function(e){var t=T.findPlugin(this,e);return t&&t.pluginName?t:null}},{key:"addClass",value:function(e){this.root&&(a["b"].hasClass(this.root,e)||a["b"].addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&a["b"].removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return a["b"].hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(e){var t=this;if(!(this.state>j["a"].ATTACHING))return e||this.config.url||this.getInitDefinition(),this.hasStart=!0,this.setState(j["a"].ATTACHING),this._registerPlugins(!1),T.beforeInit(this).then((function(){if(t.config){e||(e=t.url||t.config.url);var i=t._startInit(e);return i}})).catch((function(e){throw e.fileName="player",e.lineNumber="236",P["b"].logError("start:beforeInit:",e),e}))}},{key:"switchURL",value:function(e,t){var i=this,n=e;"Object"===a["b"].typeOf(e)&&(n=e.url);var o=this.currentTime,r=this.paused&&!this.isError;return this.src=n,new Promise((function(e){var t=function(){i.currentTime=o,r&&i.once("canplay",(function(){i.pause()})),e()};s["a"].os.isAndroid?i.once("timeupdate",(function(){t()})):i.once("canplay",(function(){t()})),i.play()}))}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<j["a"].ATTACHED)return this.removeClass(E["a"].NO_START),this.addClass(E["a"].ENTER),this.start(),void(this._useAutoplay=!0);this.state<j["a"].RUNNING&&(this.removeClass(E["a"].NO_START),!this.isCanplay&&this.addClass(E["a"].ENTER));var t=Object(n["f"])(Object(n["g"])(i.prototype),"play",this).call(this);return void 0!==t&&t&&t.then?t.then((function(){e.removeClass(E["a"].NOT_ALLOW_AUTOPLAY),e.addClass(E["a"].PLAYING),e.state<j["a"].RUNNING&&(P["b"].logInfo(">>>>playPromise.then"),e.setState(j["a"].RUNNING),e.emit(l["AUTOPLAY_STARTED"]))})).catch((function(t){if(P["b"].logWarn(">>>>playPromise.catch",t.name),e.media&&e.media.error)return e.onError(),void e.removeClass(E["a"].ENTER);"NotAllowedError"===t.name&&(e._errorTimer=a["b"].setTimeout(e,(function(){e._errorTimer=null,e.emit(l["AUTOPLAY_PREVENTED"]),e.addClass(E["a"].NOT_ALLOW_AUTOPLAY),e.removeClass(E["a"].ENTER),e.pause(),e.setState(j["a"].NOTALLOW)}),0))})):(P["b"].logWarn("video.play not return promise"),this.state<j["a"].RUNNING&&(this.setState(j["a"].RUNNING),this.removeClass(E["a"].NOT_ALLOW_AUTOPLAY),this.removeClass(E["a"].NO_START),this.removeClass(E["a"].ENTER),this.addClass(E["a"].PLAYING),this.emit(l["AUTOPLAY_STARTED"]))),t}},{key:"mediaPause",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(E["a"].PAUSED),Object(x["f"])(this,"play",(function(){return e.mediaPlay()}))}},{key:"pause",value:function(){var e=this;Object(x["f"])(this,"pause",(function(){Object(n["f"])(Object(n["g"])(i.prototype),"pause",e).call(e)}))}},{key:"seek",value:function(e,t){var i=this;if(this.media&&!Number.isNaN(Number(e)||!this.hasStart)){var n=this.config,o=n.isSeekedPlay,r=n.seekedStatus,a=t||(o?"play":r);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,!this._isPauseBeforeSeek&&(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(l["CANPLAY"],this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(i.removeClass(E["a"].ENTER),i.isSeeking=!1,a){case"play":i.play();break;case"pause":i.pause();break;default:i._isPauseBeforeSeek>1||i.paused?i.pause():i.play()}i._isPauseBeforeSeek=0,i._onceSeekCanplay=null},this.once(l["CANPLAY"],this._onceSeekCanplay),this.state<j["a"].RUNNING?(this.removeClass(E["a"].NO_START),this.addClass(E["a"].ENTER),this.currentTime=e,this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,t=this.config,i=t.definition,n=t.url;!n&&i&&i.list&&i.list.length>0&&i.defaultDefinition&&i.list.map((function(t){t.definition===i.defaultDefinition&&(e.config.url=t.url,e.curDefinition=t)}))}},{key:"changeDefinition",value:function(e,t){var i=this,o=this.config.definition;if(Array.isArray(null===o||void 0===o?void 0:o.list)&&o.list.forEach((function(t){(null===e||void 0===e?void 0:e.definition)===t.definition&&(i.curDefinition=t)})),null!==e&&void 0!==e&&e.bitrate&&"number"!==typeof e.bitrate&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(l["DEFINITION_CHANGE"],{from:t,to:e}),this.hasStart){var r=this.switchURL(e.url,Object(n["i"])({seamless:!1!==o.seamless&&"undefined"!==typeof MediaSource&&"function"===typeof MediaSource.isTypeSupported},e));r&&r.then?r.then((function(){i.emit(l["AFTER_DEFINITION_CHANGE"],{from:t,to:e})})):this.emit(l["AFTER_DEFINITION_CHANGE"],{from:t,to:e})}else this.config.url=e.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(l["LOADED_DATA"],this.reloadFunc)}},{key:"resetState",value:function(){var e=this,t=E["a"].NOT_ALLOW_AUTOPLAY,i=E["a"].PLAYING,n=E["a"].NO_START,o=E["a"].PAUSED,r=E["a"].REPLAY,a=E["a"].ENTER,s=E["a"].ENDED,c=E["a"].ERROR,u=E["a"].LOADING,h=[t,i,n,o,r,a,s,c,u];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,h.forEach((function(t){e.removeClass(t)})),this.addClass(E["a"].ENTER),this.emit(l["RESET"])}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0;this.resetState();var n=this.plugins;if(n&&(t.map((function(t){e.deregister(t)})),i)){var o=w();Object.keys(this.config).keys((function(t){"undefined"===e.config[t]||"plugins"!==t&&"presets"!==t&&"el"!==t&&"id"!==t||(e.config[t]=o[t])}))}}},{key:"destroy",value:function(){var e=this,t=this.innerContainer,o=this.root,r=this.media;if(o&&r){if(this.hasStart=!1,this._useAutoplay=!1,o.removeAttribute(y),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),a["b"].clearAllTimers(this),this.emit(l["DESTROY"]),T.destroy(this),Object(x["b"])(this),Object(n["f"])(Object(n["g"])(i.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),t)for(var s=t.children,c=0;c<s.length;c++)t.removeChild(s[c]);!t&&r instanceof window.Node&&o.contains(r)&&o.removeChild(r),["topBar","leftBar","rightBar","innerContainer"].map((function(t){e[t]&&o.removeChild(e[t]),e[t]=null}));var u=o.className.split(" ");u.length>0?o.className=u.filter((function(e){return e.indexOf("xgplayer")<0})).join(" "):o.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach((function(t){e[t]=!1}))}}},{key:"replay",value:function(){var e=this;this.removeClass(E["a"].ENDED),this.currentTime=0,this.isSeeking=!1,Object(x["f"])(this,"replay",(function(){e.once(l["CANPLAY"],(function(){var t=e.mediaPlay();t&&t.catch&&t.catch((function(e){}))})),e.play(),e.emit(l["REPLAY"]),e.onPlay()}))}},{key:"retry",value:function(){var e=this;this.removeClass(E["a"].ERROR),this.addClass(E["a"].LOADING),Object(x["f"])(this,"retry",(function(){var t=e.currentTime;e.src=e.config.url,!e.config.isLive&&(e.currentTime=t),e.once(l["CANPLAY"],(function(){e.mediaPlay()}))}))}},{key:"changeFullStyle",value:function(e,t,i,n){e&&(n||(n=E["a"].PARENT_FULLSCREEN),this._orgCss||(this._orgCss=a["b"].filterStyleFromText(e)),a["b"].addClass(e,i),t&&t!==e&&!this._orgPCss&&(this._orgPCss=a["b"].filterStyleFromText(t),a["b"].addClass(t,n),t.setAttribute(y,this.playerId)))}},{key:"recoverFullStyle",value:function(e,t,i,n){n||(n=E["a"].PARENT_FULLSCREEN),this._orgCss&&(a["b"].setStyleFromCsstext(e,this._orgCss),this._orgCss=""),a["b"].removeClass(e,i),t&&t!==e&&this._orgPCss&&(a["b"].setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",a["b"].removeClass(t,n),t.removeAttribute(y))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,i=this.media;e||(e=t),this._fullScreenOffset={top:a["b"].scrollTop(),left:a["b"].scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var n=a["b"].getFullScreenEl();if(n!==this._fullscreenEl)try{for(var o=0;o<g.length;o++){var r=g[o];if(e[r]){var s="webkitRequestFullscreen"===r?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[r]();return s&&s.then?s:Promise.resolve()}}return i.fullscreenEnabled||i.webkitSupportsFullscreen?(i.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(c){return Promise.reject(new Error("call getFullscreen fail"))}else this.onFullscreenChange()}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),this._fullscreenEl||a["b"].getFullScreenEl()){this.root;var t=this.media;this._fullActionFrom="exit";try{for(var i=0;i<v.length;i++){var n=v[i];if(document[n]){var o=document[n]();return o&&o.then?o:Promise.resolve()}}return t&&t.webkitSupportsFullscreen?(t.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(r){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var t=e?"".concat(E["a"].INNER_FULLSCREEN," ").concat(E["a"].CSS_FULLSCREEN):E["a"].CSS_FULLSCREEN;this.changeFullStyle(this.root,e,t);var i=this.config.fullscreen,n=void 0===i?{}:i,o=!0===n.useCssFullscreen||"function"===typeof n.useCssFullscreen&&n.useCssFullscreen();o&&(this.fullscreen=!0,this.emit(l["FULLSCREEN_CHANGE"],!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(l["CSS_FULLSCREEN_CHANGE"],!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(E["a"].INNER_FULLSCREEN," ").concat(E["a"].CSS_FULLSCREEN):E["a"].CSS_FULLSCREEN;if(this.fullscreen){var t=this.config.fullscreen,i=void 0===t?{}:t,n=!0===i.useCssFullscreen||"function"===typeof i.useCssFullscreen&&i.useCssFullscreen();n?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(l["FULLSCREEN_CHANGE"],!1)):this.removeClass(e)}else this.recoverFullStyle(this.root,this._cssfullscreenEl,e);this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(l["CSS_FULLSCREEN_CHANGE"],!1)}},{key:"getRotateFullscreen",value:function(e){this.cssfullscreen&&this.exitCssFullscreen(e);var t=e?"".concat(E["a"].INNER_FULLSCREEN," ").concat(E["a"].ROTATE_FULLSCREEN):E["a"].ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,t,E["a"].PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this.emit(l["FULLSCREEN_CHANGE"],!0)}},{key:"exitRotateFullscreen",value:function(e){var t=this._fullscreenEl!==this.root?"".concat(E["a"].INNER_FULLSCREEN," ").concat(E["a"].ROTATE_FULLSCREEN):E["a"].ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,t,E["a"].PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(l["FULLSCREEN_CHANGE"],!1)}},{key:"setRotateDeg",value:function(e){90===window.orientation||-90===window.orientation?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};this.isActive?this.onFocus(e):this.emit(l["PLAYER_FOCUS"],Object(n["i"])({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?this.emit(l["PLAYER_BLUR"],Object(n["i"])({paused:this.paused,ended:this.ended},e)):this.onBlur(e)}},{key:"onFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.autoHide,n=void 0===i?!this.config.closePlayerBlur:i,o=t.delay,r=void 0===o?this.config.inactive:o;this.isActive=!0,this.removeClass(E["a"].INACTIVE),this.userTimer&&(a["b"].clearTimeout(this,this.userTimer),this.userTimer=null),n?this.userTimer=a["b"].setTimeout(this,(function(){e.userTimer=null,e.blur()}),r):this.userTimer&&(a["b"].clearTimeout(this,this.userTimer),this.userTimer=null)}},{key:"onBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignorePaused,i=void 0!==t&&t;if(this.isActive){var n=this.config.closePauseVideoFocus;this.isActive=!1,(i||n||!this.paused&&!this.ended)&&this.addClass(E["a"].INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(E["a"].ENTER),this.removeClass(E["a"].ERROR),this.removeClass(E["a"].LOADING),this.isCanplay=!0,this.waitTimer&&a["b"].clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){this.isError=!1,this.isSeeking=!1}},{key:"onLoadstart",value:function(){this.removeClass(E["a"].ERROR),this.isCanplay=!1}},{key:"onPlay",value:function(){this.state===j["a"].ENDED&&this.setState(j["a"].RUNNING),this.removeClass(E["a"].PAUSED),this.ended&&this.removeClass(E["a"].ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(E["a"].PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(a["b"].clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(E["a"].ENDED),this.setState(j["a"].ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(E["a"].NOT_ALLOW_AUTOPLAY),this.removeClass(E["a"].NO_START),this.removeClass(E["a"].ENTER),this.removeClass(E["a"].LOADING),this.addClass(E["a"].ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(E["a"].SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&a["b"].clearTimeout(this,this.waitTimer),this.removeClass(E["a"].LOADING),this.removeClass(E["a"].SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&a["b"].clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=a["b"].setTimeout(this,(function(){e.addClass(E["a"].LOADING),a["b"].clearTimeout(e,e.waitTimer),e.waitTimer=null}),200)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1;var t=E["a"].NO_START,i=E["a"].PAUSED,n=E["a"].ENDED,o=E["a"].ERROR,r=E["a"].REPLAY,a=E["a"].LOADING,s=[t,i,n,o,r,a];s.forEach((function(t){e.removeClass(t)}))}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.resize(),(this.waitTimer||this.hasClass(E["a"].LOADING))&&this.media.readyState>2&&(this.removeClass(E["a"].LOADING),a["b"].clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state<j["a"].RUNNING&&this.duration&&(this.setState(j["a"].RUNNING),this.emit(l["AUTOPLAY_STARTED"])),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===a["b"].typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,t,i){if(this.media&&t&&e){var o="String"===a["b"].typeOf(e)?e:e.type||"";i.props&&"Array"!==a["b"].typeOf(i.props)&&(i.props=[i.props]),this.emit(l["USER_ACTION"],Object(n["i"])({eventType:o,action:t,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},i))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var t=(new Date).getTime()-this._accPlayed.t;this._accPlayed.acc+=t,this._accPlayed.t=0,("ended"===e||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var t=this.media.buffered;if(!t||0===t.length||!this.duration)return!0;for(var i=e||this.media.currentTime||.2,n=t.length,o=0;o<n;o++)if(t.start(o)<=i&&t.end(o)>i)return!0;return!1}},{key:"position",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.media&&e&&e.h){var t=1/e.h,i=1!==t?"scale(".concat(t,")"):"",n=0,o=0;e.y&&(o=(100-100*e.h)/2-100*e.y),e.w&&e.x&&(n=(100-100*e.w)/2-100*e.x),i+=" translate(".concat(n,"%, ").concat(o,"%)"),this.media.style.transform=i,this.media.style.webkitTransform=i}}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).map((function(i){if("plugins"!==i){t.config[i]=e[i];var n=t.plugins[i.toLowerCase()];n&&"Function"===a["b"].typeOf(n.setConfig)&&n.setConfig(e[i])}}))}},{key:"playNext",value:function(e){var t=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,Object(x["f"])(this,"playnext",(function(){t.start(),t.emit(l["PLAYNEXT"],e)}))}},{key:"resize",value:function(){var e=this;if(this.media){var t=this.media,i=t.videoWidth,n=t.videoHeight,o=this.config,r=o.fitVideoSize,a=o.videoFillMode;if("fill"!==a&&"cover"!==a||this.setAttribute("data-xgfill",a),n&&i){this._videoHeight=n,this._videoWidth=i;var s=this.root.getBoundingClientRect(),c=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,u=s.width,h=s.height-c,d=parseInt(i/n*1e3,10),f=parseInt(u/h*1e3,10),p=u,g=h,v={};"auto"===r&&f>d||"fixWidth"===r?(g=u/d*1e3,this.config.fluid?v.paddingTop="".concat(100*g/p,"%"):v.height="".concat(g+c,"px")):("auto"===r&&f<d||"fixHeight"===r)&&(p=d*h/1e3,v.width="".concat(p,"px")),this.fullscreen||this.cssfullscreen||Object.keys(v).forEach((function(t){e.root.style[t]=v[t]})),("fillHeight"===a&&f<d||"fillWidth"===a&&f>d)&&this.setAttribute("data-xgfill","cover");var y={videoScale:d,vWidth:p,vHeight:g,cWidth:p,cHeight:g+c};this.emit(l["VIDEO_RESIZE"],y)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.media.updateObjectPosition?this.media.updateObjectPosition(e,t):this.media.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"setState",value:function(e){P["b"].logInfo("setState","state from:".concat(j["b"][this.state]," to:").concat(j["b"][e])),this._state=e}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"===typeof e&&(this._hasStart=e,!1===e&&this.setState(j["a"].READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===j["a"].RUNNING||this._state===j["a"].ENDED},set:function(e){e?this.setState(j["a"].RUNNING):this._state>=j["a"].RUNNING&&this.setState(j["a"].ATTACHED)}},{key:"definitionList",get:function(){return this.config&&this.config.definition&&this.config.definition.list||[]},set:function(e){var t=this,i=this.config.definition,n=null,o=null;i.list=e,this.emit("resourceReady",e),e.forEach((function(e){var r;(null===(r=t.curDefinition)||void 0===r?void 0:r.definition)===e.definition&&(n=e),i.defaultDefinition===e.definition&&(o=e)})),!o&&e.length>0&&(o=e[0]),n?this.changeDefinition(n):o&&this.changeDefinition(o)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var t=this.media.getVideoPlaybackQuality();return e.dropped=t.droppedVideoFrames||0,e.total=t.totalVideoFrames||0,e.corrupted=t.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){var t=I["a"].langKeys.filter((function(t){return t===e}));0===t.length&&"zh"!==e||(this.config.lang=e,T.setLang(e,this))}},{key:"i18n",get:function(){var e=this.config.lang;return"zh"===e&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return L["a"]}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return Object(n["f"])(Object(n["g"])(i.prototype),"readyState",this)}},{key:"error",get:function(){var e=Object(n["f"])(Object(n["g"])(i.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return Object(n["f"])(Object(n["g"])(i.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"avgSpeed",get:function(){return N},set:function(e){N=e}},{key:"realTimeSpeed",get:function(){return D},set:function(e){D=e}},{key:"hook",value:function(e,t){return x["c"].call.apply(x["c"],[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return x["g"].call.apply(x["g"],[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){return x["d"].call.apply(x["d"],[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,i){for(var n=arguments.length,o=new Array(n>3?n-3:0),r=3;r<n;r++)o[r-3]=arguments[r];return x["h"].call.apply(x["h"],[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,t,i){for(var n=arguments.length,o=new Array(n>3?n-3:0),r=3;r<n;r++)o[r-3]=arguments[r];return x["e"].call.apply(x["e"],[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,t){"boolean"===typeof t&&t!==this.muted&&(this.addInnerOP("volumechange"),this.muted=t),T.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return P["b"].config.debug},set:function(e){P["b"].config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return T.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,t){T.setCurrentUserActive(e,t)}},{key:"isHevcSupported",value:function(){return s["a"].isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return s["a"].probeConfigSupported(e)}},{key:"install",value:function(e,t){i.plugins||(i.plugins={}),i.plugins[e]||(i.plugins[e]=t)}},{key:"use",value:function(e,t){i.plugins||(i.plugins={}),i.plugins[e]=t}}]),i}(d);Object(n["e"])(M,"defaultPreset",null),Object(n["e"])(M,"XgVideoProxy",null)},"5e99":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("0210"),o=i("9a98"),r={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}},a={lang:{},langKeys:[],textKeys:[]};function s(e,t){return Object.keys(t).forEach((function(i){var r,a=o["b"].typeOf(t[i]),c=o["b"].typeOf(e[i]);"Array"===a?("Array"!==c&&(e[i]=[]),(r=e[i]).push.apply(r,Object(n["k"])(t[i]))):"Object"===a?("Object"!==c&&(e[i]={}),s(e[i],t[i])):e[i]=t[i]})),e}function c(){Object.keys(a.lang.en).map((function(e){a.textKeys[e]=e}))}function l(e,t){var i=[];if(t||(t=a),t.lang){i="Array"!==o["b"].typeOf(e)?Object.keys(e).map((function(t){var i="zh"===t?"zh-cn":t;return{LANG:i,TEXT:e[t]}})):e;var n=t,r=n.lang;i.map((function(e){"zh"===e.LANG&&(e.LANG="zh-cn"),r[e.LANG]?s(r[e.LANG]||{},e.TEXT||{}):u(e,t)})),c()}}function u(e,t){var i=e.LANG;if(t||(t=a),t.lang){var n=e.TEXT||{};"zh"===i&&(i="zh-cn"),t.lang[i]?s(t.lang[i],n):(t.langKeys.push(i),t.lang[i]=n),c()}}function h(e){var t,i={lang:{},langKeys:[],textKeys:{},pId:e};return s(i.lang,a.lang),(t=i.langKeys).push.apply(t,Object(n["k"])(a.langKeys)),s(i.textKeys,a.textKeys),i}u(r);var d={get textKeys(){return a.textKeys},get langKeys(){return a.langKeys},get lang(){var e={};return a.langKeys.map((function(t){e[t]=a.lang[t]})),a.lang["zh-cn"]&&(e.zh=a.lang["zh-cn"]||{}),e},extend:l,use:u,init:h}},"674d":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}}},"8c50":function(e,t,i){var n=i("94d8");function o(e,t,i,n,o){var r=a.apply(this,arguments);return e.addEventListener(i,r,o),{destroy:function(){e.removeEventListener(i,r,o)}}}function r(e,t,i,n,r){return"function"===typeof e.addEventListener?o.apply(null,arguments):"function"===typeof i?o.bind(null,document).apply(null,arguments):("string"===typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return o(e,t,i,n,r)})))}function a(e,t,i,o){return function(i){i.delegateTarget=n(i.target,t),i.delegateTarget&&o.call(e,i)}}e.exports=r},"94d8":function(e,t){var i=9;if("undefined"!==typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}function o(e,t){while(e&&e.nodeType!==i){if("function"===typeof e.matches&&e.matches(t))return e;e=e.parentNode}}e.exports=o},"9a98":function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return h})),i.d(t,"d",(function(){return u}));var n=i("0210"),o=i("d2c7"),r=function(){function e(t){Object(n["b"])(this,e),this.bufferedList=t}return Object(n["c"])(e,[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}]),e}(),a={};function s(e,t){for(var i=0,n=t.length;i<n;i++)if(e.indexOf(t[i])>-1)return!0;return!1}function c(e){var t=Object(n["l"])(e);return null!==e&&("object"===t||"function"===t)}function l(e,t,i){var n,o,r,a,s,l,u=0,h=!1,d=!1,f=!0,p=!t&&0!==t&&"function"===typeof window.requestAnimationFrame;if("function"!==typeof e)throw new TypeError("Expected a function");function g(t){var i=n,r=o;return n=o=void 0,u=t,a=e.apply(r,i),a}function v(e,t){return p?(window.cancelAnimationFrame(s),window.requestAnimationFrame(e)):setTimeout(e,t)}function y(e){if(p)return window.cancelAnimationFrame(e);clearTimeout(e)}function m(e){return u=e,s=v(C,t),h?g(e):a}function b(e){var i=e-l,n=e-u,o=t-i;return d?Math.min(o,r-n):o}function k(e){var i=e-l,n=e-u;return void 0===l||i>=t||i<0||d&&n>=r}function C(){var e=Date.now();if(k(e))return _(e);s=v(C,b(e))}function _(e){return s=void 0,f&&n?g(e):(n=o=void 0,a)}function O(){void 0!==s&&y(s),u=0,n=l=o=s=void 0}function T(){return void 0===s?a:_(Date.now())}function E(){return void 0!==s}function w(){for(var e=Date.now(),i=k(e),r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];if(n=c,o=this,l=e,i){if(void 0===s)return m(l);if(d)return s=v(C,t),g(l)}return void 0===s&&(s=v(C,t)),a}return t=+t||0,c(i)&&(h=!!i.leading,d="maxWait"in i,r=d?Math.max(+i.maxWait||0,t):r,f="trailing"in i?!!i.trailing:f),w.cancel=O,w.flush=T,w.pending=E,w}function u(e,t,i){var n=!0,o=!0;if("function"!==typeof e)throw new TypeError("Expected a function");return c(i)&&(n="leading"in i?!!i.leading:n,o="trailing"in i?!!i.trailing:o),l(e,t,{leading:n,trailing:o,maxWait:t})}function h(){var e=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return"zh-cn"===e&&(e="zh"),e}function d(e,t,i){if(e){var n=e.getAttribute(i);return!(!n||n!==t||"VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)}}a.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=document.createElement(e);return o.className=n,o.innerHTML=t,Object.keys(i).forEach((function(t){var n=t,r=i[t];"video"===e||"audio"===e||"live-video"===e?r&&o.setAttribute(n,r):o.setAttribute(n,r)})),o},a.createDomFromHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var n=document.createElement("div");n.innerHTML=e;var r=n.children;return n=null,r.length>0?(r=r[0],i&&a.addClass(r,i),t&&Object.keys(t).forEach((function(e){r.setAttribute(e,t[e])})),r):null}catch(s){return o["b"].logError("util.createDomFromHtml",s),null}},a.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(o){var i=e.className&&"object"===Object(n["l"])(e.className)?e.getAttribute("class"):e.className;return i&&!!i.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},a.addClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)}))}catch(i){a.hasClass(e,t)||(e.className&&"object"===Object(n["l"])(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t)}},a.removeClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.remove(t)}))}catch(i){a.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===Object(n["l"])(e.className)?e.setAttribute("class",e.getAttribute("class").replace(i," ")):e.className=e.className.replace(i," ")}))}},a.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach((function(t){a.hasClass(e,t)?a.removeClass(e,t):a.addClass(e,t)}))},a.classNames=function(){for(var e=arguments,t=[],i=function(i){"String"===a.typeOf(e[i])?t.push(e[i]):"Object"===a.typeOf(e[i])&&Object.keys(e[i]).map((function(n){e[i][n]&&t.push(n)}))},n=0;n<arguments.length;n++)i(n);return t.join(" ")},a.findDom=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,i=arguments.length>1?arguments[1]:void 0;try{e=t.querySelector(i)}catch(n){o["b"].logError("util.findDom",n),0===i.indexOf("#")&&(e=t.getElementById(i.slice(1)))}return e},a.getCss=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},a.padStart=function(e,t,i){var n=String(i),o=t>>0,r=Math.ceil(o/n.length),a=[],s=String(e);while(r--)a.push(n);return a.join("").substring(0,o-s.length)+s},a.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=a.padStart(Math.floor(e/3600),2,0),i=a.padStart(Math.floor((e-3600*t)/60),2,0),n=a.padStart(Math.floor(e-3600*t-60*i),2,0);return("00"===t?[i,n]:[t,i,n]).join(":")},a.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},a.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},a.deepCopy=function(e,t){if("Object"===a.typeOf(t)&&"Object"===a.typeOf(e))return Object.keys(t).forEach((function(i){"Object"!==a.typeOf(t[i])||t[i]instanceof Node?"Array"===a.typeOf(t[i])?e[i]="Array"===a.typeOf(e[i])?e[i].concat(t[i]):t[i]:e[i]=t[i]:void 0===e[i]||void 0===e[i]?e[i]=t[i]:a.deepCopy(e[i],t[i])})),e},a.deepMerge=function(e,t){return Object.keys(t).map((function(i){var o;"Array"===a.typeOf(t[i])&&"Array"===a.typeOf(e[i])?"Array"===a.typeOf(e[i])&&(o=e[i]).push.apply(o,Object(n["k"])(t[i])):a.typeOf(e[i])!==a.typeOf(t[i])||null===e[i]||"Object"!==a.typeOf(e[i])||t[i]instanceof window.Node?null!==t[i]&&(e[i]=t[i]):a.deepMerge(e[i],t[i])})),e},a.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var i=document.createElement("a");return i.href=t.replace(/url\("|"\)/g,""),i.href},a.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},a.setInterval=function(e,t,i,n){e._interval[t]||(e._interval[t]=window.setInterval(i.bind(e),n))},a.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},a.setTimeout=function(e,t,i){e._timers||(e._timers=[]);var n=setTimeout((function(){t(),a.clearTimeout(e,n)}),i);return e._timers.push(n),n},a.clearTimeout=function(e,t){var i=e._timers;if("Array"===a.typeOf(i)){for(var n=0;n<i.length;n++)if(i[n]===t){i.splice(n,1),clearTimeout(t);break}}else clearTimeout(t)},a.clearAllTimers=function(e){var t=e._timers;"Array"===a.typeOf(t)&&(t.map((function(e){clearTimeout(e)})),e._timerIds=[])},a.createImgBtn=function(e,t,i,n){var o,r,s,c=a.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));(c.style.backgroundImage='url("'.concat(t,'")'),i&&n)&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(i.indexOf(e)>-1&&n.indexOf(e)>-1)||(o=parseFloat(i.slice(0,i.indexOf(e)).trim()),r=parseFloat(n.slice(0,n.indexOf(e)).trim()),s=e,!1)})),c.style.width="".concat(o).concat(s),c.style.height="".concat(r).concat(s),c.style.backgroundSize="".concat(o).concat(s," ").concat(r).concat(s),c.style.margin="start"===e?"-".concat(r/2).concat(s," auto auto -").concat(o/2).concat(s):"auto 5px auto 5px");return c},a.Hex2RGBA=function(e,t){var i=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var n="#";e.replace(/[0-9A-F]/gi,(function(e){n+=e+e})),e=n}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,(function(e){i.push(parseInt(e,16))})),"rgba(".concat(i.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},a.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},a.checkIsFunction=function(e){return e&&"function"===typeof e},a.checkIsObject=function(e){return null!==e&&"object"===Object(n["l"])(e)},a.hide=function(e){e.style.display="none"},a.show=function(e,t){e.style.display=t||"block"},a.isUndefined=function(e){if("undefined"===typeof e||null===e)return!0},a.isNotNull=function(e){return!(void 0===e||null===e)},a.setStyleFromCsstext=function(e,t){if(t)if("String"===a.typeOf(t)){var i=t.replace(/\s+/g,"").split(";");i.map((function(t){if(t){var i=t.split(":");i.length>1&&(e.style[i[0]]=i[1])}}))}else Object.keys(t).map((function(i){e.style[i]=t[i]}))},a.filterStyleFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],i=e.style.cssText;if(!i)return{};var n=i.replace(/\s+/g,"").split(";"),o={},r={};return n.map((function(e){if(e){var i=e.split(":");i.length>1&&(s(i[0],t)?o[i[0]]=i[1]:r[i[0]]=i[1])}})),e.setAttribute("style",""),Object.keys(r).map((function(t){e.style[t]=r[t]})),o},a.getStyleFromCsstext=function(e){var t=e.style.cssText;if(!t)return{};var i=t.replace(/\s+/g,"").split(";"),n={};return i.map((function(e){if(e){var t=e.split(":");t.length>1&&(n[t[0]]=t[1])}})),n},a.preloadImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){var n=new window.Image;n.onload=function(e){n=null,t&&t(e)},n.onerror=function(e){n=null,i&&i(e)},n.src=e}},a.stopPropagation=function(e){e&&(e.stopPropagation(),e.cancelable&&e.preventDefault())},a.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},a.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},a.checkTouchSupport=function(){return"ontouchstart"in window},a.getBuffered2=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=[],n=0;n<e.length;n++)i.push({start:e.start(n)<.5?0:e.start(n),end:e.end(n)});i.sort((function(e,t){var i=e.start-t.start;return i||t.end-e.end}));var o=[];if(t)for(var a=0;a<i.length;a++){var s=o.length;if(s){var c=o[s-1].end;i[a].start-c<t?i[a].end>c&&(o[s-1].end=i[a].end):o.push(i[a])}else o.push(i[a])}else o=i;return new r(o)},a.getEventPos=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.touches&&e.touches.length>0&&(e=e.touches[0]),{x:e.x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},a.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},a.getHostFromUrl=function(e){if("String"!==a.typeOf(e))return"";var t=e.split("/"),i="";return t.length>3&&t[2]&&(i=t[2]),i},a.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)},a.isMSE=function(e){return!!(e&&e instanceof HTMLMediaElement)&&(/^blob/.test(e.currentSrc)||/^blob/.test(e.src))},a.generateSessionId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(new Date).getTime();try{e=parseInt(e)}catch(n){e=0}t+=e,window.performance&&"function"===typeof window.performance.now&&(t+=parseInt(window.performance.now()));var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)}));return i},a.createEvent=function(e){var t;return"function"===typeof window.Event?t=new Event(e):(t=document.createEvent("Event"),t.initEvent(e,!0,!0)),t},a.adjustTimeByDuration=function(e,t,i){return t&&e&&(e>t||i&&e<t)?t:e},a.createPositionBar=function(e,t){var i=a.createDom("xg-bar","",{"data-index":-1},e);return t.appendChild(i),i}},a45c:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return o}));var n={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},o=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"]},aeb1:function(e,t,i){var n,o,r;(function(i,a){o=[],n=a,r="function"===typeof n?n.apply(t,o):n,void 0===r||(e.exports=r)})(0,(function(){return function e(t,i,n){var o,r,a=window,s="application/octet-stream",c=n||s,l=t,u=!i&&!n&&l,h=document.createElement("a"),d=function(e){return String(e)},f=a.Blob||a.MozBlob||a.WebKitBlob||d,p=i||"download";if(f=f.call?f.bind(a):Blob,"true"===String(this)&&(l=[l,c],c=l[0],l=l[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],h.href=u,-1!==h.href.indexOf(u))){var g=new XMLHttpRequest;return g.open("GET",u,!0),g.responseType="blob",g.onload=function(t){e(t.target.response,p,s)},setTimeout((function(){g.send()}),0),g}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&f!==d))return navigator.msSaveBlob?navigator.msSaveBlob(b(l),p):k(l);l=b(l),c=l.type||s}else if(/([\x80-\xff])/.test(l)){var v=0,y=new Uint8Array(l.length),m=y.length;for(v;v<m;++v)y[v]=l.charCodeAt(v);l=new f([y],{type:c})}function b(e){var t=e.split(/[:;,]/),i=t[1],n="base64"==t[2]?atob:decodeURIComponent,o=n(t.pop()),r=o.length,a=0,s=new Uint8Array(r);for(a;a<r;++a)s[a]=o.charCodeAt(a);return new f([s],{type:i})}function k(e,t){if("download"in h)return h.href=e,h.setAttribute("download",p),h.className="download-js-link",h.innerHTML="downloading...",h.style.display="none",document.body.appendChild(h),setTimeout((function(){h.click(),document.body.removeChild(h),!0===t&&setTimeout((function(){a.URL.revokeObjectURL(h.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var i=document.createElement("iframe");document.body.appendChild(i),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),i.src=e,setTimeout((function(){document.body.removeChild(i)}),333)}if(o=l instanceof f?l:new f([l],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(o,p);if(a.URL)k(a.URL.createObjectURL(o),!0);else{if("string"===typeof o||o.constructor===d)try{return k("data:"+c+";base64,"+a.btoa(o))}catch(C){return k("data:"+c+","+encodeURIComponent(o))}r=new FileReader,r.onload=function(e){k(this.result)},r.readAsDataURL(o)}return!0}}))},b28d:function(e,t,i){"use strict";i.r(t),i.d(t,"ABORT",(function(){return O})),i.d(t,"AFTER_DEFINITION_CHANGE",(function(){return B})),i.d(t,"AUTOPLAY_PREVENTED",(function(){return P})),i.d(t,"AUTOPLAY_STARTED",(function(){return A})),i.d(t,"BEFORE_DEFINITION_CHANGE",(function(){return U})),i.d(t,"BUFFER_CHANGE",(function(){return T})),i.d(t,"CANPLAY",(function(){return d})),i.d(t,"CANPLAY_THROUGH",(function(){return f})),i.d(t,"COMPLETE",(function(){return I})),i.d(t,"CSS_FULLSCREEN_CHANGE",(function(){return M})),i.d(t,"DEFINITION_CHANGE",(function(){return H})),i.d(t,"DESTROY",(function(){return j})),i.d(t,"DOWNLOAD_SPEED_CHANGE",(function(){return D})),i.d(t,"DURATION_CHANGE",(function(){return p})),i.d(t,"EMPTIED",(function(){return k})),i.d(t,"ENDED",(function(){return r})),i.d(t,"ERROR",(function(){return s})),i.d(t,"FPS_STUCK",(function(){return ie})),i.d(t,"FULLSCREEN_CHANGE",(function(){return N})),i.d(t,"LOADED_DATA",(function(){return v})),i.d(t,"LOAD_START",(function(){return b})),i.d(t,"MINI_STATE_CHANGE",(function(){return F})),i.d(t,"PAUSE",(function(){return a})),i.d(t,"PIP_CHANGE",(function(){return Y})),i.d(t,"PLAY",(function(){return n})),i.d(t,"PLAYER_BLUR",(function(){return w})),i.d(t,"PLAYER_FOCUS",(function(){return E})),i.d(t,"PLAYING",(function(){return o})),i.d(t,"PLAYNEXT",(function(){return X})),i.d(t,"PROGRESS",(function(){return m})),i.d(t,"RATE_CHANGE",(function(){return y})),i.d(t,"READY",(function(){return S})),i.d(t,"REPLAY",(function(){return L})),i.d(t,"RESET",(function(){return $})),i.d(t,"RETRY",(function(){return V})),i.d(t,"ROTATE",(function(){return K})),i.d(t,"SCREEN_SHOT",(function(){return z})),i.d(t,"SEEKED",(function(){return l})),i.d(t,"SEEKING",(function(){return c})),i.d(t,"SEI_PARSED",(function(){return G})),i.d(t,"SHORTCUT",(function(){return q})),i.d(t,"STALLED",(function(){return C})),i.d(t,"STATS_EVENTS",(function(){return te})),i.d(t,"SUSPEND",(function(){return _})),i.d(t,"SWITCH_SUBTITLE",(function(){return Q})),i.d(t,"TIME_UPDATE",(function(){return u})),i.d(t,"URL_CHANGE",(function(){return R})),i.d(t,"URL_NULL",(function(){return x})),i.d(t,"USER_ACTION",(function(){return J})),i.d(t,"VIDEO_EVENTS",(function(){return ee})),i.d(t,"VIDEO_RESIZE",(function(){return W})),i.d(t,"VOLUME_CHANGE",(function(){return g})),i.d(t,"WAITING",(function(){return h})),i.d(t,"XGLOG",(function(){return Z}));var n="play",o="playing",r="ended",a="pause",s="error",c="seeking",l="seeked",u="timeupdate",h="waiting",d="canplay",f="canplaythrough",p="durationchange",g="volumechange",v="loadeddata",y="ratechange",m="progress",b="loadstart",k="emptied",C="stalled",_="suspend",O="abort",T="bufferedChange",E="focus",w="blur",S="ready",x="urlNull",A="autoplay_started",P="autoplay_was_prevented",I="complete",L="replay",j="destroy",R="urlchange",D="download_speed_change",N="fullscreen_change",M="cssFullscreen_change",F="mini_state_change",H="definition_change",U="before_definition_change",B="after_definition_change",G="SEI_PARSED",V="retry",W="video_resize",Y="pip_change",K="rotate",z="screenShot",X="playnext",q="shortcut",Z="xglog",J="user_action",$="reset",Q="switch_subtitle",ee=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],te={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},ie="fps_stuck"},b39b:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"}},b857:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},o=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],r={get device(){var e=r.os;return e.isPc?"pc":"mobile"},get browser(){if("undefined"===typeof navigator)return"";var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(i){return t[i].test(e)})))[0]},get os(){if("undefined"===typeof navigator)return{};var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),i=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),r=/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e),a=/(?:iPhone)/.test(e)&&!r,s=!a&&!n&&!i&&!r,c=/(?:iPad|PlayBook)/.test(e);return{isTablet:r,isPhone:a,isIpad:c,isIos:a||c,isAndroid:n,isPc:s,isSymbian:i,isWindowsPhone:t,isFireFox:o}},get osVersion(){if("undefined"===typeof navigator)return 0;var e=navigator.userAgent,t="";t=/(?:iPhone)|(?:iPad|PlayBook)/.test(e)?n.ios:n.android;var i=t?t.exec(e):[];if(i&&i.length>=3){var o=i[2].split(".");return o.length>0?parseInt(o[0]):0}return 0},get isWeixin(){if("undefined"===typeof navigator)return!1;var e=/(micromessenger)\/([\d.]+)/,t=e.exec(navigator.userAgent.toLocaleLowerCase());return!!t},isSupportMP4:function(){var e={isSupport:!1,mime:""};if("undefined"===typeof document)return e;if(this.supportResult)return this.supportResult;var t=document.createElement("video");return"function"===typeof t.canPlayType&&o.map((function(i){"probably"===t.canPlayType('video/mp4; codecs="'.concat(i,'"'))&&(e.isSupport=!0,e.mime+="||".concat(i))})),this.supportResult=e,t=null,e},isHevcSupported:function(){return!("undefined"===typeof MediaSource||!MediaSource.isTypeSupported)&&(MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))},probeConfigSupported:function(e){var t={supported:!1,smooth:!1,powerEfficient:!1};if(!e||"undefined"===typeof navigator)return Promise.resolve(t);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(e);var i=e.video||{},n=e.audio||{};try{var o=MediaSource.isTypeSupported(i.contentType),r=MediaSource.isTypeSupported(n.contentType);return Promise.resolve({supported:o&&r,smooth:!1,powerEfficient:!1})}catch(a){return Promise.resolve(t)}}}},b908:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("0210"),o=i("476e"),r=i("dc4a"),a=i("2a75"),s=i("b28d"),c=i("b39b"),l=i("5e99"),u=i("2bdd"),h=i("b857"),d=i("9a98"),f=i("ea87"),p=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i)}(o["a"]);Object(n["e"])(p,"defaultPreset",f["a"]),Object(n["e"])(p,"Util",d["b"]),Object(n["e"])(p,"Sniffer",h["a"]),Object(n["e"])(p,"Errors",u["b"]),Object(n["e"])(p,"Events",s),Object(n["e"])(p,"Plugin",r["b"]),Object(n["e"])(p,"BasePlugin",a["a"]),Object(n["e"])(p,"I18N",l["a"]),Object(n["e"])(p,"STATE_CLASS",c["a"])},ba10:function(e,t,i){"use strict";var n=Object.prototype.hasOwnProperty,o="~";function r(){}function a(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function s(e,t,i,n,r){if("function"!==typeof i)throw new TypeError("The listener must be a function");var s=new a(i,n||e,r),c=o?o+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function c(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function l(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(o=!1)),l.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},l.prototype.listeners=function(e){var t=o?o+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,a=new Array(r);n<r;n++)a[n]=i[n].fn;return a},l.prototype.listenerCount=function(e){var t=o?o+e:e,i=this._events[t];return i?i.fn?1:i.length:0},l.prototype.emit=function(e,t,i,n,r,a){var s=o?o+e:e;if(!this._events[s])return!1;var c,l,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,n),!0;case 5:return u.fn.call(u.context,t,i,n,r),!0;case 6:return u.fn.call(u.context,t,i,n,r,a),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,i);break;case 4:u[l].fn.call(u[l].context,t,i,n);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},l.prototype.on=function(e,t,i){return s(this,e,t,i,!1)},l.prototype.once=function(e,t,i){return s(this,e,t,i,!0)},l.prototype.removeListener=function(e,t,i,n){var r=o?o+e:e;if(!this._events[r])return this;if(!t)return c(this,r),this;var a=this._events[r];if(a.fn)a.fn!==t||n&&!a.once||i&&a.context!==i||c(this,r);else{for(var s=0,l=[],u=a.length;s<u;s++)(a[s].fn!==t||n&&!a[s].once||i&&a[s].context!==i)&&l.push(a[s]);l.length?this._events[r]=1===l.length?l[0]:l:c(this,r)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&c(this,t)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=o,l.EventEmitter=l,e.exports=l},d2c7:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return a}));var n="undefined"!==typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,o={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},r="%c[xgplayer]",a={config:{debug:n?3:0},logInfo:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];this.config.debug>=3&&(t=console).log.apply(t,[r,o.info,e].concat(n))},logWarn:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];this.config.debug>=1&&(t=console).warn.apply(t,[r,o.warn,e].concat(n))},logError:function(e){var t;if(!(this.config.debug<1)){for(var i=this.config.debug>=2?"trace":"error",n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];(t=console)[i].apply(t,[r,o.error,e].concat(a))}}};function s(e){e.logInfo=a.logInfo.bind(e),e.logWarn=a.logWarn.bind(e),e.logError=a.logError.bind(e)}},dc4a:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return y}));var n=i("0210"),o=i("2a75"),r=i("8c50"),a=i.n(r),s=i("d2c7"),c=i("9a98"),l={CONTROLS:"controls",ROOT:"root"},u={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function h(e){return!!e&&(e.indexOf&&/^(?:http|data:|\/)/.test(e))}function d(e,t){return"object"===Object(n["l"])(e)&&e.class&&"string"===typeof e.class?"".concat(t," ").concat(e.class):t}function f(e,t){return"object"===Object(n["l"])(e)&&e.attr&&"object"===Object(n["l"])(e.attr)&&Object.keys(e.attr).map((function(i){t[i]=e.attr[i]})),t}function p(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=null;if(e instanceof window.Element)return c["b"].addClass(e,i),Object.keys(n).map((function(t){e.setAttribute(t,n[t])})),e;if(h(e)||h(e.url))return n.src=h(e)?e:e.url||"",r=c["b"].createDom(e.tag||"img","",n,"xg-img ".concat(i)),r;if("function"===typeof e)try{return r=e(),r instanceof window.Element?(c["b"].addClass(r,i),Object.keys(n).map((function(e){r.setAttribute(e,n[e])})),r):(s["b"].logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(o,"] is a function mast return an Element Object")),null)}catch(a){return s["b"].logError("Plugin named [".concat(o,"]:createIcon"),a),null}return"string"===typeof e?c["b"].createDomFromHtml(e,n,i):(s["b"].logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(o,"] is invalid")),null)}function g(e,t){var i=t.config.icons||t.playerConfig.icons;Object.keys(e).map((function(n){var o=e[n],r=o&&o.class?o.class:"",a=o&&o.attr?o.attr:{},s=null;i&&i[n]&&(r=d(i[n],r),a=f(i[n],a),s=p(i[n],n,r,a,t.pluginName)),!s&&o&&(s=p(o.icon?o.icon:o,a,r,{},t.pluginName)),t.icons[n]=s}))}function v(e,t){Object.keys(e).map((function(i){Object.defineProperty(t.langText,i,{get:function(){var n=t.lang,o=t.i18n;return o[i]?o[i]:e[i]&&e[i][n]||""}})}))}var y=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])(this,i),e=t.call(this,o),e.__delegates=[],e}return Object(n["c"])(i,[{key:"__init",value:function(e){if(Object(n["f"])(Object(n["g"])(i.prototype),"__init",this).call(this,e),e.root){var t=e.root,o=null;this.icons={},this.root=null,this.parent=null;var r=this.registerIcons()||{};g(r,this),this.langText={};var a=this.registerLanguageTexts()||{};v(a,this);var l="";try{l=this.render()}catch(d){throw s["b"].logError("Plugin:".concat(this.pluginName,":render"),d),new Error("Plugin:".concat(this.pluginName,":render:").concat(d.message))}if(l)o=i.insert(l,t,e.index),o.setAttribute("data-index",e.index);else{if(!e.tag)return;o=c["b"].createDom(e.tag,"",e.attr,e.name),o.setAttribute("data-index",e.index),t.appendChild(o)}this.root=o,this.parent=t;var u=this.config.attr||{},h=this.config.style||{};this.setAttr(u),this.setStyle(h),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var t=this.children();t&&"object"===Object(n["l"])(t)&&Object.keys(t).length>0&&Object.keys(t).map((function(i){var o,r,a=i,s=t[a],l={root:e.root};"function"===typeof s?(o=e.config[a]||{},r=s):"object"===Object(n["l"])(s)&&"function"===typeof s.plugin&&(o=s.options?c["b"].deepCopy(e.config[a]||{},s.options):e.config[a]||{},r=s.plugin),l.config=o,void 0!==o.index&&(l.index=o.index),o.root&&(l.root=o.root),e.registerPlugin(r,l,a)}))}}},{key:"updateLang",value:function(e){function t(e,i){for(var n=0;n<e.children.length;n++)e.children[n].children.length>0?t(e.children[n],i):i(e.children[n])}e||(e=this.lang);var i=this.root,n=this.i18n,o=this.langText;i&&t(i,(function(t){var i=t.getAttribute&&t.getAttribute("lang-key");if(i){var r=n[i.toUpperCase()]||o[i];r&&(t.innerHTML="function"===typeof r?r(e):r)}}))}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=this.i18n||{},n=this.langText;e.setAttribute&&e.setAttribute("lang-key",t);var o=i[t]||n[t]||"";o&&(e.innerHTML=o)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root;var r=Object(n["f"])(Object(n["g"])(i.prototype),"registerPlugin",this).call(this,e,t,o);return this._children.push(r),r}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,n){var o=this;if(arguments.length<3&&"function"===typeof t)Array.isArray(e)?e.forEach((function(e){o.bindEL(e,t)})):this.bindEL(e,t);else{var r=i.delegate.call(this,this.root,e,t,n);this.__delegates=this.__delegates.concat(r)}}},{key:"unbind",value:function(e,t){var i=this;if(arguments.length<3&&"function"===typeof t)Array.isArray(e)?e.forEach((function(e){i.unbindEL(e,t)})):this.unbindEL(e,t);else for(var n="".concat(e,"_").concat(t),o=0;o<this.__delegates.length;o++)if(this.__delegates[o].key===n){this.__delegates[o].destroy(),this.__delegates.splice(o,1);break}}},{key:"setStyle",value:function(e,t){var i=this;if(this.root)return"String"===c["b"].typeOf(e)?this.root.style[e]=t:void("Object"===c["b"].typeOf(e)&&Object.keys(e).map((function(t){i.root.style[t]=e[t]})))}},{key:"setAttr",value:function(e,t){var i=this;if(this.root)return"String"===c["b"].typeOf(e)?this.root.setAttribute(e,t):void("Object"===c["b"].typeOf(e)&&Object.keys(e).map((function(t){i.root.setAttribute(t,e[t])})))}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"===typeof t&&t())}},{key:"bindEL",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"===typeof t&&this.root.addEventListener(e,t,i)}},{key:"unbindEL",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"===typeof t&&this.root.removeEventListener(e,t,i)}},{key:"show",value:function(e){if(this.root){this.root.style.display=void 0!==e?e:"block";var t=window.getComputedStyle(this.root,null),i=t.getPropertyValue("display");return"none"===i?this.root.style.display="block":void 0}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!t||!(t instanceof window.Element))return null;try{return"string"===typeof e?this.find(e).appendChild(t):e.appendChild(t)}catch(i){return s["b"].logError("Plugin:appendChild",i),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,t=this.player;this.__delegates.map((function(e){e.destroy()})),this.__delegates=[],this._children instanceof Array&&(this._children.map((function(e){t.unRegisterPlugin(e.pluginName)})),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),Object(n["f"])(Object(n["g"])(i.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map((function(t){e[t]=null}))}}],[{key:"insert",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.children.length,o=Number(i),r=e instanceof window.Node;if(n){for(var a=0,s=null,c="";a<n;a++){s=t.children[a];var l=Number(s.getAttribute("data-index"));if(l>=o){c="beforebegin";break}l<o&&(c="afterend")}return r?"afterend"===c?t.appendChild(e):t.insertBefore(e,s):s.insertAdjacentHTML(c,e),"afterend"===c?t.children[t.children.length-1]:t.children[a]}return r?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,t,i,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=[];if(e instanceof window.Node&&"function"===typeof n)if(Array.isArray(i))i.forEach((function(i){var s=a()(e,t,i,n,o);s.key="".concat(t,"_").concat(i),r.push(s)}));else{var s=a()(e,t,i,n,o);s.key="".concat(t,"_").concat(i),r.push(s)}return r}},{key:"ROOT_TYPES",get:function(){return l}},{key:"POSITIONS",get:function(){return u}}]),i}(o["a"])},ea87:function(e,t,i){"use strict";i.d(t,"a",(function(){return vt}));var n=i("0210"),o=i("b857"),r=i("9a98"),a=i("b28d"),s=i("d2c7"),c=i("dc4a");function l(){return(new Date).getTime()}var u={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd"},h=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e;Object(n["b"])(this,i);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(n["e"])(Object(n["a"])(e),"_onTimeupdate",(function(){e._state.isTimeUpdate=!0,e._state.autoplayStart&&(s["b"].logInfo("[xgLogger]".concat(e.player.playerId," _onTimeupdate")),e._sendFF("onTimeupdate"))})),Object(n["e"])(Object(n["a"])(e),"_onAutoplayStart",(function(){s["b"].logInfo("[xgLogger]".concat(e.player.playerId," _onAutoplayStart")),e._state.autoplayStart=!0,e.vt&&e._sendFF("onAutoplayStart")})),Object(n["e"])(Object(n["a"])(e),"_onReset",(function(){e._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},e.vt=0,e.pt=0,e.fvt=0,e.newPointTime=l(),e.loadedCostTime=0,e.startCostTime=0,e._isSeeking=!1,e.seekingStart=0,e.waitingStart=0,e.fixedWaitingStart=0,e._isWaiting=!1,e._waitTimer&&r["b"].clearTimeout(Object(n["a"])(e),e._waitTimer),e._waittTimer&&r["b"].clearTimeout(Object(n["a"])(e),e._waittTimer),e._waitTimer=null,e._waittTimer=null,e._waitType=0})),Object(n["e"])(Object(n["a"])(e),"_onSeeking",(function(){e.seekingStart||(e.suspendWaitingStatus("seek"),e.seekingStart=l(),e.emitLog(u.SEEK_START,{start:l()}))})),Object(n["e"])(Object(n["a"])(e),"_onSeeked",(function(){e.suspendSeekingStatus("seeked")})),Object(n["e"])(Object(n["a"])(e),"_onWaitingLoadStart",(function(){e._isWaiting||e.vt||(e._isWaiting=!0,e.waitingStart=l(),e.fixedWaitingStart=l(),e._waitType=1,e.emitLog(u.WAIT_START,{fixedStart:e.fixedWaitingStart,start:e.waitingStart,type:1,endType:"loadstart"}))})),Object(n["e"])(Object(n["a"])(e),"_onWaiting",(function(){!e._isWaiting&&e.vt&&(e._isWaiting=!0,e.vt?e.seekingStart?e._waitType=2:e._waitType=0:e._waitType=1,e.fixedWaitingStart=l(),e._waitTimer=r["b"].setTimeout(Object(n["a"])(e),(function(){e._isWaiting&&(e.waitingStart=l(),r["b"].clearTimeout(Object(n["a"])(e),e._waitTimer),e._waitTimer=null,e._startWaitTimeout(),e.emitLog(u.WAIT_START,{fixedStart:e.fixedWaitingStart,start:e.waitingStart,type:e._waitType,endType:2===e._waitType?"seek":"playing"}))}),200))})),Object(n["e"])(Object(n["a"])(e),"_onError",(function(){e.suspendSeekingStatus("error"),e.suspendWaitingStatus("error")})),Object(n["e"])(Object(n["a"])(e),"_onPlaying",(function(){e._isWaiting&&e.suspendWaitingStatus("playing")})),e}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=l(),this.loadedCostTime=0,this.startCostTime=0,this.on(a["LOAD_START"],(function(){var t=e._state,i=t.autoplayStart,n=t.isFFSend;e.startCostTime=l()-e.newPointTime,s["b"].logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(i," isFFSend:").concat(n," startCostTime:").concat(e.startCostTime," newPointTime").concat(e.newPointTime)),n||(!t.isLs&&e.emitLog(u.LOAD_START,{}),t.isLs=!0,t.isTimeUpdate=!1,t.isFFLoading=!0,e.pt=l(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())})),this.on(a["LOADED_DATA"],(function(){e.vt=l(),e.fvt=e.vt-e.pt,e.loadedCostTime=e.vt-e.newPointTime;var t=e._state,i=t.isTimeUpdate,n=t.isFFSend,o=t.autoplayStart;s["b"].logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate," loadedCostTime:").concat(e.loadedCostTime)),(i||o)&&e._sendFF("loadedData"),n||e.emitLog(u.LOADED_DATA,{}),e.suspendWaitingStatus("loadeddata")})),this.on(a["SEEKING"],this._onSeeking),this.on(a["SEEKED"],this._onSeeked),this.on(a["DESTROY"],(function(){e.endState("destroy")})),this.on(a["URL_CHANGE"],(function(){e.endState("urlChange"),s["b"].logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()})),this.on([a["PLAYING"],a["CANPLAY"]],this._onPlaying),this.on(a["WAITING"],this._onWaiting),this.on(a["ERROR"],this._onError),this.on(a["RESET"],(function(){s["b"].logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()}))}},{key:"_initOnceEvents",value:function(){this.off(a["AUTOPLAY_STARTED"],this._onAutoplayStart),this.off(a["TIME_UPDATE"],this._onTimeupdate),this.once(a["AUTOPLAY_STARTED"],this._onAutoplayStart),this.once(a["TIME_UPDATE"],this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=l();var t=this._state,i=t.isFFLoading,n=t.isFFSend;s["b"].logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(i," !isFFSend:").concat(!n)),this.vt>0&&i&&!n&&(s["b"].logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(u.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&r["b"].clearTimeout(this,this._waittTimer),this._waittTimer=r["b"].setTimeout(this,(function(){e.suspendWaitingStatus("timeout"),r["b"].clearTimeout(e,e._waittTimer),e._waittTimer=null}),this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var t=l(),i=t-this.seekingStart;this.seekingStart=0,this.emitLog(u.SEEK_END,{end:t,costTime:i,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(r["b"].clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(r["b"].clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart){var t=l(),i=t-this.waitingStart,n=t-this.fixedWaitingStart,o=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog(u.WAIT_END,{fixedCostTime:n>o?o:n,costTime:i>o?o:i,type:"loadeddata"===e?1:this._waitType,endType:2===this._waitType?"seek":e})}}},{key:"emitLog",value:function(e,t){var i=this.player;this.emit(a["XGLOG"],Object(n["i"])({t:l(),host:r["b"].getHostFromUrl(i.currentSrc),vtype:i.vtype,eventType:e,currentTime:this.player.currentTime,readyState:i.video.readyState,networkState:i.video.networkState},t))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),i}(c["b"]);function d(){return(new DOMParser).parseFromString('<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">\n  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var f=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i,[{key:"registerIcons",value:function(){return{replay:d}}},{key:"afterCreate",value:function(){var e=this;c["b"].insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",(function(){e.player.replay()}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(a["ENDED"],(function(){if(e.playerConfig.loop||r["b"].addClass(e.player.root,"replay"),!e.config.disable){e.show();var t=e.root.querySelector("path");if(t){var i=window.getComputedStyle(t).getPropertyValue("transform");if("string"===typeof i&&i.indexOf("none")>-1)return null;t.setAttribute("transform",i)}}})),this.on(a["PLAY"],(function(){e.hide()}))}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),r["b"].removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),i}(c["b"]),p=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){r["b"].addClass(this.root,"hide")}},{key:"show",value:function(){r["b"].removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){"string"===typeof e.player.config.poster&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(a["ENDED"],(function(){e.isEndedShow&&r["b"].removeClass(e.root,"hide")})),this.config.hideCanplay?(this.once(a["TIME_UPDATE"],(function(){e.onTimeUpdate()})),this.on(a["URL_CHANGE"],(function(){r["b"].removeClass(e.root,"hide"),r["b"].addClass(e.root,"xg-showplay"),e.once(a["TIME_UPDATE"],(function(){e.onTimeUpdate()}))}))):this.on(a["PLAY"],(function(){r["b"].addClass(e.root,"hide")}))}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?r["b"].removeClass(this.root,"xg-showplay"):this.once(a["TIME_UPDATE"],(function(){e.onTimeUpdate()}))}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,t=e.poster,i=e.hideCanplay,n=t?"background-image:url(".concat(t,");"):"";return'<xg-poster class="xgplayer-poster '.concat(i?"xg-showplay":"",'" style="').concat(n,'">\n    </xg-poster>')}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),i}(c["b"]),g=i("a45c");function v(){return(new DOMParser).parseFromString('<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',"image/svg+xml").firstChild}function y(){return(new DOMParser).parseFromString('<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',"image/svg+xml").firstChild}var m={};function b(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};m[e]&&window.clearTimeout(m[e].id),m[e]={},i.start&&i.start(),m[e].id=window.setTimeout((function(){i.end&&i.end(),window.clearTimeout(m[e].id),delete m[e]}),t)}function k(){Object.keys(m).map((function(e){window.clearTimeout(m[e].id),delete m[e]}))}var C=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;return Object(n["b"])(this,i),o=t.call(this,e),Object(n["e"])(Object(n["a"])(o),"onPlayerReset",(function(){o.autoPlayStart=!1;var e="auto"===o.config.mode?"auto-hide":"hide";o.setAttr("data-state","play"),r["b"].removeClass(o.root,e),o.show()})),Object(n["e"])(Object(n["a"])(o),"onAutoplayStart",(function(){if(!o.autoPlayStart){var e="auto"===o.config.mode?"auto-hide":"hide";r["b"].addClass(o.root,e),o.autoPlayStart=!0,o.onPlayPause("play")}})),o.autoPlayStart=!1,o}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this,t=this.player,i=this.playerConfig;this.initIcons(),this.once(a["READY"],(function(){i&&(i.lang&&"en"===i.lang?r["b"].addClass(t.root,"lang-is-en"):"jp"===i.lang&&r["b"].addClass(t.root,"lang-is-jp"))})),this.on(a["AUTOPLAY_STARTED"],this.onAutoplayStart),i.autoplay||this.show(),this.on(a["AUTOPLAY_PREVENTED"],(function(){var t="auto"===e.config.mode?"auto-hide":"hide";e.setAttr("data-state","play"),r["b"].removeClass(e.root,t),e.show()})),this.on(a["PLAY"],(function(){e.onPlayPause("play")})),this.on(a["PAUSE"],(function(){e.onPlayPause("pause")})),this.on(a["RESET"],(function(){e.onPlayerReset()})),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(t){t.cancelable&&t.preventDefault(),t.stopPropagation();var i=e.player.paused;e.emitUserAction(t,"switch_play_pause",{props:"paused",from:i,to:!i})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:v,class:"xg-icon-play"},startPause:{icon:y,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){r["b"].addClass(this.root,"hide")}},{key:"show",value:function(){r["b"].removeClass(this.root,"hide")}},{key:"focusHide",value:function(){r["b"].addClass(this.root,"focus-hide")}},{key:"recover",value:function(){r["b"].removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var t=this;b("pauseplay",400,{start:function(){r["b"].addClass(t.root,"interact"),t.show(),t.switchStatus(!0)},end:function(){r["b"].removeClass(t.root,"interact"),!e&&t.hide()}})}},{key:"switchPausePlay",value:function(e){var t=this.player;if(e.cancelable&&e.preventDefault(),e.stopPropagation(),!(t.state<g["a"].READY)){var i=this.player.paused;i||t.state!==g["a"].RUNNING?t.play():t.pause()}}},{key:"onPlayPause",value:function(e){var t=this.config,i=this.player;if(i&&!(i.state<g["a"].RUNNING)&&this.autoPlayStart){if("show"===t.mode)return this.switchStatus(),void this.show();if("auto"!==t.mode){if(t.isShowPause&&i.paused&&!i.ended||t.isShowEnd&&i.ended)return this.switchStatus(),void this.show();if(t.disableAnimate)return this.switchStatus(),void this.hide();if("play"===e)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||i.ended)return;this.animate()}}else this.switchStatus()}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),k()}},{key:"render",value:function(){var e=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(e,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),i}(c["b"]),_=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i,[{key:"render",value:function(){var e=this.config.innerHtml,t=r["b"].createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)t.appendChild(e);else if(e&&"string"===typeof e)t.innerHTML=e;else{for(var i="",n=1;n<=12;n++)i+='<div class="xgplayer-enter-bar'.concat(n,'"></div>');t.innerHTML='<div class="xgplayer-enter-spinner">'.concat(i,"</div>")}return t}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),i}(c["b"]);function O(e,t,i){try{return' <div class="xg-tips '.concat(i?"hide":" ",'" lang-key="').concat(e.i18nKeys[t],'">\n    ').concat(e.i18n[t],"\n    </div>")}catch(n){return'<div class="xg-tips hide"></div>'}}var T=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</span></div>\n      </xg-icon>")}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:c["a"].CONTROLS_RIGHT,index:10}}}]),i}(c["b"]),E=i("ba10"),w=i.n(E);function S(e){var t=parseFloat(e),i=-1===e.indexOf("%")&&!Number.isNaN(t);return i&&t}var x=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],A=x.length;function P(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<A;t++){var i=x[t];e[i]=0}return e}function I(e){var t=window.getComputedStyle(e);return t}function L(e){if("string"===typeof e&&(e=document.querySelector(e)),e&&"object"===Object(n["l"])(e)&&e.nodeType){var t=I(e);if("none"===t.display)return P();var i={};i.width=e.offsetWidth,i.height=e.offsetHeight;for(var o=i.isBorderBox="border-box"===t.boxSizing,r=0;r<A;r++){var a=x[r],s=t[a],c=parseFloat(s);i[a]=Number.isNaN(c)?0:c}var l=i.paddingLeft+i.paddingRight,u=i.paddingTop+i.paddingBottom,h=i.marginLeft+i.marginRight,d=i.marginTop+i.marginBottom,f=i.borderLeftWidth+i.borderRightWidth,p=i.borderTopWidth+i.borderBottomWidth,g=o,v=S(t.width);!1!==v&&(i.width=v+(g?0:l+f));var y=S(t.height);return!1!==y&&(i.height=y+(g?0:u+p)),i.innerWidth=i.width-(l+f),i.innerHeight=i.height-(u+p),i.outerWidth=i.width+h,i.outerHeight=i.height+d,i}}function j(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.identifier===t)return n}}var R={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},D={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},N=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n["b"])(this,i),o=t.call(this),o.isEnabled=!0,o.isDragging=!1,o.isDown=!1,o.position={},o.downPoint={},o.dragPoint={x:0,y:0},o.startPos={x:0,y:0},o._root=e instanceof Element?e:document.querySelector(e),o._handlerDom=r.handle instanceof Element?r.handle:document.querySelector(r.handle),o._root&&o._handlerDom?(o._bindStartEvent(),o):Object(n["j"])(o)}return Object(n["c"])(i,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),D[this._startKey].map((function(t){e["on".concat(t)]=e["on".concat(t)].bind(e)}))}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var t=this;if(e){var i=D[this._startKey];i.map((function(e){window.addEventListener(e,t["on".concat(e)])})),this._boundPointerEvents=i}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map((function(t){window.removeEventListener(t,e["on".concat(t)])})),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame((function(){e.animate()})))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var t=e.changedTouches[0];this.dragStart(e,t),this.touchIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var t=j(e.changedTouches,this.touchIdentifier);t&&this.dragMove(e,t)}},{key:"ontouchend",value:function(e){var t=j(e.changedTouches,this.touchIdentifier);t&&this.dragEnd(e,t),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var t=j(e.changedTouches,this.touchIdentifier);t&&this.dragCancel(e,t)}},{key:"dragStart",value:function(e,t){if(this._root&&!this.isDown&&this.isEnabled){this.downPoint=t,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var i=L(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-i.height,this.startPos.maxX=window.innerWidth-i.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,t){this.isDragging=!0,this.animate(),this.emit(R.START,this.startPos)}},{key:"dragEnd",value:function(e,t){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(R.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,t){var i={x:t.pageX-this.downPoint.pageX,y:t.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this.dragRealStart(e,t),i}},{key:"dragMove",value:function(e,t){if(e=e||window.event,this.isDown){var i=this.startPos,n=i.x,o=i.y,r=this._dragPointerMove(e,t),a=r.x,s=r.y;a=this.checkContain("x",a,n),s=this.checkContain("y",s,o),this.position.x=n+a,this.position.y=o+s,this.dragPoint.x=a,this.dragPoint.y=s,this.emit(R.MOVE,this.position)}}},{key:"dragCancel",value:function(e,t){this.dragEnd(e,t)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,t,i){return t+i<0?0-i:"x"===e&&t+i>this.startPos.maxX?this.startPos.maxX-i:"y"===e&&t+i>this.startPos.maxY?this.startPos.maxY-i:t}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),t=this._getPositionCoord(e.left,"width"),i=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(t)?0:t,this.position.y=Number.isNaN(i)?0:i,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var t=e.transform;if(0===t.indexOf("matrix")){var i=t.split(","),n=0===t.indexOf("matrix3d")?12:4,o=parseInt(i[n],10),r=parseInt(i[n+1],10);this.position.x+=o,this.position.y+=r}}},{key:"_getPositionCoord",value:function(e,t){if(-1!==e.indexOf("%")){var i=L(this._root.parentNode);return i?parseFloat(e)/100*i[t]:0}return parseInt(e,10)}}]),i}(w.a),M=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;Object(n["b"])(this,i),o=t.call(this,e),Object(n["e"])(Object(n["a"])(o),"onCancelClick",(function(e){o.exitMini(),o.isClose=!0})),Object(n["e"])(Object(n["a"])(o),"onCenterClick",(function(e){var t=Object(n["a"])(o),i=t.player;i.paused?i.play():i.pause()})),Object(n["e"])(Object(n["a"])(o),"onScroll",(function(e){if(!(!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-o.pos.scrollY)<50)){var t=parseInt(r["b"].getCss(o.player.root,"height"));t+=o.config.scrollTop,o.pos.scrollY=window.scrollY,window.scrollY>t+5?!o.isMini&&!o.isClose&&o.getMini():window.scrollY<=t&&(o.isMini&&o.exitMini(),o.isClose=!1)}})),o.isMini=!1,o.isClose=!1;var a=Object(n["a"])(o),s=a.config;return o.pos={left:s.left<0?window.innerWidth-s.width-20:s.left,top:s.top<0?window.innerHeight-s.height-20:s.top,height:o.config.height,width:o.config.width,scrollY:window.scrollY||0},o.lastStyle=null,o}return Object(n["c"])(i,[{key:"beforeCreate",value:function(e){"boolean"===typeof e.player.config.mini&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(a["PAUSE"],(function(){e.setAttr("data-state","pause")})),this.on(a["PLAY"],(function(){e.setAttr("data-state","play")}))}},{key:"onPluginsReady",value:function(){var e=this,t=this.player,i=this.config;if(!i.disable){if(this.config.isShowIcon){var n={config:{onClick:function(){e.getMini()}}};t.controls.registerPlugin(T,n,T.pluginName)}var o=r["b"].checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",o,this.onCancelClick),this.bind(".play-icon",o,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new N(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:v,class:"xg-icon-play"},pause:{icon:y,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var t=this.player,i=this.playerConfig,n=this.config.target||this.player.root;this.lastStyle={},r["b"].addClass(t.root,"xgplayer-mini"),["width","height","top","left"].map((function(t){e.lastStyle[t]=n.style[t],n.style[t]="".concat(e.pos[t],"px")})),i.fluid&&(n.style["padding-top"]=""),this.emit(a["MINI_STATE_CHANGE"],!0),t.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var t=this.player,i=this.playerConfig,n=this.config.target||this.player.root;r["b"].removeClass(t.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map((function(t){n.style[t]=e.lastStyle[t]})),this.lastStyle=null,i.fluid&&(t.root.style.width="100%",t.root.style.height="0",t.root.style["padding-top"]="".concat(100*i.height/i.width,"%")),this.emit(a["MINI_STATE_CHANGE"],!1),this.isMini=t.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=r["b"].checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      '.concat(O(this,"MINI_DRAG",this.playerConfig.isHideTips),'\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),i}(c["b"]),F=i("2a75"),H=(i("8c50"),i("2535")),U={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},B=["videoClick","videoDbClick"],G=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e;Object(n["b"])(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),Object(n["e"])(Object(n["a"])(e),"onMouseMove",(function(t){var i=Object(n["a"])(e),o=i.player,r=i.playerConfig;o.isActive||(o.focus({autoHide:!r.closeDelayBlur}),!r.closeFocusVideoFocus&&o.media.focus())})),Object(n["e"])(Object(n["a"])(e),"onMouseEnter",(function(t){var i=Object(n["a"])(e),o=i.playerConfig,r=i.player;!o.closeFocusVideoFocus&&r.media.focus(),o.closeDelayBlur?r.focus({autoHide:!1}):r.focus()})),Object(n["e"])(Object(n["a"])(e),"onMouseLeave",(function(t){var i=e.playerConfig,n=i.closePlayerBlur,o=i.leavePlayerTime,r=i.closeDelayBlur;n||r||(o?e.player.focus({autoHide:!0,delay:o}):e.player.blur())})),Object(n["e"])(Object(n["a"])(e),"onVideoClick",(function(t){var i=Object(n["a"])(e),o=i.player,r=i.playerConfig;t.target&&r.closeVideoClick||t.target!==o.root&&t.target!==o.media&&t.target!==o.innerContainer&&t.target!==o.media.__canvas||(t.preventDefault(),r.closeVideoStopPropagation||t.stopPropagation(),e._clickCount++,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),e.clickTimer=setTimeout((function(){e._clickCount&&(e._clickCount--,Object(H["f"])(Object(n["a"])(e),B[0],(function(t,i){e.switchPlayPause(i.e)}),{e:t,paused:o.paused}),clearTimeout(e.clickTimer),e.clickTimer=null)}),300))})),Object(n["e"])(Object(n["a"])(e),"onVideoDblClick",(function(t){var i=Object(n["a"])(e),o=i.player,r=i.playerConfig;r.closeVideoDblclick||!t.target||t.target!==o.media&&t.target!==o.media.__canvas||(!r.closeVideoClick&&e._clickCount<2?e._clickCount=0:(e._clickCount=0,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),t.preventDefault(),t.stopPropagation(),Object(H["f"])(Object(n["a"])(e),B[1],(function(t,i){e.emitUserAction(i.e,"switch_fullscreen",{props:"fullscreen",from:o.fullscreen,to:!o.fullscreen}),o.fullscreen?o.exitFullscreen():o.getFullscreen()}),{e:t,fullscreen:o.fullscreen})))})),e}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,B.map((function(t){e.__hooks[t]=null}));var t=this.playerConfig.isMobileSimulateMode;"mobile"===t||"mobile"===o["a"].device&&!o["a"].os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,t=this.player,i=t.video,n=t.root,o=this.playerConfig.enableContextmenu;n&&n.addEventListener("click",this.onVideoClick,!1),n&&n.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(U).map((function(t){n.addEventListener(t,e[U[t]],!1)})),o&&i&&i.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var t=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:t.paused,to:!t.paused}),t.ended?t.duration!==1/0&&t.duration>0&&t.replay():t.paused?t.play():t.pause()}},{key:"onContextmenu",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,t=this.player,i=t.video,n=t.root;this.clickTimer&&clearTimeout(this.clickTimer),n.removeEventListener("click",this.onVideoClick,!1),n.removeEventListener("dblclick",this.onVideoDblClick,!1),i.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(U).map((function(t){n.removeEventListener(t,e[U[t]],!1)}))}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),i}(F["a"]),V={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},W={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},Y={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function K(e){return e&&e.length>0?e[e.length-1]:null}function z(e){var t=navigator.userAgent;/(?:iPhone|iPad)/.test(t)&&e.cancelable&&e.preventDefault()}function X(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var q=function(){function e(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};Object(n["b"])(this,e),this._pos={moving:!1,start:!1,x:0,y:0},this.config=X(),Object.keys(o).map((function(e){i.config[e]=o[e]})),this.root=t,this.events="mouse"===o.eventType?Y:W,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return Object(n["c"])(e,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(e){var t=this,i=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout((function(){t.trigger(V.PRESS,e),t._pos.press=!0,t.__clearPress()}),i.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(e){var t=this,i=this.config;if(this.dbIntrvalId)return this.__clearDb(),void this.trigger(V.DOUBlE_CLICK,e);this.dbIntrvalId=setTimeout((function(){t.__clearDb(),t._pos.start||t._pos.press||t._pos.moving||t.trigger(V.CLICK,e)}),i.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(e,t){this.__handlers[e]||(this.__handlers[e]=[]),this.__handlers[e].push(t)}},{key:"off",value:function(e,t){if(this.__handlers[e]){for(var i=this.__handlers[e],n=-1,o=0;o<i.length;o++)if(i[o]===t){n=o;break}n>=0&&this.__handlers[e].splice(n,1)}}},{key:"trigger",value:function(e,t){this.__handlers[e]&&this.__handlers[e].map((function(e){try{e(t)}catch(i){}}))}},{key:"onTouchStart",value:function(e){var t=this._pos,i=this.root,n=this.config;n.needPreventDefault&&z(e);var o=K(e.touches);t.x=o?parseInt(o.pageX,10):e.pageX,t.y=o?parseInt(o.pageX,10):e.pageX,t.start=!0,this.__setPress(e),i.addEventListener(this.events.end,this.onTouchEnd),i.addEventListener(this.events.cancel,this.onTouchCancel),i.addEventListener(this.events.move,this.onTouchMove),this.trigger(V.TOUCH_START,e)}},{key:"onTouchCancel",value:function(e){this.onTouchEnd(e)}},{key:"onTouchEnd",value:function(e){var t=this._pos,i=this.root,n=this.config;n.needPreventDefault&&z(e),this.__clearPress(),i.removeEventListener(this.events.cancel,this.onTouchCancel),i.removeEventListener(this.events.end,this.onTouchEnd),i.removeEventListener(this.events.move,this.onTouchMove),e.moving=t.moving,e.press=t.press,t.press&&this.trigger(V.PRESS_END,e),this.trigger(V.TOUCH_END,e),!t.press&&!t.moving&&this.__setDb(e),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(e){var t=this._pos,i=this.config,n=K(e.touches),o=n?parseInt(n.pageX,10):e.pageX,r=n?parseInt(n.pageY,10):e.pageX,a=o-t.x,s=r-t.y;Math.abs(s)<i.miniStep&&Math.abs(a)<i.miniStep||(this.__clearPress(),t.press&&this.trigger(V.PRESS_END,e),t.press=!1,t.moving=!0,this.trigger(V.TOUCH_MOVE,e))}},{key:"destroy",value:function(){var e=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map((function(i){e.root.removeEventListener("touchend",e[t[i]])}))}}]),e}();function Z(){return(new DOMParser).parseFromString('<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink">\n  <path opacity="0.54"\n    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"\n    fill="white" />\n  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>\n</svg>',"image/svg+xml").firstChild}var J={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},$=["videoClick","videoDbClick"],Q=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;return Object(n["b"])(this,i),o=t.call(this,e),Object(n["e"])(Object(n["a"])(o),"onTouchStart",(function(e){var t=Object(n["a"])(o),i=t.player,a=t.config,s=t.pos,c=t.playerConfig,l=o.getTouche(e);if(l&&!a.disableGesture&&o.duration>0&&!i.ended){s.isStart=!0,r["b"].checkIsFunction(c.disableSwipeHandler)&&c.disableSwipeHandler(),o.find(".xg-dur").innerHTML=r["b"].format(o.duration);var u=o.root.getBoundingClientRect();90===i.rotateDeg?(s.top=u.left,s.left=u.top,s.width=u.height,s.height=u.width):(s.top=u.top,s.left=u.left,s.width=u.width,s.height=u.height);var h=parseInt(l.pageX-s.left,10),d=parseInt(l.pageY-s.top,10);s.x=90===i.rotateDeg?d:h,s.y=90===i.rotateDeg?h:d,s.scopeL=a.scopeL*s.width,s.scopeR=(1-a.scopeR)*s.width,s.scopeM1=s.width*(1-a.scopeM)/2,s.scopeM2=s.width-s.scopeM1}})),Object(n["e"])(Object(n["a"])(o),"onTouchMove",(function(e){var t=o.getTouche(e),i=Object(n["a"])(o),r=i.pos,a=i.config,s=i.player;if(t&&!a.disableGesture&&o.duration&&r.isStart){var c=a.miniMoveStep,l=a.hideControlsActive,u=parseInt(t.pageX-r.left,10),h=parseInt(t.pageY-r.top,10),d=90===s.rotateDeg?h:u,f=90===s.rotateDeg?u:h;if(Math.abs(d-r.x)>c||Math.abs(f-r.y)>c){var p=d-r.x,g=f-r.y,v=r.scope;if(-1===v&&(v=o.checkScope(d,f,p,g,r),0===v&&(l?s.blur():s.focus({autoHide:!1}),!r.time&&(r.time=parseInt(1e3*s.currentTime,10)+1e3*o.timeOffset)),r.scope=v),-1===v||v>0&&!a.gestureY||0===v&&!a.gestureX)return;e.cancelable&&e.preventDefault(),o.executeMove(p,g,v,r.width,r.height),r.x=d,r.y=f}}})),Object(n["e"])(Object(n["a"])(o),"onTouchEnd",(function(e){var t=Object(n["a"])(o),i=t.player,a=t.pos,s=t.playerConfig;if(a.isStart){a.scope>-1&&e.cancelable&&e.preventDefault();var c=o.config,l=c.disableGesture,u=c.gestureX;!l&&u?(o.endLastMove(a.scope),setTimeout((function(){i.getPlugin("progress")&&i.getPlugin("progress").resetSeekState()}),10)):a.time=0,a.scope=-1,o.resetPos(),r["b"].checkIsFunction(s.enableSwipeHandler)&&s.enableSwipeHandler(),o.changeAction(J.AUTO)}})),Object(n["e"])(Object(n["a"])(o),"onRootTouchMove",(function(e){!o.config.disableGesture&&o.config.gestureX&&o.checkIsRootTarget(e)&&(e.stopPropagation(),o.pos.isStart?o.onTouchMove(e):o.onTouchStart(e))})),Object(n["e"])(Object(n["a"])(o),"onRootTouchEnd",(function(e){o.pos.isStart&&o.checkIsRootTarget(e)&&(e.stopPropagation(),o.onTouchEnd(e))})),o.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},o.timer=null,o}return Object(n["c"])(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:Z,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this;$.map((function(t){e.__hooks[t]=null}));var t=this.playerConfig,i=this.config,n=this.player;!0===t.closeVideoDblclick&&(i.closedbClick=!0),this.resetPos(),r["b"].isUndefined(t.disableGesture)||(i.disableGesture=!!t.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=r["b"].createDom("xg-mask","",{},"xgmask"),n.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var o="mouse"===this.domEventType?"mouse":"touch";this.touch=new q(this.root,{eventType:o,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",(function(e){e.preventDefault()})),n.root.addEventListener("touchmove",this.onRootTouchMove,!0),n.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(a["DURATION_CHANGE"],(function(){var t=e.player,i=e.config;1e3*t.duration<i.moveDuration&&(i.moveDuration=1e3*t.duration)})),this.on([a["CANPLAY"],a["ENDED"]],(function(){var t=e.pos,i=t.time,n=t.isStart;!n&&i>0&&(e.pos.time=0)}));var s={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(s).map((function(t){e.touch.on(t,(function(i){e[s[t]](i)}))})),!i.disableActive){var c=n.plugins.progress;c&&(c.addCallBack("dragmove",(function(t){e.activeSeekNote(t.currentTime,t.forward)})),c.addCallBack("dragend",(function(){e.changeAction(J.AUTO)})))}}},{key:"registerThumbnail",value:function(){var e=this.player,t=e.plugins.thumbnail;if(t&&t.usable){this.thumbnail=t.createThumbnail(null,"mobile-thumbnail");var i=this.find(".time-preview");i.insertBefore(this.thumbnail,i.children[0])}}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},t=e.commonStyle,i=t.playedColor,n=t.progressColor;i&&(this.find(".xg-curbar").style.backgroundColor=i,this.find(".xg-cur").style.color=i),n&&(this.find(".xg-bar").style.backgroundColor=n,this.find(".time-preview").style.color=n),this.config.disableTimeProgress&&r["b"].addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map((function(t){e.pos[t]=0}))):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var t=this.player,i=this.root;i.setAttribute("data-xg-action",e);var n=t.plugins.start;n&&n.recover()}},{key:"getTouche",value:function(e){this.player.rotateDeg;var t=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return{pageX:t.pageX,pageY:t.pageY}}},{key:"checkScope",value:function(e,t,i,n,o){var r=o.width,a=-1;if(e<0||e>r)return a;var s=0===n?Math.abs(i):Math.abs(i/n);return Math.abs(i)>0&&s>=1.73&&e>o.scopeM1&&e<o.scopeM2?a=0:(0===Math.abs(i)||s<=.57)&&(a=e<o.scopeL?1:e>o.scopeR?2:3),a}},{key:"executeMove",value:function(e,t,i,n,r){switch(i){case 0:this.updateTime(e/n*this.config.scopeM);break;case 1:this.updateBrightness(t/r);break;case 2:o["a"].os.isIos||this.updateVolume(t/r);break}}},{key:"endLastMove",value:function(e){var t=this,i=this.pos,n=this.player,o=this.config,r=(i.time-this.timeOffset)/1e3;switch(e){case 0:n.seek(Number(r).toFixed(1)),o.hideControlsEnd?n.blur():n.focus(),this.timer=setTimeout((function(){t.pos.time=0}),500);break}this.changeAction(J.AUTO)}},{key:"checkIsRootTarget",value:function(e){var t=this.player.plugins||{};return(!t.progress||!t.progress.root.contains(e.target))&&(t.start&&t.start.root.contains(e.target)||t.controls&&t.controls.root.contains(e.target))}},{key:"sendUseAction",value:function(e){var t=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t,to:!t})}},{key:"clickHandler",value:function(e){var t=this.player,i=this.config,n=this.playerConfig;t.state<g["a"].RUNNING?n.closeVideoClick||(this.sendUseAction(r["b"].createEvent("click")),t.play()):!i.closedbClick||n.closeVideoClick?t.isActive?t.blur():t.focus():n.closeVideoClick||((t.isActive||i.focusVideoClick)&&(this.sendUseAction(r["b"].createEvent("click")),this.switchPlayPause()),t.focus())}},{key:"dbClickHandler",value:function(e){var t=this.config,i=this.player;!t.closedbClick&&i.state>=g["a"].RUNNING&&(this.sendUseAction(r["b"].createEvent("dblclick")),this.switchPlayPause())}},{key:"onClick",value:function(e){var t=this,i=this.player;Object(H["f"])(this,$[0],(function(e,i){t.clickHandler(i.e)}),{e:e,paused:i.paused})}},{key:"onDbClick",value:function(e){var t=this,i=this.player;Object(H["f"])(this,$[1],(function(e,i){t.dbClickHandler(i.e)}),{e:e,paused:i.paused})}},{key:"onPress",value:function(e){var t=this.pos,i=this.config,n=this.player;i.disablePress||(t.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:n.playbackRate,to:i.pressRate}),n.playbackRate=i.pressRate,this.changeAction(J.PLAYBACK))}},{key:"onPressEnd",value:function(e){var t=this.pos,i=this.config,n=this.player;i.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:n.playbackRate,to:t.rate}),n.playbackRate=t.rate,t.rate=1,this.changeAction(J.AUTO))}},{key:"updateTime",value:function(e){var t=this.player,i=this.config,n=this.player.duration;e=Number(e.toFixed(4));var o=parseInt(e*i.moveDuration,10)+this.timeOffset;o+=this.pos.time,o=o<0?0:o>1e3*n?1e3*n-200:o,t.getPlugin("time")&&t.getPlugin("time").updateTime(o/1e3),t.getPlugin("progress")&&t.getPlugin("progress").updatePercent(o/1e3/this.duration,!0),this.activeSeekNote(o/1e3,e>0),i.isTouchingSeek&&t.seek(Number((o-this.timeOffset)/1e3).toFixed(1)),this.pos.time=o}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.player,i=this.pos;if(e=parseInt(100*e,10),i.volume+=e,!(Math.abs(i.volume)<10)){var n=parseInt(10*t.volume,10)-parseInt(i.volume/10,10);n=n>10?10:n<1?0:n,t.volume=n/10,i.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.pos,i=this.config,n=this.xgMask,o=t.light+.8*e;o=o>i.maxDarkness?i.maxDarkness:o<0?0:o,n&&(n.style.backgroundColor="rgba(0,0,0,".concat(o,")")),t.light=o}},{key:"activeSeekNote",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.player,n=this.config,o=!(this.duration!==1/0&&this.duration>0);if(e&&"number"===typeof e&&!o&&!n.disableActive){e<0?e=0:e>i.duration&&(e=i.duration-.2),this.changeAction(J.SEEKING);var a=i.plugins.start;a&&a.focusHide(),this.find(".xg-dur").innerHTML=r["b"].format(this.duration),this.find(".xg-cur").innerHTML=r["b"].format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),t?r["b"].removeClass(this.find(".xg-seek-show"),"xg-back"):r["b"].addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var t=this.player,i=t.plugins.thumbnail;i&&i.usable&&this.thumbnail&&i.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<g["a"].ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(e,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),i}(c["b"]);function ee(e){e.preventDefault(),e.returnValue=!1}function te(e){var t=e.tagName;return!("INPUT"!==t&&"TEXTAREA"!==t&&!e.isContentEditable)}var ie=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e;Object(n["b"])(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),Object(n["e"])(Object(n["a"])(e),"onBodyKeyDown",(function(t){var i=t||window.event;if(e.player&&(e.player.isUserActive||e.config.isIgnoreUserActive)&&!(e.config.disable||e.config.disableBodyTrigger||!e.checkIsVisible()||i.metaKey||i.altKey||i.ctrlKey)){var n=i.keyCode;return!(i.target!==document.body&&(!e.config.isGlobalTrigger||te(i.target))||!e.checkCode(n,!0))&&(ee(i),e.handleKeyCode(n,t),!1)}})),Object(n["e"])(Object(n["a"])(e),"onKeydown",(function(t){var i=t||window.event;if(!(e.config.disable||e.config.disableRootTrigger||i.metaKey||i.altKey||i.ctrlKey)&&(e.player.isUserActive||e.config.isIgnoreUserActive)&&(e.player.isUserActive||e.config.isIgnoreUserActive)){if(!i||37!==i.keyCode&&!e.checkCode(i.keyCode)||i.target!==e.player.root&&i.target!==e.player.video&&i.target!==e.player.controls.el)return!0;ee(i),e.handleKeyCode(i.keyCode,t)}})),e}return Object(n["c"])(i,[{key:"mergekeyCodeMap",value:function(){var e=this,t=this.config.keyCodeMap;t&&Object.keys(t).map((function(i){e.keyCodeMap[i]?["keyCode","action","disable","isBodyTarget"].map((function(n){t[i][n]&&(e.keyCodeMap[i][n]=t[i][n])})):e.keyCodeMap[i]=t[i]}))}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e="function"===typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;e&&"number"===typeof e&&(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),t=e.height,i=e.top,n=e.bottom,o=window.innerHeight;return!(i<0&&i<0-.9*t||n>0&&n-o>.9*t)}},{key:"checkCode",value:function(e,t){var i=this,n=!1;return Object.keys(this.keyCodeMap).map((function(o){i.keyCodeMap[o]&&e===i.keyCodeMap[o].keyCode&&!i.keyCodeMap[o].disable&&(n=!t||t&&!i.keyCodeMap[o].noBodyTarget)})),n}},{key:"downVolume",value:function(e){var t=this.player,i=parseFloat((t.volume-.1).toFixed(1)),n={volume:{from:t.volume,to:i}};this.emitUserAction(e,"change_volume",{props:n}),t.volume=i>=0?i:0}},{key:"upVolume",value:function(e){var t=this.player,i=parseFloat((t.volume+.1).toFixed(1)),n={volume:{from:t.volume,to:i}};this.emitUserAction(e,"change_volume",{props:n}),t.volume=i<=1?i:1}},{key:"seek",value:function(e){var t=this.player,i=t.currentTime,n=t.duration,o=i;o=i+this.seekStep<=n?i+this.seekStep:n-1;var r={currentTime:{from:i,to:o}};this.emitUserAction(e,"seek",{props:r}),this.player.currentTime=o}},{key:"seekBack",value:function(e){var t=this.player.currentTime,i=0;t-this.seekStep>=0&&(i=t-this.seekStep);var n={currentTime:{from:t,to:i}};this.emitUserAction(e,"seek",{props:n}),this.player.currentTime=i}},{key:"playPause",value:function(e){var t=this.player;t&&(this.emitUserAction(e,"switch_play_pause"),t.paused?t.play():t.pause())}},{key:"exitFullscreen",value:function(e){var t=this.player,i=t.fullscreen,n=t.cssfullscreen;i&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:i,to:!i}),t.exitFullscreen()),n&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:n,to:!n}),t.exitCssFullscreen())}},{key:"handleKeyCode",value:function(e,t){var i=this;Object.keys(this.keyCodeMap).map((function(o){var r=i.keyCodeMap[o],s=r.action,c=r.keyCode,l=r.disable;c!==e||l||("function"===typeof s?s(t,i.player):"string"===typeof s&&"function"===typeof i[s]&&i[s](t,i.player),i.emit(a["SHORTCUT"],Object(n["i"])({key:o,target:t.target},i.keyCodeMap[o])))}))}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),i}(F["a"]);function ne(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">\n  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>\n</svg>\n',"image/svg+xml").firstChild}var oe=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i,[{key:"registerIcons",value:function(){return{loadingIcon:ne}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:c["a"].ROOT}}}]),i}(c["b"]),re=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],ae=function(){function e(t){Object(n["b"])(this,e),this.fragments=t.fragments||[],0===this.fragments.length&&this.fragments.push({percent:1}),this._callBack=t.actionCallback,this.fragConfig={fragFocusClass:t.fragFocusClass||"inner-focus-point",fragAutoFocus:!!t.fragAutoFocus,fragClass:t.fragClass||""},this.style=t.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return Object(n["c"])(e,[{key:"updateDuration",value:function(e){var t=this;this.duration=e;var i=0,n=this.fragments;this.fragments=n.map((function(e){return e.start=parseInt(i,10),e.end=parseInt(i+e.percent*t.duration,10),e.duration=parseInt(e.percent*t.duration,10),i+=e.percent*t.duration,e}))}},{key:"updateProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"played",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},i=this.progressList,n=this.fragments;if(!(i.length<1)){var o=t.newIndex,r=t.curIndex,a=t.millisecond;o!==r&&i.map((function(t,i){i<o?t[e].style.width="100%":i>o&&(t[e].style.width=0)}));var s=n[o],c=0===a?0:(a-s.start)/s.duration;i[o][e].style.width=c<0?0:"".concat(100*c,"%")}}},{key:"updateFocus",value:function(e){if(this.fragConfig.fragAutoFocus&&!(this.fragments.length<2))if(e){var t=this.findIndex(1e3*e.currentTime,this.focusIndex);if(t>=0&&t!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(t);var i={index:t,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=t,this._callBack&&this._callBack(i)}}else if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var n={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(n),this.focusIndex=-1}}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(parseInt(1e3*t,10))}var i=this.playedIndex,n=this.cachedIndex;if("Undefined"!==r["b"].typeOf(e.played)){var o=this.findIndex(1e3*e.played,i);if(o<0)return;this.updateProgress("played",{newIndex:o,curIndex:i,millisecond:parseInt(1e3*e.played,10)}),this.playedIndex=o}if("Undefined"!==r["b"].typeOf(e.cached)){var a=this.findIndex(1e3*e.cached,n);if(a<0)return;this.updateProgress("cached",{newIndex:a,curIndex:n,millisecond:parseInt(1e3*e.cached,10)}),this.cachedIndex=a}}},{key:"findIndex",value:function(e,t){var i=this.fragments;if(!i||0===i.length)return-1;if(1===i.length)return 0;if(t>-1&&t<i.length&&e>i[t].start&&e<i[t].end)return t;if(e>i[i.length-1].start)return i.length-1;for(var n=0;n<i.length;n++)if(e>i[n].start&&e<=i[n].end){t=n;break}return t}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(r["b"].hasClass(e[t],this.fragConfig.fragFocusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)r["b"].removeClass(e[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return r["b"].addClass(t[e],this.fragConfig.fragFocusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(e){var t=this;if(Object.keys(this.fragConfig).forEach((function(i){void 0!==e[i]&&(t.fragConfig[i]=e[i])})),e.fragments){if(this.fragments=0===e.fragments.length?[{percent:1}]:e.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root){var i=this.root.children;while(i.length>0)this.root.removeChild(i[0])}this.render()}}},{key:"render",value:function(){var e=this,t=this.style.progressColor;if(this.root||(this.root=r["b"].createDom("xg-inners","",{},"progress-list")),this.fragments){var i=this.fragConfig,n=i.fragClass,o=i.fragFocusClass;this.progressList=this.fragments.map((function(i){var a=r["b"].createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(i.percent):"flex: ".concat(i.percent)},"".concat(i.isFocus?o:""," xgplayer-progress-inner ").concat(n));return e.root.appendChild(a),re.forEach((function(t){a.appendChild(r["b"].createDom(t.tag,"",{style:t.styleKey?"background: ".concat(e.style[t.styleKey],"; width:0;"):"width:0;"},t.className))})),{cached:a.children[0],played:a.children[1]}}))}return this.root}}]),e}(),se={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},ce=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;return Object(n["b"])(this,i),o=t.call(this,e),Object(n["e"])(Object(n["a"])(o),"onMoveOnly",(function(e,t){var i=Object(n["a"])(o),a=i.pos,s=i.config,c=i.player,l=t;if(e){r["b"].event(e);var u=r["b"].getEventPos(e,c.zoom),h=90===c.rotateDeg?u.clientY:u.clientX;if(a.moving&&Math.abs(a.x-h)<s.miniMoveStep)return;a.moving=!0,a.x=h,l=o.computeTime(e,h)}o.triggerCallbacks("dragmove",l,e),o._updateInnerFocus(l)})),Object(n["e"])(Object(n["a"])(o),"onBodyClick",(function(e){o.pos.isLocked&&(o.pos.isLocked=!1,e.preventDefault(),e.stopPropagation())})),Object(n["e"])(Object(n["a"])(o),"_mouseDownHandler",(function(e,t){o._state.time=t.currentTime,o.updateWidth(t.currentTime,t.percent,0),o._updateInnerFocus(t)})),Object(n["e"])(Object(n["a"])(o),"_mouseUpHandler",(function(e,t){var i=Object(n["a"])(o),r=i.pos;r.moving&&o.updateWidth(t.currentTime,t.percent,2)})),Object(n["e"])(Object(n["a"])(o),"_mouseMoveHandler",(function(e,t){var i=Object(n["a"])(o),r=i._state,a=i.pos,s=i.config,c=i.player;r.time<t.currentTime?t.forward=!0:t.forward=!1,r.time=t.currentTime,a.isDown&&!a.moving&&(a.moving=!0,s.isPauseMoving&&c.pause(),o.triggerCallbacks("dragstart",t,e),o.emitUserAction("drag","dragstart",t)),o.updateWidth(t.currentTime,t.percent,1),o.triggerCallbacks("dragmove",t,e),o._updateInnerFocus(t)})),Object(n["e"])(Object(n["a"])(o),"onMouseDown",(function(e){var t=Object(n["a"])(o),i=t._state,a=t.player,s=t.pos,c=t.config,l=t.playerConfig,u=r["b"].getEventPos(e,a.zoom),h=90===a.rotateDeg?u.clientY:u.clientX;if(!(a.isMini||c.closeMoveSeek||!l.allowSeekAfterEnded&&a.ended)){if(a.duration||a.isPlaying){e.stopPropagation(),o.focus(),r["b"].checkIsFunction(l.disableSwipeHandler)&&l.disableSwipeHandler(),r["b"].checkIsFunction(c.onMoveStart)&&c.onMoveStart(),r["b"].event(e),s.x=h,s.isDown=!0,s.moving=!1,i.prePlayTime=a.currentTime,a.focus({autoHide:!1}),o.isProgressMoving=!0,r["b"].addClass(o.progressBtn,"active");var d=o.computeTime(e,h);d.prePlayTime=i.prePlayTime,o._mouseDownHandlerHook(e,d);var f=e.type;return"touchstart"===f?(o.root.addEventListener("touchmove",o.onMouseMove),o.root.addEventListener("touchend",o.onMouseUp)):(o.unbind("mousemove",o.onMoveOnly),document.addEventListener("mousemove",o.onMouseMove,!1),document.addEventListener("mouseup",o.onMouseUp,!1)),!0}a.play()}})),Object(n["e"])(Object(n["a"])(o),"onMouseUp",(function(e){var t=Object(n["a"])(o),i=t.player,a=t.config,s=t.pos,c=t.playerConfig,l=t._state;e.stopPropagation(),e.preventDefault(),r["b"].checkIsFunction(c.enableSwipeHandler)&&c.enableSwipeHandler(),r["b"].checkIsFunction(a.onMoveEnd)&&a.onMoveEnd(),r["b"].event(e),r["b"].removeClass(o.progressBtn,"active");var u=o.computeTime(e,s.x);u.prePlayTime=l.prePlayTime,s.moving?(o.triggerCallbacks("dragend",u,e),o.emitUserAction("drag","dragend",u)):(o.triggerCallbacks("click",u,e),o.emitUserAction("click","click",u)),o._mouseUpHandlerHook(e,u),s.moving=!1,s.isDown=!1,s.x=0,s.y=0,s.isLocked=!0,l.prePlayTime=0,l.time=0;var h=e.type;"touchend"===h?(o.root.removeEventListener("touchmove",o.onMouseMove),o.root.removeEventListener("touchend",o.onMouseUp),o.blur()):(document.removeEventListener("mousemove",o.onMouseMove,!1),document.removeEventListener("mouseup",o.onMouseUp,!1),s.isEnter?"mobile"!==c.isMobileSimulateMode&&o.bind("mousemove",o.onMoveOnly):o.onMouseLeave(e)),r["b"].setTimeout(Object(n["a"])(o),(function(){o.resetSeekState()}),10),i.focus()})),Object(n["e"])(Object(n["a"])(o),"onMouseMove",(function(e){var t=Object(n["a"])(o),i=t._state,a=t.pos,s=t.player,c=t.config;r["b"].checkTouchSupport()&&e.preventDefault(),r["b"].event(e);var l=r["b"].getEventPos(e,s.zoom),u=90===s.rotateDeg?l.clientY:l.clientX,h=Math.abs(a.x-u);if(!(a.moving&&h<c.miniMoveStep||!a.moving&&h<c.miniStartStep)){a.x=u;var d=o.computeTime(e,u);d.prePlayTime=i.prePlayTime,o._mouseMoveHandlerHook(e,d)}})),Object(n["e"])(Object(n["a"])(o),"onMouseOut",(function(e){o.triggerCallbacks("mouseout",null,e)})),Object(n["e"])(Object(n["a"])(o),"onMouseOver",(function(e){o.triggerCallbacks("mouseover",null,e)})),Object(n["e"])(Object(n["a"])(o),"onMouseEnter",(function(e){var t=Object(n["a"])(o),i=t.player,a=t.pos;if(!(a.isDown||a.isEnter||i.isMini||!i.config.allowSeekAfterEnded&&i.ended)){a.isEnter=!0,o.bind("mousemove",o.onMoveOnly),o.bind("mouseleave",o.onMouseLeave),r["b"].event(e);var s=r["b"].getEventPos(e,i.zoom),c=90===i.rotateDeg?s.clientY:s.clientX,l=o.computeTime(e,c);o.triggerCallbacks("mouseenter",l,e),o.focus()}})),Object(n["e"])(Object(n["a"])(o),"onMouseLeave",(function(e){o.triggerCallbacks("mouseleave",null,e),o.unlock(),o._updateInnerFocus(null)})),Object(n["e"])(Object(n["a"])(o),"onVideoResize",(function(){var e=o.pos,t=e.x,i=e.isDown,n=e.isEnter;if(n&&!i){var r=o.computeTime(null,t);o.onMoveOnly(null,r)}})),o.useable=!1,o.isProgressMoving=!1,o.__dragCallBacks=[],o._state={now:-1,direc:0,time:0,prePlayTime:-1},o._disableBlur=!1,o}return Object(n["c"])(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=e}},{key:"show",value:function(){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&0!==t.length||(t=[{percent:1}]);var o=Object(n["i"])(Object(n["i"])({fragments:t},i),{},{actionCallback:function(t){e.emitUserAction("fragment_focus","fragment_focus",t)}});this.innerList?this.innerList.reset(o):(this.innerList=new ae(o),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map((function(t){e[t]=e.innerList[t].bind(e.innerList)})))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){var e=this;if(!this.config.disable&&!this.playerConfig.isLive){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var t=this.config,i=t.fragFocusClass,n=t.fragAutoFocus,r=t.fragClass;this._initInner(this.config.fragments,{fragFocusClass:i,fragAutoFocus:n,fragClass:r,style:this.playerConfig.commonStyle||{}}),"mobile"===o["a"].device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(a["DURATION_CHANGE"],(function(){e.onMouseLeave()})),this.on(a["TIME_UPDATE"],(function(){e.onTimeupdate()})),this.on(a["SEEKED"],(function(){e.onTimeupdate(),e.onCacheUpdate()})),this.on(a["PROGRESS"],(function(){e.onCacheUpdate()})),this.on(a["ENDED"],(function(){e.onCacheUpdate(!0),e.onTimeupdate(!0),e._state.now=0})),this.on(a["EMPTIED"],(function(){e.onReset()})),this.on(a["VIDEO_RESIZE"],(function(){e.onVideoResize()})),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(e){var t=this,i=null;Object.keys(e).forEach((function(n){t.config[n]=e[n],"fragments"===n&&(i=e[n])})),i&&this._initInner(i,e)}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},t=e.commonStyle,i=t.sliderBtnStyle,o=this.progressBtn;i&&("string"===typeof i?o.style.boxShadow=i:"object"===Object(n["l"])(i)&&Object.keys(i).map((function(e){o.style[e]=i[e]})))}},{key:"triggerCallbacks",value:function(e,t,i){this.__dragCallBacks.length>0&&this.__dragCallBacks.map((function(n){if(n&&n.handler&&n.type===e)try{n.handler(t,i)}catch(o){}}))}},{key:"addCallBack",value:function(e,t){t&&"function"===typeof t&&this.__dragCallBacks.push({type:e,handler:t})}},{key:"removeCallBack",value:function(e,t){var i=this.__dragCallBacks,n=-1;i.map((function(i,o){i&&i.type===e&&i.handler===t&&(n=o)})),n>-1&&i.splice(n,1)}},{key:"unlock",value:function(){var e=this.player,t=this.pos;t.isEnter=!1,e.isMini||(this.unbind("mousemove",this.onMoveOnly),t.isDown?this.unbind("mouseleave",this.onMouseLeave):this.blur())}},{key:"bindDomEvents",value:function(){var e=this.player,t=e.controls,i=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),"touch"!==this.domEventType&&"compatible"!==this.domEventType||(this.root.addEventListener("touchstart",this.onMouseDown),t&&(t.root&&t.root.addEventListener("touchmove",r["b"].stopPropagation),t.center&&t.center.addEventListener("touchend",r["b"].stopPropagation))),"mouse"!==this.domEventType&&"compatible"!==this.domEventType||(this.bind("mousedown",this.onMouseDown),"mobile"!==i.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),r["b"].addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),r["b"].removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,t,i){var n=this.config,o=this.player;if(!n.isCloseClickSeek||0!==i){var r=e>=o.duration?o.duration-n.endedDiff:Number(e).toFixed(1);this.updatePercent(t),this.updateTime(e),(1!==i||n.isDragingSeek&&"audio"!==o.config.mediaType)&&(this._state.now=r,this._state.direc=r>o.currentTime?0:1,o.seek(r))}}},{key:"computeTime",value:function(e,t){var i,n,o=this.player,r=this.root.getBoundingClientRect(),a=r.width,s=r.height,c=r.top,l=r.left,u=t;90===o.rotateDeg?(i=s,n=c):(i=a,n=l);var h=u-n;h=h>i?i:h<0?0:h;var d=h/i;d=d<0?0:d>1?1:d;var f=parseInt(d*this.duration*1e3,10)/1e3;return{percent:d,currentTime:f,offset:h,width:i,left:n,e:e}}},{key:"updateTime",value:function(e){var t=this.player,i=this.duration;e>i?e=i:e<0&&(e=0);var n=t.plugins.time;n&&n.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,t){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(100*e,"%"),this.innerList.update({played:e*this.duration},this.duration);var i=this.player.plugins.miniprogress;i&&i.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(e){var t=this.player,i=this._state,n=this.duration;if(!t.isSeeking&&!this.isProgressMoving){if(i.now>-1){var o=parseInt(1e3*i.now,10)-parseInt(1e3*t.currentTime,10);if(0===i.direc&&o>300||1===i.direc&&o>-300)return void(i.now=-1);i.now=-1}var a=this.timeOffset+t.currentTime;a=r["b"].adjustTimeByDuration(a,n,e),this.innerList.update({played:a},n),this.progressBtn.style.left="".concat(a/n*100,"%");var s=this.player.plugins.miniprogress;s&&s.update({played:a},n)}}},{key:"onCacheUpdate",value:function(e){var t=this.player,i=this.duration;if(t){var n=t.bufferedPoint.end;n=r["b"].adjustTimeByDuration(n,i,e),this.innerList.update({cached:n},i);var o=this.player.plugins.miniprogress;o&&o.update({cached:n},i)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,t=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var i=this.domEventType;"touch"!==i&&"compatible"!==i||(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),t&&(t.root&&t.root.removeEventListener("touchmove",r["b"].stopPropagation),t.center&&t.center.removeEventListener("touchend",r["b"].stopPropagation))),"mouse"!==i&&"compatible"!==i||(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var e=this.player.controls?this.player.controls.config.mode:"",t="bottom"===e?"xgplayer-progress-bottom":"";return'\n    <xg-progress class="xgplayer-progress '.concat(t,'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:c["a"].CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:se.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return se}}]),i}(c["b"]),le=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e;Object(n["b"])(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),Object(n["e"])(Object(n["a"])(e),"_onMouseenter",(function(t){e.emit("icon_mouseenter",{pluginName:e.pluginName})})),Object(n["e"])(Object(n["a"])(e),"_onMouseLeave",(function(t){e.emit("icon_mouseleave",{pluginName:e.pluginName})})),e}return Object(n["c"])(i,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave)}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),i}(c["b"]),ue=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this;Object(n["f"])(Object(n["g"])(i.prototype),"afterCreate",this).call(this);var t=this.player,o=this.config;o.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on([a["PAUSE"],a["ERROR"],a["EMPTIED"]],(function(){e.animate(t.paused)})),this.on(a["PLAY"],(function(){e.animate(t.paused)})),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:v,class:"xg-icon-play"},pause:{icon:y,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t.paused,to:!t.paused}),t.ended?t.replay():t.paused?(t.play(),this.animate(!1)):(t.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){if(this.player){var t=this.i18nKeys,i=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),i&&this.changeLangTextKey(i,t.PLAY_TIPS)):(this.setAttr("data-state","play"),i&&this.changeLangTextKey(i,t.PAUSE_TIPS))}}},{key:"destroy",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    '.concat(O(this,"PLAY_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:c["a"].CONTROLS_LEFT,index:0,disable:!1}}}]),i}(le);function he(){return(new DOMParser).parseFromString('<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',"image/svg+xml").firstChild}var de=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(t){t.preventDefault(),t.stopPropagation(),e.config.onClick(t)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:he,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){r["b"].addClass(this.root,"show")}},{key:"hide",value:function(){r["b"].removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:c["a"].ROOT_TOP,index:0}}}]),i}(c["b"]);function fe(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',"image/svg+xml").firstChild}function pe(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',"image/svg+xml").firstChild}var ge=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e;Object(n["b"])(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),Object(n["e"])(Object(n["a"])(e),"_onOrientationChange",(function(t){e.player.fullscreen&&e.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?e.player.setRotateDeg(0):e.player.setRotateDeg(90))})),e}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this;Object(n["f"])(Object(n["g"])(i.prototype),"afterCreate",this).call(this);var t=this.config,s=this.playerConfig;if(!t.disable){t.target&&(this.playerConfig.fullscreenTarget=this.config.target);var c=r["b"].getFullScreenEl();s.fullscreenTarget===c&&this.player.getFullscreen().catch((function(e){})),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(t){var i=e.player.fullscreen;e.emitUserAction(t,"switch_fullscreen",{prop:"fullscreen",from:i,to:!i})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(a["FULLSCREEN_CHANGE"],(function(t){var i=e.find(".xg-tips");i&&e.changeLangTextKey(i,t?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(t)})),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:de,options:{config:{onClick:function(t){e.handleFullscreen(t)}}}})),"mobile"===o["a"].device&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:fe,class:"xg-get-fullscreen"},exitFullscreen:{icon:pe,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon","mobile"===o["a"].device?"touchend":"click",this.handleFullscreen),"mobile"===o["a"].device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this.player,i=this.config,n=!0===i.useCssFullscreen||"function"===typeof i.useCssFullscreen&&i.useCssFullscreen();n?(t.fullscreen?t.exitCssFullscreen():t.getCssFullscreen(),this.animate(t.fullscreen)):i.rotateFullscreen?(t.fullscreen?t.exitRotateFullscreen():t.getRotateFullscreen(),this.animate(t.fullscreen)):i.switchCallback&&"function"===typeof i.switchCallback?i.switchCallback(t.fullscreen):t.fullscreen?t.exitFullscreen():t.getFullscreen().catch((function(e){}))}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"show",this).call(this)}},{key:"hide",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    '.concat(O(this,e,this.playerConfig.isHideTips),"\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:c["a"].CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),i}(le),ve=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;return Object(n["b"])(this,i),o=t.call(this,e),o.isActiving=!1,o}return Object(n["c"])(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,t=this.player.controls.config.mode;this.mode="flex"===t?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(a["DURATION_CHANGE"],(function(){e.onTimeUpdate()})),this.on(a["TIME_UPDATE"],(function(){e.onTimeUpdate()})),this.on(a["ENDED"],(function(){e.onTimeUpdate(!0)})),this.on(a["EMPTIED"],(function(){e.onReset()})))}},{key:"show",value:function(){if("flex"===this.mode)return this.centerCurDom&&(this.centerCurDom.style.display="block"),void(this.centerDurDom&&(this.centerDurDom.style.display="block"));this.root.style.display="block"}},{key:"hide",value:function(){if("flex"===this.mode)return this.centerCurDom&&(this.centerCurDom.style.display="none"),void(this.centerDurDom&&(this.centerDurDom.style.display="none"));this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var t=this.player,i=this.config,n=this.duration;if(!i.disable&&!this.isActiving&&t.hasStart){var o=t.currentTime+this.timeOffset;o=r["b"].adjustTimeByDuration(o,n,e),"flex"===this.mode?(this.centerCurDom.innerHTML=r["b"].format(o),n!==1/0&&n>0&&(this.centerDurDom.innerHTML=r["b"].format(n))):(this.timeDom.innerHTML=r["b"].format(o),n!==1/0&&n>0&&(this.durationDom.innerHTML=r["b"].format(n)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=r["b"].format(0),this.centerDurDom.innerHTML=r["b"].format(0)):(this.timeDom.innerHTML=r["b"].format(0),this.durationDom.innerHTML=r["b"].format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(e.controls&&e.controls.center){var t=e.controls.center;this.centerCurDom=r["b"].createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=r["b"].createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),t.children.length>0?t.insertBefore(this.centerCurDom,t.children[0]):t.appendChild(this.centerCurDom),t.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;this.duration===1/0||this.playerConfig.isLive?(r["b"].hide(this.durationDom),r["b"].hide(this.timeDom),r["b"].hide(this.find(".time-separator")),r["b"].show(this.find(".time-live-tag"))):r["b"].hide(this.find(".time-live-tag")),e.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(e){e?(r["b"].hide(this.durationDom),r["b"].hide(this.timeDom),r["b"].hide(this.find(".time-separator")),r["b"].show(this.find(".time-live-tag"))):(r["b"].hide(this.find(".time-live-tag")),r["b"].show(this.find(".time-separator")),r["b"].show(this.durationDom),r["b"].show(this.timeDom))}},{key:"updateTime",value:function(e){this.isActiving=!0,!e&&0!==e||e>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=r["b"].format(e):this.centerCurDom.innerHTML=r["b"].format(e))}},{key:"resetActive",value:function(){var e=this,t=this.player,i=function(){e.isActiving=!1};this.off(a["SEEKED"],i),t.isSeeking?this.once(a["SEEKED"],i):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:c["a"].CONTROLS_LEFT,index:2,disable:!1}}}]),i}(c["b"]);function ye(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function me(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function be(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',"image/svg+xml").firstChild}var ke=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e;Object(n["b"])(this,i);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),Object(n["e"])(Object(n["a"])(e),"onBarMousedown",(function(t){var i=Object(n["a"])(e),o=i.player,a=e.find(".xgplayer-bar");r["b"].event(t);var s=a.getBoundingClientRect(),c=r["b"].getEventPos(t,o.zoom),l=s.height-(c.clientY-s.top);if(c.h=l,c.barH=s.height,e.pos=c,!(l<-2))return e.updateVolumePos(l,t),document.addEventListener("mouseup",e.onBarMouseUp),e._d.isStart=!0,!1})),Object(n["e"])(Object(n["a"])(e),"onBarMouseMove",(function(t){var i=Object(n["a"])(e),o=i._d;if(o.isStart){var a=Object(n["a"])(e),s=a.pos,c=a.player;t.preventDefault(),t.stopPropagation(),r["b"].event(t);var l=r["b"].getEventPos(t,c.zoom);o.isMoving=!0;var u=s.h-l.clientY+s.clientY;u>s.barH||e.updateVolumePos(u,t)}})),Object(n["e"])(Object(n["a"])(e),"onBarMouseUp",(function(t){r["b"].event(t),document.removeEventListener("mouseup",e.onBarMouseUp);var i=Object(n["a"])(e),o=i._d;o.isStart=!1,o.isMoving=!1})),Object(n["e"])(Object(n["a"])(e),"onMouseenter",(function(t){e._d.isActive=!0,e.focus(),e.emit("icon_mouseenter",{pluginName:e.pluginName})})),Object(n["e"])(Object(n["a"])(e),"onMouseleave",(function(t){e._d.isActive=!1,e.unFocus(100,!1,t),e.emit("icon_mouseleave",{pluginName:e.pluginName})})),Object(n["e"])(Object(n["a"])(e),"onVolumeChange",(function(t){if(e.player){var i=e.player,n=i.muted,o=i.volume;e._d.isMoving||(e.find(".xgplayer-drag").style.height=n||0===o?"4px":"".concat(100*o,"%"),e.config.showValueLabel&&e.updateVolumeValue()),e.animate(n,o)}})),e}return Object(n["c"])(i,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:me,class:"xg-volume-small"},volumeLarge:{icon:ye,class:"xg-volume"},volumeMuted:{icon:be,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},!this.config.disable){this.initIcons();var t=this.playerConfig,i=t.commonStyle,n=t.volume;i.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=i.volumeColor),this.changeMutedHandler=this.hook("mutedChange",(function(t){e.changeMuted(t)}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),"mobile"!==o["a"].device&&"mobile"!==this.playerConfig.isMobileSimulateMode&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(a["VOLUME_CHANGE"],this.onVolumeChange),this.once(a["LOADED_DATA"],this.onVolumeChange),"Number"!==r["b"].typeOf(n)&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,t){var i=this.player,n=this.find(".xgplayer-drag"),o=this.find(".xgplayer-bar");if(o&&n){var r=parseInt(e/o.getBoundingClientRect().height*1e3,10);n.style.height="".concat(e,"px");var a=Math.max(Math.min(r/1e3,1),0),s={volume:{from:i.volume,to:a}};i.muted&&(s.muted={from:!0,to:!1}),this.emitUserAction(t,"change_volume",{muted:i.muted,volume:i.volume,props:s}),i.volume=Math.max(Math.min(r/1e3,1),0),i.muted&&(i.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,t=e.volume,i=e.muted,n=this.find(".xgplayer-value-label"),o=Math.max(Math.min(t,1),0);n.innerText=i?0:Math.ceil(100*o)}},{key:"focus",value:function(){var e=this.player;e.focus({autoHide:!1}),this._timerId&&(r["b"].clearTimeout(this,this._timerId),this._timerId=null),r["b"].addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,o=this._d,a=this.player;o.isActive||(this._timerId&&(r["b"].clearTimeout(this,this._timerId),this._timerId=null),this._timerId=r["b"].setTimeout(this,(function(){o.isActive||(i?a.blur():a.focus(),r["b"].removeClass(e.root,"slide-show"),o.isStart&&e.onBarMouseUp(n)),e._timerId=null}),t))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var t=this.player,i=this._d;i.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:t.muted,volume:t.volume,props:{muted:{from:t.muted,to:!t.muted}}}),t.volume>0&&(t.muted=!t.muted),t.volume<.01&&(t.volume=this.config.miniVolume)}},{key:"animate",value:function(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(r["b"].clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon","mobile"===o["a"].device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,t=this.config.showValueLabel;return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(t?'<div class="xgplayer-value-label">'.concat(100*e,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*e,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:c["a"].CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),i}(c["b"]);function Ce(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',"image/svg+xml").firstChild}var _e=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;return Object(n["b"])(this,i),o=t.call(this,e),o.rotateDeg=o.config.rotateDeg||0,o}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(Object(n["f"])(Object(n["g"])(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(a["VIDEO_RESIZE"],(function(){e.rotateDeg&&r["b"].setTimeout(e,(function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)}),100)})),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,t){var i=this.player;e||(e=0);var n=this.player,o=n.root,r=n.innerContainer,a=this.player.media,s=o.offsetWidth,c=r&&t?r.offsetHeight:o.offsetHeight,l="100%",u="100%",h=0,d=0;.75!==e&&.25!==e||(l="".concat(c,"px"),u="".concat(s,"px"),h=-(c-s)/2,d=-(s-c)/2);var f="translate(".concat(h,"px,").concat(d,"px) rotate(").concat(e,"turn)"),p={transformOrigin:"center center",transform:f,webKitTransform:f,height:u,width:l},g=t?a:o,v=t?i.getPlugin("poster"):null;Object.keys(p).map((function(e){g.style[e]=p[e],v&&v.root&&(v.root.style[e]=p[e])}))}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.player;this.rotateDeg||(this.rotateDeg=0);var o=e?1:-1;this.rotateDeg=(this.rotateDeg+1+.25*o*i)%1,this.updateRotateDeg(this.rotateDeg,t),n.emit(a["ROTATE"],360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:Ce}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      '.concat(O(this,"ROTATE_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:c["a"].CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),i}(le);function Oe(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function Te(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}var Ee={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},we=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e;Object(n["b"])(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),Object(n["e"])(Object(n["a"])(e),"switchPIP",(function(t){if(!e.isPIPAvailable())return!1;t.stopPropagation&&t.stopPropagation(),e.isPip?(e.exitPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!0,to:!1}),e.setAttr("data-state","normal")):4===e.player.media.readyState&&(e.requestPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!1,to:!0}),e.setAttr("data-state","pip"))})),e}return Object(n["c"])(i,[{key:"beforeCreate",value:function(e){"boolean"===typeof e.player.config.pip&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(Object(n["f"])(Object(n["g"])(i.prototype),"afterCreate",this).call(this),this.pMode=Ee.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(a["COMPLETE"],(function(){e.config.showIcon&&(r["b"].removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))})))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:Oe,class:"xg-get-pip"},pipIconExit:{icon:Te,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,t=this.player;this.leavePIPCallback=function(){var i=t.paused;r["b"].setTimeout(e,(function(){!i&&t.mediaPlay()}),0),!i&&t.mediaPlay(),e.setAttr("data-state","normal"),t.emit(a["PIP_CHANGE"],!1)},this.enterPIPCallback=function(i){t.emit(a["PIP_CHANGE"],!0),e.pipWindow=i.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(i){var n=t.media.webkitPresentationMode;e.pMode===Ee.FULLSCREEN&&n!==Ee.FULLSCREEN&&t.onFullscreenChange(null,!1),e.pMode=n,n===Ee.PIP?e.enterPIPCallback(i):n===Ee.INLINE&&e.leavePIPCallback(i)},t.media&&(t.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),t.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(t.media)&&t.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,t=this.playerConfig;if(this.isPIPAvailable()&&!this.isPip)try{var n=t.poster;return n&&(e.media.poster="String"===r["b"].typeOf(n)?n:n.poster),i.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("picture-in-picture"):e.media.requestPictureInPicture(),!0}catch(o){return!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(i.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(t){return!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.media||e.media.webkitPresentationMode===Ee.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.media,t="Boolean"!==r["b"].typeOf(document.pictureInPictureEnabled)||document.pictureInPictureEnabled;return t&&("Boolean"===r["b"].typeOf(e.disablePictureInPicture)&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&"Function"===r["b"].typeOf(e.webkitSetPresentationMode))}},{key:"destroy",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon&&this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      '.concat(O(this,"PIP",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:c["a"].CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return"function"===typeof e.webkitSetPresentationMode}}]),i}(le);function Se(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',"image/svg+xml").firstChild}var xe=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;return Object(n["b"])(this,i),o=t.call(this,e),Object(n["e"])(Object(n["a"])(o),"playNext",(function(e){var t=Object(n["a"])(o),i=t.player;e.preventDefault(),e.stopPropagation(),o.idx+1<o.config.urlList.length?(o.idx++,o.nextHandler(o.config.urlList[o.idx],o.idx),i.emit(a["PLAYNEXT"],o.idx+1)):(o.nextHandler(),i.emit(a["PLAYNEXT"]))})),o.idx=-1,o}return Object(n["c"])(i,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:Se}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e="mobile"===o["a"].device?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var t=this.player;e&&(t.pause(),t.currentTime=0,t.switchURL?t.switchURL(e):t.src=e,t.config.url=e,t.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      '.concat(O(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),"\n     </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:c["a"].CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),i}(c["b"]),Ae=i("aeb1"),Pe=i.n(Ae);function Ie(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',"image/svg+xml").firstChild}var Le=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;return Object(n["b"])(this,i),o=t.call(this,e),Object(n["e"])(Object(n["a"])(o),"download",(function(e){if(!o.isLock){o.emitUserAction(e,"download");var t=o.getAbsoluteURL(o.player.src);Pe()(t),o.isLock=!0,o.timer=window.setTimeout((function(){o.isLock=!1,window.clearTimeout(o.timer),o.timer=null}),300)}})),o.timer=null,o.isLock=!1,o}return Object(n["c"])(i,[{key:"afterCreate",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"afterCreate",this).call(this),this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:Ie}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'.concat(e,'">x</a>'),e=t.firstChild.href}return e}},{key:"destroy",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   '.concat(O(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:c["a"].CONTROLS_RIGHT,index:3,disable:!0}}}]),i}(le),je=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i,[{key:"beforeCreate",value:function(e){"boolean"===typeof e.player.config.screenShot&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(t){e.fitVideo&&(e.width=t.vWidth,e.height=t.vHeight)},this.once(a["VIDEO_RESIZE"],this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,t){var i=document.createElement("a");i.href=e,i.download=t;var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(n)}},{key:"createCanvas",value:function(e,t){var i=document.createElement("canvas"),n=i.getContext("2d");this.canvasCtx=n,this.canvas=i,i.width=e||this.config.width,i.height=t||this.config.height,n.imageSmoothingEnabled=!0,n.imageSmoothingEnabled&&(n.imageSmoothingQuality="high")}},{key:"onClickBtn",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then((function(e){t.emit(a["SCREEN_SHOT"],e),t.saveScreenShot(e,t.config.name+t.config.format)}))}},{key:"shot",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},o=this.config,r=this.player,a=n.quality||o.quality,s=n.type||o.type;return new Promise((function(n,c){var l,u=null;if(r.media.canvas)u=r.media.canvas;else{i.canvas?(i.canvas.width=e||o.width,i.canvas.height=t||o.height):i.createCanvas(e,t),u=i.canvas,l=i.canvasCtx;var h,d,f,p,g=r.media.videoWidth/r.media.videoHeight,v=u.width/u.height,y=0,m=0,b=r.media.videoWidth,k=r.media.videoHeight;g>v?(f=u.width,p=u.width/g,h=0,d=Math.round((u.height-p)/2)):g===v?(f=u.width,p=u.height,h=0,d=0):g<v&&(f=u.height*g,p=u.height,h=Math.round((u.width-f)/2),d=0),l.drawImage(r.media,y,m,b,k,h,d,f,p)}var C=u.toDataURL(s,a).replace(s,"image/octet-stream");C=C.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),n(C)}))}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(a["VIDEO_RESIZE"],this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",t="SCREENSHOT";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(e,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</span>"),"\n      </div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:c["a"].CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),i}(le),Re=function(){function e(t){Object(n["b"])(this,e),this.config=t.config,this.parent=t.root,this.root=r["b"].createDom("ul","",{},"xg-options-list ".concat(this.config.className)),t.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var i="mobile"===o["a"].device?"touchend":"click";this._delegates=c["b"].delegate.call(this,this.root,"li",i,this.onItemClick)}return Object(n["c"])(e,[{key:"renderItemList",value:function(e){var t=this,i=this.config,n=this.root;e?i.data=e:e=i.data,i.style&&Object.keys(i.style).map((function(e){n.style[e]=i[e]})),e.length>0&&(this.attrKeys=Object.keys(e[0])),this.root.innerHTML="",e.map((function(e,i){var n=e.selected?"option-item selected":"option-item";e["data-index"]=i,t.root.appendChild(r["b"].createDom("li","<span>".concat(e.showText,"</span>"),e,n))}))}},{key:"onItemClick",value:function(e){e.delegateTarget||(e.delegateTarget=e.target);var t=e.delegateTarget;if(t&&r["b"].hasClass(t,"selected"))return!1;var i="function"===typeof this.config.onItemClick?this.config.onItemClick:null,n=this.root.querySelector(".selected");r["b"].addClass(t,"selected"),n&&r["b"].removeClass(n,"selected"),i(e,{from:n?this.getAttrObj(n,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(e,t){if(!e||!t)return{};var i={};t.map((function(t){i[t]=e.getAttribute(t)}));var n=e.getAttribute("data-index");return n&&(i.index=Number(n)),i}},{key:"show",value:function(){r["b"].removeClass(this.root,"hide"),r["b"].addClass(this.root,"active")}},{key:"hide",value:function(){r["b"].removeClass(this.root,"active"),r["b"].addClass(this.root,"hide")}},{key:"setStyle",value:function(e){var t=this;Object.keys(e).forEach((function(i){t.root.style[i]=e[i]}))}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map((function(e){e.destroy&&e.destroy()})),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),e}(),De={SIDE:"side",MIDDLE:"middle"},Ne={CLICK:"click",HOVER:"hover"};function Me(e,t){return e===De.SIDE?t===c["a"].CONTROLS_LEFT?"xg-side-list xg-left-side":"xg-side-list xg-right-side":""}var Fe="mobile"===o["a"].device,He=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;return Object(n["b"])(this,i),o=t.call(this,e),Object(n["e"])(Object(n["a"])(o),"onEnter",(function(e){e.preventDefault(),e.stopPropagation(),o.emit("icon_mouseenter",{pluginName:o.pluginName}),o.switchActiveState(e)})),Object(n["e"])(Object(n["a"])(o),"switchActiveState",(function(e){e.preventDefault(),e.stopPropagation();var t=o.config.toggleMode;t===Ne.CLICK?o.toggle(!o.isActive):o.toggle(!0)})),Object(n["e"])(Object(n["a"])(o),"onLeave",(function(e){e.preventDefault(),e.stopPropagation(),o.emit("icon_mouseleave",{pluginName:o.pluginName}),o.config.listType!==De.SIDE&&o.isActive&&o.toggle(!1)})),Object(n["e"])(Object(n["a"])(o),"onListEnter",(function(e){o.enterType=2})),Object(n["e"])(Object(n["a"])(o),"onListLeave",(function(e){o.enterType=0,o.isActive&&o.toggle(!1)})),o.isIcons=!1,o.isActive=!1,o.curValue=null,o.curIndex=0,o}return Object(n["c"])(i,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,t=this.config;this.initIcons(),Fe&&t.listType!==De.MIDDLE&&(t.listType=De.SIDE),t.hidePortrait&&r["b"].addClass(this.root,"portrait"),this.once(a["CANPLAY"],(function(){t.list&&t.list.length>0&&(e.renderItemList(t.list),e.show())})),Fe&&this.on(a["PLAYER_FOCUS"],(function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)})),Fe?(t.toggleMode=Ne.CLICK,this.activeEvent="touchend"):this.activeEvent=t.toggleMode===Ne.CLICK?"click":"mouseenter",t.toggleMode===Ne.CLICK?this.bind(this.activeEvent,this.switchActiveState):(this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,t=this.icons,i=Object.keys(t),n=!1;i.length>0&&(i.forEach((function(i){e.appendChild(".xgplayer-icon",t[i]),!n&&(n=t[i])})),this.isIcons=n),n||(this.appendChild(".xgplayer-icon",r["b"].createDom("span","",{},"icon-text")),r["b"].addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||r["b"].addClass(this.root,"show")}},{key:"hide",value:function(){r["b"].removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,t,i){if(void 0===e)return"";var o=this.config.list;!i&&(i=this.player.lang),t=!t||r["b"].isUndefined(e[t])?"text":t,"number"===typeof e&&(e=o[e]);try{return"object"===Object(n["l"])(e[t])?e[t][i]||e[t].en:e[t]}catch(a){return""}}},{key:"toggle",value:function(e){if(e!==this.isActive){var t=this.player.controls,i=this.config.listType;e?(i===De.SIDE?t.blur():t.focus(),this.optionsList&&this.optionsList.show()):(i===De.SIDE?t.focus():t.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,t){e.preventDefault(),e.stopPropagation();var i=this.config,n=i.listType,o=i.list;this.curIndex=t.to.index,this.curItem=o[this.curIndex],this.changeCurrentText();var r=this.config.isItemClickHide;(r||Fe||n===De.SIDE)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,t=this.curIndex<e.length?this.curIndex:0,i=e[t];i&&(this.find(".icon-text").innerHTML=this.getTextByLang(i,"iconText"))}}},{key:"renderItemList",value:function(e,t){var i=this,n=this.config,o=this.optionsList,r=this.player;if("number"===typeof t&&(this.curIndex=t,this.curItem=n.list[t]),o)return o.renderItemList(e),void this.changeCurrentText();var a={config:{data:e||[],className:Me(n.listType,n.position),onItemClick:function(e,t){i.onItemClick(e,t)}},root:n.listType===De.SIDE?r.innerContainer||r.root:this.root};this.config.isShowIcon&&(this.optionsList=new Re(a),this.changeCurrentText(),this.show());var s=this.player.root.getBoundingClientRect(),c=s.height,l=n.listType===De.MIDDLE?c-50:c;this.optionsList&&this.optionsList.setStyle({maxHeight:"".concat(l,"px")})}},{key:"destroy",value:function(){var e=this.config;e.toggleMode===Ne.CLICK?this.unbind(this.activeEvent,this.switchActiveState):(this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave)),this.isIcons&&this.unbind("click",this.onIconClick),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon">\n    </div>\n   </xg-icon>')}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:c["a"].CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0,toggleMode:Ne.HOVER}}}]),i}(c["b"]),Ue=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;return Object(n["b"])(this,i),o=t.call(this,e),o.curTime=0,o.isPaused=!0,o}return Object(n["c"])(i,[{key:"beforeCreate",value:function(e){var t=e.config.list;Array.isArray(t)&&t.length>0&&(e.config.list=t.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})))}},{key:"afterCreate",value:function(){var e=this;Object(n["f"])(Object(n["g"])(i.prototype),"afterCreate",this).call(this),this.on("resourceReady",(function(t){e.changeDefinitionList(t)})),this.on(a["DEFINITION_CHANGE"],(function(t){e.renderItemList(e.config.list,t.to)})),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||r["b"].addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,t=e.list,i=e.defaultDefinition;if(t.length>0){var n=null;t.map((function(e){e.definition===i&&(n=e)})),n||(n=t[0]),this.changeDefinition(n)}}},{key:"renderItemList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.list||[],o=arguments.length>1?arguments[1]:void 0,r=o&&o.definition?o.definition:this.config.defaultDefinition;o&&t.forEach((function(e){e.selected=!1}));var a=0,s=t.map((function(t,i){var o=Object(n["i"])(Object(n["i"])({},t),{},{showText:e.getTextByLang(t)||t.definition,selected:!1});return(t.selected||t.definition&&t.definition==r)&&(o.selected=!0,a=i),o}));Object(n["f"])(Object(n["g"])(i.prototype),"renderItemList",this).call(this,s,a)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,t){this.player.changeDefinition(e,t)}},{key:"onItemClick",value:function(e,t){var o=this.player.definitionList;Object(n["f"])(Object(n["g"])(i.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:t.from,to:t.to});for(var r=0;r<o.length;r++)t.to&&o[r].definition===t.to.definition&&(t.to.url=o[r].url),t.from&&o[r].definition===t.from.definition&&(t.from.url=o[r].url);this.player.changeDefinition(t.to,t.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return Object(n["i"])(Object(n["i"])({},He.defaultConfig),{},{position:c["a"].CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),i}(He),Be=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;return Object(n["b"])(this,i),o=t.call(this,e),o.curRate=1,o}return Object(n["c"])(i,[{key:"beforeCreate",value:function(e){var t=e.player.config.playbackRate,i=t?Array.isArray(t)?t:e.config.list:[];Array.isArray(i)&&(e.config.list=i.map((function(e){return"number"===typeof e?e={rate:e,text:"".concat(e,"x")}:!e.text&&e.rate&&(e.text="".concat(e.rate,"x")),e})))}},{key:"afterCreate",value:function(){var e=this;Object(n["f"])(Object(n["g"])(i.prototype),"afterCreate",this).call(this),this.on(a["RATE_CHANGE"],(function(){e.curValue!==e.player.playbackRate&&e.renderItemList()})),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&Object(n["f"])(Object(n["g"])(i.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,t){Object(n["f"])(Object(n["g"])(i.prototype),"onItemClick",this).apply(this,arguments);var o=e.delegateTarget,r=Number(o.getAttribute("rate"));if(!r||r===this.curValue)return!1;var a={playbackRate:{from:this.player.playbackRate,to:r}};this.emitUserAction(e,"change_rate",{props:a}),this.curValue=r,this.player.playbackRate=r}},{key:"renderItemList",value:function(){var e=this,t=this.player.playbackRate||1;this.curValue=t;var o=-1,r=this.config.list.map((function(i,n){var r={rate:i.rate};return r.rate===t&&(r.selected=!0,o=n),r.showText=e.getTextByLang(i),r}));Object(n["f"])(Object(n["g"])(i.prototype),"renderItemList",this).call(this,r,o)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,t=this.curIndex<e.length?this.curIndex:0,i=e[t],n="";n=!i||this.curIndex<0?"".concat(this.player.playbackRate,"x"):this.getTextByLang(i,"iconText"),this.find(".icon-text").innerHTML=n}}},{key:"destroy",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return Object(n["i"])(Object(n["i"])({},He.defaultConfig),{},{position:c["a"].CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),i}(He);function Ge(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Ve(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var We=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i,[{key:"beforeCreate",value:function(e){"boolean"===typeof e.player.config.cssFullscreen&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;Object(n["f"])(Object(n["g"])(i.prototype),"afterCreate",this).call(this),this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(a["CSS_FULLSCREEN_CHANGE"],(function(t){e.animate(t)})),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,t=this.find(".xgplayer-icon");t.appendChild(e.cssFullscreen),t.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:t}),t?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var t=this.i18nKeys,i=this.find(".xg-tips");i&&this.changeLangTextKey(i,e?t.EXITCSSFULLSCREEN_TIPS:t.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:Ge,class:"xg-get-cssfull"},exitCssFullscreen:{icon:Ve,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){Object(n["f"])(Object(n["g"])(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return"<xg-icon class='xgplayer-cssfullscreen'>\n    <div class=\"xgplayer-icon\">\n    </div>\n    ".concat(O(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:c["a"].CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),i}(le),Ye=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(a["ERROR"],(function(t){e.onError(t)}))}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.player,i=e.errorType,n=t.errorNote?this.i18n[t.errorNote]:"";if(!n)switch(i){case"decoder":n=this.i18n.MEDIA_ERR_DECODE;break;case"network":n=this.i18n.MEDIA_ERR_NETWORK;break;default:n=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=n,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),i}(c["b"]),Ke=i("b39b"),ze=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],(function(t){(e.config.onClick||e.customOnClick)&&(t.preventDefault(),t.stopPropagation(),e.customOnClick?e.customOnClick(t):e.config.onClick(t))})),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var t=this;Object.keys(e).map((function(i){t.root.style[i]=e[i]}))}},{key:"show",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){this.customOnClick=n;var o=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),r["b"].addClass(this.root,"show"),"arrow"===i.mode&&r["b"].addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"===typeof e?e:"".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),i.style&&this.setStyle(i.style);var a="boolean"===typeof i.autoHide?i.autoHide:this.config.autoHide;if(a){var s=i.interval||o;this.intervalId=setTimeout((function(){t.hide()}),s)}}}},{key:"hide",value:function(){r["b"].removeClass(this.root,"show"),r["b"].removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(Ke["a"].CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),i}(c["b"]),Xe={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function qe(e){Object.keys(Xe).map((function(t){void 0===e[t]&&(e[t]=Xe[t])}))}var Ze={_updateDotDom:function(e,t){if(t){var i=this.calcuPosition(e.time,e.duration),n=e.style||{};n.left="".concat(i.left,"%"),n.width="".concat(i.width,"%"),t.setAttribute("data-text",e.text),t.setAttribute("data-time",e.time),i.isMini?r["b"].addClass(t,"mini"):r["b"].removeClass(t,"mini"),Object.keys(n).map((function(e){t.style[e]=n[e]}))}},initDots:function(){var e=this;this._ispots.map((function(t){e.createDot(t,!1)})),this.ispotsInit=!0},createDot:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.player.plugins.progress;if(i&&(t&&(qe(e),this._ispots.push(e)),this.ispotsInit||!t)){var n=this.calcuPosition(e.time,e.duration),o=e.style||{};o.left="".concat(n.left,"%"),o.width="".concat(n.width,"%");var a="xgspot_".concat(e.id," xgplayer-spot");n.isMini&&(a+=" mini");var s=r["b"].createDom("xg-spot",e.template||"",{"data-text":e.text,"data-time":e.time,"data-id":e.id},a);Object.keys(o).map((function(e){s.style[e]=o[e]})),i.outer&&i.outer.appendChild(s)}},findDot:function(e){if(this.player.plugins.progress){var t=this._ispots.filter((function(t,i){return t.id===e}));return t.length>0?t[0]:null}},updateDot:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.player.plugins.progress;if(i){var n=this.findDot(e.id);if(n&&Object.keys(e).map((function(t){n[t]=e[t]})),this.ispotsInit){var o=i.find('xg-spot[data-id="'.concat(e.id,'"]'));o&&(this._updateDotDom(e,o),t&&this.showDot(e.id))}}},deleteDot:function(e){var t=this._ispots,i=this.player.plugins.progress;if(i){for(var n=[],o=0;o<t.length;o++)t[o].id===e&&n.push(o);for(var r=n.length,a=r-1;a>=0;a--)if(t.splice(n[a],1),this.ispotsInit){var s=i.find('xg-spot[data-id="'.concat(e,'"]'));s&&s.parentElement.removeChild(s)}}},deleteAllDots:function(){var e=this.player.plugins.progress;if(e)if(this.ispotsInit){for(var t=e.root.getElementsByTagName("xg-spot"),i=t.length-1;i>=0;i--)e.outer.removeChild(t[i]);this._ispots=[]}else this._ispots=[]},updateAllDots:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=this.player.plugins.progress;if(i)if(this.ispotsInit){this._ispots=[];var n=i.root.getElementsByTagName("xg-spot"),o=n.length;if(o>t.length)for(var r=o-1;r>t.length-1;r--)i.outer.removeChild(n[r]);t.forEach((function(t,i){i<o?(n[i].setAttribute("data-id","".concat(t.id)),e._ispots.push(t),e.updateDot(t)):e.createDot(t)}))}else this._ispots=t},updateDuration:function(){var e=this,t=this.player.plugins.progress;if(t){var i=this._ispots;i.forEach((function(i){var n=t.find('xg-spot[data-id="'.concat(i.id,'"]'));e._updateDotDom(i,n)}))}},getAllDotsDom:function(){var e=this.player.plugins.progress;if(!e)return[];var t=e.root.getElementsByTagName("xg-spot");return t},getDotDom:function(e){var t=this.player.plugins.progress;if(t)return t.find('xg-spot[data-id="'.concat(e,'"]'))}};function Je(e){var t=e.config,i=e.player;Object.keys(Ze).map((function(t){e[t]=Ze[t].bind(e)}));var n=i.config.progressDot||t.ispots||[];e._ispots=n.map((function(e){return qe(e),e})),e.ispotsInit=!1,e.on(a["DURATION_CHANGE"],(function(){e.ispotsInit?e.updateDuration():e.initDots()}))}var $e={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMove"},Qe=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;return Object(n["b"])(this,i),o=t.call(this,e),Object(n["e"])(Object(n["a"])(o),"onMousemove",(function(e){o.config.disable||(r["b"].hasClass(e.target,"xg-spot-content")&&o.config.isHideThumbnailHover?o.player.plugins.progress.onMouseLeave(e):(o._state.f||r["b"].hasClass(e.target,"xg-spot-content"))&&(r["b"].event(e),e.stopPropagation()))})),Object(n["e"])(Object(n["a"])(o),"onMousedown",(function(e){o.config.disable||(o._state.f||r["b"].hasClass(e.target,"xg-spot-content"))&&(r["b"].event(e),e.stopPropagation())})),Object(n["e"])(Object(n["a"])(o),"onMouseup",(function(e){if(o.isDrag){var t=o.player.plugins.progress;t&&t.pos&&(t.onMouseUp(e),!t.pos.isEnter&&t.onMouseLeave(e))}})),Object(n["e"])(Object(n["a"])(o),"onDotMouseLeave",(function(e){if(!o.config.disable){o._curDot.removeEventListener("mouseleave",o.onDotMouseLeave),o.blurDot(e.target),o._curDot=null;var t=o.player.plugins.progress;t&&t.enableBlur(),o.show()}})),Object(n["e"])(Object(n["a"])(o),"onProgressMouseOver",(function(e,t){if(!o.config.disable&&r["b"].hasClass(t.target,"xgplayer-spot")&&!o._curDot){o._curDot=t.target,o.focusDot(t.target),o._curDot.children.length>0&&o.hide();var i=o.player.plugins.progress;i&&i.disableBlur(),o._curDot.addEventListener("mouseleave",o.onDotMouseLeave)}})),o._ispots=[],o.videoPreview=null,o.videothumbnail=null,o.thumbnail=null,o.timeStr="",o._state={now:0,f:!1},o}return Object(n["c"])(i,[{key:"beforeCreate",value:function(e){var t=e.player.plugins.progress;t&&(e.root=t.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",(function(t,i){i.currentTime&&e.player.seek(i.currentTime)})),this.transformTimeHook=this.hook("transformTime",(function(t){e.setTimeContent(r["b"].format(t))})),Je(this),this.on(a["DURATION_CHANGE"],(function(){e.show()})),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).map((function(i){t.config[i]=e[i]}))}},{key:"onPluginsReady",value:function(){var e=this.player;e.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,t=this.player.plugins.progress;if(t&&(Object.keys($e).map((function(i){e[$e[i]]=e[$e[i]].bind(e),t.addCallBack(i,e[$e[i]])})),"mobile"!==o["a"].device)){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var i=this.hook("previewClick",(function(){}));this.handlerPreviewClick=function(t){t.stopPropagation(),i(parseInt(1e3*e._state.now,10)/1e3,t)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,t){!this.config.disable&&this.player.duration&&this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){!this.config.disable&&this.player.duration&&(this.isDrag=!0,this.videoPreview&&r["b"].addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){!this.config.disable&&this.player.duration&&(this.isDrag=!1,this.videoPreview&&r["b"].removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,t){this.config.disable||r["b"].hasClass(t.target,"xgplayer-spot")&&(t.stopPropagation(),t.preventDefault(),["time","id","text"].map((function(i){e[i]=t.target.getAttribute("data-".concat(i))})),e.time&&(e.time=Number(e.time)),this.handlerSpotClick(t,e))}},{key:"updateLinePos",value:function(e,t){var i=this.root,n=this.previewLine,o=this.player,r=this.config,a=o.controls.mode,s="flex"===a,c=i.getBoundingClientRect().width;if(c){c=this._hasThumnail&&c<r.width?r.width:c;var l,u=e-c/2;u<0&&!s?(u=0,l=e-c/2):u>t-c&&!s?(l=u-(t-c),u=t-c):l=0,void 0!==l&&(n.style.transform="translateX(".concat(l.toFixed(2),"px)")),i.style.transform="translateX(".concat(u.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(e){var t=this.timeText,i=this.timePoint;t.innerHTML=e,!this.thumbnail&&(i.innerHTML=e)}},{key:"updatePosition",value:function(e,t,i,n){var o=this.root,a=this.config,s=this._state;if(o){s.now=i,this.transformTimeHook(i);var c=this.timeStr;n&&n.target&&r["b"].hasClass(n.target,"xgplayer-spot")?(this.showTips(n.target.getAttribute("data-text"),!1,c),this.focusDot(n.target),s.f=!0,a.isFocusDots&&s.f&&(s.now=parseInt(n.target.getAttribute("data-time"),10))):a.defaultText?(s.f=!1,this.showTips(a.defaultText,!0,c)):(s.f=!1,this.hideTips("")),this.updateTimeText(c),this.updateThumbnails(s.now),this.updateLinePos(e,t)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var t=this.player,i=this.videoPreview,n=this.config,o=t.plugins.thumbnail;if(o&&o.usable){this.thumbnail&&o.update(this.thumbnail,e,n.width,n.height);var r=i&&i.getBoundingClientRect();this.videothumbnail&&o.update(this.videothumbnail,e,r.width,r.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==o["a"].device){var t=this.player,i=this.config,n=t.getPlugin("thumbnail");if(n&&n.setConfig(e),n&&n.usable&&i.isShowThumbnail){r["b"].removeClass(this.root,"short-line no-thumbnail"),"short"===i.mode&&r["b"].addClass(this.root,"short-line"),this._hasThumnail=!0;var a=this.find(".xg-spot-thumbnail");this.thumbnail=n.createThumbnail(a,"progress-thumbnail"),i.isShowCoverPreview&&(this.videoPreview=r["b"].createDom("xg-video-preview","",{},"xgvideo-preview"),t.root.appendChild(this.videoPreview),this.videothumbnail=n.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}else r["b"].addClass(this.root,"short-line no-thumbnail")}}},{key:"calcuPosition",value:function(e,t){var i=this.player.plugins.progress,n=this.player,o=i.root.getBoundingClientRect().width,r=n.duration/o*6;return e+t>n.duration&&(t=n.duration-e),n.duration,n.duration,{left:e/n.duration*100,width:t/n.duration*100,isMini:t<r}}},{key:"showDot",value:function(e){var t=this.findDot(e);if(t){var i=this.root.getBoundingClientRect(),n=i.width,o=t.time/this.player.duration*n;this.updatePosition(o,n,t.time)}}},{key:"focusDot",value:function(e,t){e&&(t||(t=e.getAttribute("data-id")),r["b"].addClass(e,"active"),this._activeDotId=t)}},{key:"blurDot",value:function(e){if(!e){var t=this._activeDotId;e=this.getDotDom(t)}e&&(r["b"].removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";r["b"].addClass(this.root,"no-timepoint"),e&&(r["b"].addClass(this.find(".xg-spot-content"),"show-text"),t&&"production"===this.config.mode?(r["b"].addClass(this.root,"product"),this.tipText.textContent=e):(r["b"].removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(i," ").concat(e)))}},{key:"hideTips",value:function(){r["b"].removeClass(this.root,"no-timepoint"),this.tipText.textContent="",r["b"].removeClass(this.find(".xg-spot-content"),"show-text"),r["b"].removeClass(this.root,"product")}},{key:"hide",value:function(){r["b"].addClass(this.root,"hide")}},{key:"show",value:function(){r["b"].removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,t=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(t.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,t=this.player.plugins.progress;t&&Object.keys($e).map((function(i){t.removeCallBack(i,e[$e[i]])})),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===o["a"].device||"mobile"===this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info hide '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-ext-text"></div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),i}(c["b"]),et=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(e){var o;return Object(n["b"])(this,i),o=t.call(this,e),o.ratio=1,o.interval=null,o._preloadMark={},o}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([a["DURATION_CHANGE"]],(function(){var t=e.config,i=t.pic_num,n=t.interval;e.usable&&(e.interval=n>0?n:Math.round(1e3*e.player.duration/i)/1e3)}))}},{key:"setConfig",value:function(e){var t=this;if(e){var i=Object.keys(e);i.length<1||(i.forEach((function(i){t.config[i]=e[i]})),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var e=this.config,t=e.urls,i=e.pic_num;return t&&t.length>0&&i>0}},{key:"initThumbnail",value:function(){var e=this.config,t=e.width,i=e.height,n=e.pic_num,o=e.interval;this.ratio=t/i*100,this.interval=o||Math.round(this.player.duration/n),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var t=this;if(!this._preloadMark[e]){var i=this.config.urls,n=i.length,o=[];e>0&&o.push(e-1),o.push(e),e>0&&e<n-1&&o.push(e+1),o.map((function(e){!t._preloadMark[e]&&e>=0&&e<n&&(t._preloadMark[e]=1,r["b"].preloadImg(i[e],(function(){t._preloadMark[e]=2})))}))}}},{key:"getPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.config,o=n.pic_num,r=n.row,a=n.col,s=n.width,c=n.height;this.interval=Math.round(this.player.duration/o);var l=Math.ceil(e/this.interval);l=l>o?o:l;var u=l<r*a?0:Math.ceil(l/(r*a))-1,h=l-u*(a*r),d=h>0?Math.ceil(h/a)-1:0,f=h>0?h-d*a-1:0,p=0,g=0;if(t&&i){var v=t/i;v<s/c?(g=i,p=g*(s/c)):(p=t,g=p/(s/c))}else i?t||(g=i||c,p=g*(s/c)):(p=t||s,g=p/(s/c));var y=this.getUrlByIndex(u);return{urlIndex:u,rowIndex:d,colIndex:f,url:y,height:g,width:p,style:{backgroundImage:"url(".concat(y,")"),backgroundSize:"".concat(p*a,"px auto"),backgroundPosition:"-".concat(f*p,"px -").concat(d*g,"px"),width:"".concat(p,"px"),height:"".concat(g,"px")}}}},{key:"update",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=this.config,a=r.pic_num,s=r.urls;if(!(a<=0)&&s&&0!==s.length){var c=this.getPosition(t,i,n);this.preload(c.urlIndex),Object.keys(c.style).map((function(t){e.style[t]=c.style[t]})),Object.keys(o).map((function(t){e.style[t]=o[t]}))}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,t){var i=r["b"].createDom("xg-thumbnail","",{},"thumbnail ".concat(t));return e&&e.appendChild(i),i}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),i}(c["b"]),tt=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;t&&this.root&&(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/t*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/t*100,"%")))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),i}(c["b"]),it={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate",POSTER:"poster"};function nt(){try{return parseInt(window.performance.now(),10)}catch(e){return(new Date).getTime()}}function ot(){try{var e=document.createElement("canvas").getContext;return!!e}catch(t){return!1}}var rt=null,at=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e;Object(n["b"])(this,i);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return e=t.call.apply(t,[this].concat(s)),Object(n["e"])(Object(n["a"])(e),"onLoadedData",(function(t){e.player&&(e._frameCount=e.config.startFrameCount,e.renderOnTimeupdate(t),e.off(a["TIME_UPDATE"],e.renderOnTimeupdate),e.on(a["TIME_UPDATE"],e.renderOnTimeupdate))})),Object(n["e"])(Object(n["a"])(e),"renderOnTimeupdate",(function(t){e._frameCount>0?(e.renderOnce(),e._frameCount--):(e._isLoaded=!0,e.off(a["TIME_UPDATE"],e.renderOnTimeupdate),!e.player.paused&&e._checkIfCanStart()&&e.start())})),Object(n["e"])(Object(n["a"])(e),"start",(function(){var t=e.player.media,i=nt(),n=e.checkVideoIsSupport(t);n&&e.canvasCtx&&(e.stop(),t.videoWidth&&t.videoHeight&&(e.videoPI=t.videoHeight>0?parseInt(t.videoWidth/t.videoHeight*100,10):0,(e.config.mode===it.REAL_TIME||i-e.preTime>=e.interval)&&(t&&t.videoWidth&&e.update(n,e.videoPI),e.preTime=i)),e.frameId=r["b"].requestAnimationFrame(e.start))})),Object(n["e"])(Object(n["a"])(e),"stop",(function(){e.frameId&&(r["b"].cancelAnimationFrame(e.frameId),e.frameId=null)})),e}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this;!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),i.isSupport||(this.config.disable=!0);var t=this.config,n=t.disable,o=t.mode,r=t.frameRate;n||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/r,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this.once(a["COMPLETE"],(function(){e.player&&(e.init(),e.player.paused||e.start())})),o!==it.POSTER&&(o!==it.FIRST_FRAME&&(this.on(a["EMPTIED"],(function(){e.stop()})),this.on(a["PLAY"],(function(){e._checkIfCanStart()&&e.start()})),this.on(a["PAUSE"],(function(){e.stop()}))),this.on(a["LOADED_DATA"],this.onLoadedData),this.on(a["LOAD_START"],(function(){e._isLoaded=!1,e.stop()}))))}},{key:"init",value:function(){var e=this.player,t=this.config;this.canvasFilter=i.supportCanvasFilter();try{var n=this.config.isInnerRender&&e.innerContainer||e.root;n.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg"><canvas>\n        </canvas><xgmask></xgmask></div>'),this.root=n.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=t.filter,this.canvas.style.webkitFilter=t.filter),this.mask=this.find("xgmask"),t.addMask&&(this.mask.style.background=t.maskBg),this.canvasCtx=this.canvas.getContext("2d"),this.renderByPoster()}catch(o){s["b"].logError("plugin:DynamicBg",o)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var t=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(t&&("safari"!==o["a"].browser||!/^blob/.test(t.currentSrc)&&!/^blob/.test(t.src)))return t;var i=t?t.tagName.toLowerCase():"";return"canvas"===i||"img"===i?t:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var t="String"===r["b"].typeOf(e)?e:"String"===r["b"].typeOf(e.poster)?e.poster:null;this.updateImg(t)}}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&e!==it.FIRST_FRAME&&e!==it.POSTER}},{key:"renderOnce",value:function(){var e=this.player.media;if(e.videoWidth&&e.videoHeight){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var t=this.checkVideoIsSupport(e);t&&e.videoWidth&&this.update(t,this.videoPI)}}},{key:"updateImg",value:function(e){var t=this;if(e){var i=this.canvas.getBoundingClientRect(),n=i.width,o=i.height,r=new window.Image;r.onload=function(){if(t.canvas&&!t.frameId&&!t.isStart){t.canvas.height=o,t.canvas.width=n;var e=parseInt(n/o*100,10);t.update(r,e),r=null}},r.src=e}}},{key:"update",value:function(e,t){if(this.canvas&&this.canvasCtx&&t)try{var i=this._pos,n=this.config,o=this.canvas.getBoundingClientRect(),r=o.width,a=o.height;if(r!==i.width||a!==i.height||i.pi!==t){var c=parseInt(r/a*100,10);i.pi=t,i.width=this.canvas.width=r,i.height=this.canvas.height=a;var l=a,u=r;c<t?u=parseInt(a*t/100,10):c>t&&(l=parseInt(100*r/t,10)),i.rwidth=u*n.multiple,i.rheight=l*n.multiple,i.x=(r-i.rwidth)/2,i.y=(a-i.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=n.filter),this.canvasCtx.drawImage(e,i.x,i.y,i.rwidth,i.rheight)}catch(h){s["b"].logError("plugin:DynamicBg",h)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"===typeof rt||(rt=ot()),rt}},{key:"supportCanvasFilter",value:function(){return!("safari"===o["a"].browser||"firefox"===o["a"].browser)}}]),i}(c["b"]),st=i("674d"),ct="info",lt=a["STATS_EVENTS"],ut=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e;Object(n["b"])(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),Object(n["e"])(Object(n["a"])(e),"_recordUserActions",(function(t){var i=e._getTime(),o=Object.assign({},t,{msg:t.msg||t.action});e._stats[ct].push(Object(n["i"])(Object(n["i"])({type:"userAction"},i),{},{payload:o}))})),Object(n["e"])(Object(n["a"])(e),"_onReset",(function(){e.reset()})),Object(n["e"])(Object(n["a"])(e),"_recordInfo",(function(t){e.info(t)})),Object(n["e"])(Object(n["a"])(e),"_downloadStats",(function(){var t=e.getStats(),i=new Blob([JSON.stringify(t)],{type:"application/json"}),n=window.URL.createObjectURL(i),o=document.createElement("a");o.style.display="none",o.href=n,o.download="player.txt",o.disabled=!1,o.click()})),e}return Object(n["c"])(i,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:(new Date).toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(a["USER_ACTION"],this._recordUserActions),this.on(lt.STATS_INFO,this._recordInfo),this.on(lt.STATS_DOWNLOAD,this._downloadStats),this.on(lt.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var t=this._getTime();this._stats[ct].push(Object(n["i"])(Object(n["i"])({},t),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var t=Date.now(),i=t-e.startMs,o=Object(n["i"])({cat:"function",dur:i,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(o)}}},{key:"reset",value:function(){var e;this._stats=(e={},Object(n["e"])(e,ct,[]),Object(n["e"])(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player,t=e.media,i=[],n=0;n<t.buffered.length;n++)i.push({start:t.buffered.start(n),end:t.buffered.end(n)});var o={currentTime:t.currentTime,readyState:t.readyState,buffered:i,paused:t.paused,ended:t.ended};return this._stats.media=o,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){var e=this._stats[ct],t=e.map((function(e){var t=e.payload.data,i="";try{t instanceof Error?i=t.msg:void 0!==t&&(i=JSON.stringify(t))}catch(n){}return"[".concat(e.timeFormat,"] : ").concat(e.payload.msg," ").concat(i," ")}));return t}},{key:"_getProfile",value:function(){var e={traceEvents:[]},t=this._stats[ct];return t.forEach((function(t){t.payload.profile&&e.traceEvents.push(t.payload)})),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),i}(F["a"]),ht=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e;Object(n["b"])(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),Object(n["e"])(Object(n["a"])(e),"onGapJump",(function(){var t=Object(n["a"])(e),o=t.player,r=t.config;if(o.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(o.media.seeking){if(!e.seekingEventReceived)return}else e.seekingEventReceived=!1;if(!o.media.paused||0===o.media.currentTime||!e.hasPlayed){var a=o.media.buffered,s=r.smallGapLimit||.5,c=r.gapDetectionThreshold||.3,l=o.media.currentTime,u=e._getIndex(a,l,c);if(null!==u&&0!==u){var h=a.start(u)+.1,d=o.media.duration;if(!(h>d)){var f=h-l,p=f<=s;f<i.BROWSER_GAP_TOLERANCE||p&&(!1!==r.useGapJump&&(o.media.currentTime=e.isSafari?h+.1:h),e.player&&e.player.emit("detectGap"),.08!==h&&o&&o.emit("log",{type:"oneevent",end_type:"gap",vid:o.config.vid,ext:{video_postion:Math.floor(1e3*h)}}))}}}}})),e}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this,t=this.config.useGapJump;!1!==t&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(a["WAITING"],this.onGapJump),this.on(a["PLAY"],(function(){e.hasPlayed=!0})),this.on(a["SEEKING"],(function(){e.seekingEventReceived=!0})))}},{key:"_getIndex",value:function(e,t,i){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var n=this._getBuffered(e),o=null,r=0;r<n.length;r++){var a=n[r];if(a.start>t&&(0===r||n[r-1].end-t<=i)){o=r;break}}return o}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),i}(c["b"]);ht.BROWSER_GAP_TOLERANCE=.001;var dt=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e;Object(n["b"])(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),Object(n["e"])(Object(n["a"])(e),"onWaiting",(function(){var t=Object(n["a"])(e),i=t.config;e.jumpCnt>i.jumpCntMax||e.timer||!1===i.useWaitingTimeoutJump||(e.timer=setTimeout(e.onJump,1e3*i.waitingTime))})),Object(n["e"])(Object(n["a"])(e),"onJump",(function(){var t=Object(n["a"])(e),i=t.player,o=t.config;if(clearTimeout(e.timer),e.timer=null,!(e.jumpCnt>o.jumpCntMax||!1===o.useWaitingTimeoutJump)&&(!i.media.paused||0===i.media.currentTime||!e.hasPlayed)){e.jumpSize=o.jumpSize*(e.jumpCnt+1),e.jumpCnt===o.jumpSize&&e.jumpSize<6&&(e.jumpSize=6);var r=i.currentTime+e.jumpSize,a=i.media.duration;r>a||(e.jumpCnt++,i.currentTime=r)}})),e}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this,t=this.config,i=t.useWaitingTimeoutJump,n=t.jumpSize;!1!==i&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=n,this.on(a["WAITING"],this.onWaiting),this.on([a["PLAYING"],a["CANPLAY"]],(function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize})),this.on(a["PLAY"],(function(){e.hasPlayed=!0})))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),i}(c["b"]),ft=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){var e;Object(n["b"])(this,i);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),Object(n["e"])(Object(n["a"])(e),"getSpeed",(function(t){if(e.speedListCache.length<=0)return 0;var i=0;return e.speedListCache.map((function(e){i+=e})),Math.floor(i/e.speedListCache.length)})),Object(n["e"])(Object(n["a"])(e),"_onRealSpeedChange",(function(t){t.speed&&e.appendList(t.speed)})),Object(n["e"])(Object(n["a"])(e),"testSpeed",(function(){if(clearTimeout(e.timer),e.timer=null,e.player&&e.config.openSpeed){var t=e.config,i=t.url,n=t.loadSize,o=t.testCnt,r=t.testTimeStep,a=i+(i.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(e.cnt>=o)){e.cnt++;try{var s=(new Date).getTime(),c=null,l=new XMLHttpRequest;e.xhr=l,l.open("GET",a);var u={},h=Math.floor(10*Math.random());u.Range="bytes="+h+"-"+(n+h),u&&Object.keys(u).forEach((function(e){l.setRequestHeader(e,u[e])})),l.onreadystatechange=function(){if(4===l.readyState){e.xhr=null,c=(new Date).getTime();var t=l.getResponseHeader("Content-Length")/1024*8,i=Math.round(1e3*t/(c-s));e.appendList(i),e.timer=setTimeout(e.testSpeed,r)}},l.send()}catch(d){}}}})),Object(n["e"])(Object(n["a"])(e),"appendList",(function(t){var i=e.config.saveSpeedMax;e.speedListCache.length>=i&&e.speedListCache.shift(),e.speedListCache.push(t),e.player&&(e.player.realTimeSpeed=t),e.updateSpeed()})),Object(n["e"])(Object(n["a"])(e),"updateSpeed",(function(){var t=e.getSpeed(),i=Object(n["a"])(e),o=i.player;!o||o.avgSpeed&&t===o.avgSpeed||(o.avgSpeed=t,o.emit(a["DOWNLOAD_SPEED_CHANGE"],{speed:t,realTimeSpeed:o.realTimeSpeed}))})),e}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this;this.speedListCache=[];var t=this.config,i=t.openSpeed,n=t.testTimeStep;this.timer=null,this.cnt=0,this.xhr=null,i&&(this.on("real_time_speed",this._onRealSpeedChange),this.on([a["LOADED_DATA"],a["REPLAY"]],(function(){r["b"].isMSE(e.player.video)||(e.speedListCache=[],e.cnt=0,e.timer=setTimeout(e.testSpeed,n))})))}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer)return clearTimeout(this.timer),void(this.timer=null);if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){clearTimeout(this.timer),this.timer=null,this.xhr&&4!==this.xhr.readyState&&(this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:204800,testTimeStep:3e3,url:"",saveSpeedMax:5}}}]),i}(c["b"]),pt=i("5e99"),gt=function(e){Object(n["h"])(i,e);var t=Object(n["d"])(i);function i(){return Object(n["b"])(this,i),t.apply(this,arguments)}return Object(n["c"])(i,[{key:"afterCreate",value:function(){var e=this,t=this.player,i=this.config;if(this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],!i.disabled){var n=t.media.getVideoPlaybackQuality;n&&(this.on(a["PLAY"],(function(){e._startTick()})),this.on(a["PAUSE"],(function(){e._stopTick()})),this.on(a["ENDED"],(function(){e._stopTick()})),this.on(a["EMPTIED"],(function(){e._stopTick()})))}}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout((function(){e._checkDecodeFPS(),e._startTick()}),this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkStuck",value:function(e,t,i,n){var o=this.player.media,r=document.hidden,s=o.paused;if("boolean"===typeof r&&!r&&!s){for(var c=o.currentTime,l=o.buffered,u=!1,h=[],d=0;d<l.length;d++){var f=l.start(d),p=l.end(d);if(h.push({start:f,end:p}),f<=c&&c<=p-1){u=!0;break}}4===o.readyState&&u&&(this._currentStuckCount>this.config.stuckCount?(this.emit(a["FPS_STUCK"],this._payload),this._reset()):e<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({bufs:h,currentTime:o.currentTime,curDecodedFrames:e,totalVideoFrames:t,droppedVideoFrames:i,checkInterval:n})):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){if(this.player.media){var e=this.player.media.getVideoPlaybackQuality(),t=e.totalVideoFrames,i=e.droppedVideoFrames,n=performance.now();if(t&&this._lastCheckPoint){var o=t-this._lastDecodedFrames,r=n-this._lastCheckPoint;this._checkStuck(o,t,i,r)}this._lastDecodedFrames=t,this._lastCheckPoint=n}}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),i}(c["b"]);pt["a"].use(st["a"]);var vt=Object(n["c"])((function e(t,i){var r,a,s;Object(n["b"])(this,e);var c=i&&"mobile"===i.isMobileSimulateMode,l=i.isLive,u=l?[]:[ce,tt,Qe,ve],d=[].concat(u,[ue,ge,_e,xe,Ue,Be,Le,je,ke,we]),g=[f,p,C,oe,_,Ye,ze,et,M];this.plugins=[ut,h].concat(Object(n["k"])(d),g,[ht,dt]);var v=c?"mobile":o["a"].device;switch(v){case"pc":(r=this.plugins).push.apply(r,[ie,G,We,ft,gt]);break;case"mobile":(a=this.plugins).push.apply(a,[Q]);break;default:(s=this.plugins).push.apply(s,[ie,G,We])}(o["a"].os.isIpad||"pc"===v)&&this.plugins.push(at),o["a"].os.isIpad&&this.plugins.push(G),this.ignores=[],this.i18n=[]}))}}]);